function InfoBubble(e){this.extend(InfoBubble,google.maps.OverlayView),this.tabs_=[],this.activeTab_=null,this.baseZIndex_=100,this.isOpen_=!1;var t=e||{};void 0==t.backgroundColor&&(t.backgroundColor=this.BACKGROUND_COLOR_),void 0==t.borderColor&&(t.borderColor=this.BORDER_COLOR_),void 0==t.borderRadius&&(t.borderRadius=this.BORDER_RADIUS_),void 0==t.borderWidth&&(t.borderWidth=this.BORDER_WIDTH_),void 0==t.padding&&(t.padding=this.PADDING_),void 0==t.arrowPosition&&(t.arrowPosition=this.ARROW_POSITION_),void 0==t.disableAutoPan&&(t.disableAutoPan=!1),void 0==t.disableAnimation&&(t.disableAnimation=!1),void 0==t.minWidth&&(t.minWidth=this.MIN_WIDTH_),void 0==t.shadowStyle&&(t.shadowStyle=this.SHADOW_STYLE_),void 0==t.arrowSize&&(t.arrowSize=this.ARROW_SIZE_),void 0==t.arrowStyle&&(t.arrowStyle=this.ARROW_STYLE_),this.buildDom_(),this.setValues(t)}function initialize_confirmation_pending_form(e,t){$("#mistyped_email_link").click(function(){$("#password_forgotten").slideToggle("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.email").focus()});var n="#change_mistyped_email_form";$(n).validate({errorPlacement:function(e,t){e.insertAfter(t)},rules:{"person[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"}},messages:{"person[email]":{remote:t}},onkeyup:!1,submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function disable_and_submit(e,t,n,i){disable_submit_button(e,i),t.submit()}function prepare_ajax_form(e,t,n){$(e).ajaxForm({dataType:"script",beforeSubmit:function(){return $(e).validate({rules:n}),1==$(e).valid()&&disable_submit_button(e,t),$(e).valid()}})}function disable_submit_button(e){$(e).find("button").attr("disabled","disabled");var t=ST.jsonTranslations;$(e).find("button").text(t.please_wait)}function auto_resize_text_areas(e){$("textarea."+e).autosize()}function translate_validation_messages(e){function t(e){return function(t){var n=ST.utils.findElementByName(t).val();return jQuery.validator.format(e,n)}}var n=ST.jsonTranslations;jQuery.extend(jQuery.validator.messages,{required:n.validation_messages.required,remote:n.validation_messages.remote,email:n.validation_messages.email,url:n.validation_messages.url,date:n.validation_messages.date,dateISO:n.validation_messages.dateISO,number:n.validation_messages.number,digits:n.validation_messages.digits,creditcard:n.validation_messages.creditcard,equalTo:n.validation_messages.equalTo,accept:n.validation_messages.accept,maxlength:jQuery.validator.format(n.validation_messages.maxlength),minlength:jQuery.validator.format(n.validation_messages.minlength),rangelength:jQuery.validator.format(n.validation_messages.rangelength),range:jQuery.validator.format(n.validation_messages.range),max:jQuery.validator.format(n.validation_messages.max),min:jQuery.validator.format(n.validation_messages.min),address_validator:jQuery.validator.format(n.validation_messages.address_validator),money:jQuery.validator.format(n.validation_messages.money),min_bound:t(n.validation_messages.min_bound),max_bound:t(n.validation_messages.max_bound),number_min:jQuery.validator.format(n.validation_messages.min),number_max:jQuery.validator.format(n.validation_messages.max),number_no_decimals:n.validation_messages.number_no_decimals,number_decimals:n.validation_messages.number_decimals,number_conditional_decimals:n.validation_messages.number})}function add_validator_methods(){function e(e){return Number(e.replace(",","."))}function t(t){return e(t.val())}$.validator.setDefaults({ignore:[]}),$.validator.addMethod("accept",function(e,t,n){return e.match(new RegExp(/(\.jpe?g|\.gif|\.png|^$)/i))}),$.validator.addMethod("valid_username",function(e,t,n){return e.match(new RegExp("(^[A-Za-z0-9_]*$)"))}),$.validator.addMethod("regex",function(e,t,n){var i=new RegExp(n);return i.test(e)}),$.validator.addMethod("email_list",function(e,t,n){for(var i=e.split(","),r=new RegExp(/^[A-Z0-9._%\-\+\~\/]+@([A-Z0-9-]+\.)+[A-Z]+$/i),o=0;o<i.length;o++)if(!r.test($.trim(i[o])))return!1;return!0}),$.validator.addMethod("min_date",function(e,t,n){return"true"==n?get_datetime_from_datetime_select()>new Date:get_date_from_date_select()>new Date}),$.validator.addMethod("max_date",function(e,t){var n=new Date,i=new Date(new Date(n).setMonth(n.getMonth()+6));return get_date_from_date_select()<i}),$.validator.addMethod("required_when_not_neutral_feedback",function(e,t,n){if(""==e)for(var i=new Array("1","2","4","5"),r=0;r<i.length;r++)if($("#grade-"+i[r]).is(":checked"))return!1;return!0}),$.validator.addMethod("positive_integer",function(e,t,n){var i=~~Number(e);return String(i)===e&&i>=0}),$.validator.addMethod("minimum_price_required",function(e,t,n){return minimum_price=_.first(n)||"",subunit_to_unit=_.first(_.rest(n)),""==minimum_price?!0:minimum_price<=ST.paymentMath.parseSubunitFloatFromFieldValue(e,subunit_to_unit)}),$.validator.addMethod("money",function(e,t,n){var i=/^\d*((\.|\,)\d{1,2})?$/;return e&&i.test(e)}),$.validator.addMethod("max_bound",function(n,i,r){var o=ST.utils.findElementByName(r);return Number(e(n))>t(o)}),$.validator.addMethod("min_bound",function(n,i,r){var o=ST.utils.findElementByName(r);return Number(e(n))<t(o)}),$.validator.addMethod("number_conditional_decimals",function(e,t,n){var i=ST.utils.findElementByName(n),r=i.is(":checked"),o=/^\d+?$/,a=/^\d+((\.|\,)\d+)?$/,s=r?a:o;return s.test(e)}),$.validator.addClassRules("required",{required:!0}),$.validator.addClassRules("number-no-decimals",{number_no_decimals:!0}),$.validator.addClassRules("number-decimals",{number_decimals:!0}),$.validator.addClassRules("url",{url:!0}),$.validator.addMethod("number_no_decimals",function(e,t,n){var i=/^\d+?$/;return 0===e.length?!0:i.test(e)}),$.validator.addMethod("number_decimals",function(e,t){var n=/^\d+((\.|\,)\d+)?$/;return 0===e.length?!0:n.test(e)}),$.validator.addMethod("number_min",function(t,n,i){return 0===t.length?!0:e(t)>=i}),$.validator.addMethod("number_max",function(t,n,i){return 0===t.length?!0:e(t)<=i})}function initialize_defaults(e){add_validator_methods(),translate_validation_messages(e),$(".flash-notifications").click(function(){$(".flash-notifications").fadeOut("slow")}),$(".ajax-notification").click(function(){$(".ajax-notification").fadeOut("slow")}),$("#login-toggle-button").click(function(){$("#upper_person_login").focus()})}function initialize_network_defaults(e,t){enableSamePageScroll()}function initialize_admin_edit_price(e,t,n,i){translate_validation_messages(i),rules={},rules[t]={min_bound:n},rules[n]={max_bound:t},e.validate({rules:rules})}function initialize_user_feedback_form(){form_id="#new_feedback",$(form_id).validate({rules:{"feedback[email]":{required:!1,email:!0},"feedback[content]":{required:!0,minlength:1}}})}function initialize_email_members_form(){form_id="#new_member_email",auto_resize_text_areas("email_members_text_area"),$(form_id).validate({rules:{"email[subject]":{required:!0,minlength:2},"email[content]":{required:!0,minlength:2}}})}function initialize_login_form(e){1==e&&($("#password_forgotten").slideDown("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.request_password").focus()),$("#password_forgotten_link").click(function(){$("#password_forgotten").slideToggle("fast"),$("html, body").animate({scrollTop:$(document).height()},1e3),$("input.request_password").focus()}),$("#login_form input.text_field:first").focus()}function initialize_payments_form(e){var t="#payment_settings_form";$(t).validate({rules:{"checkout_account_form[company_id_or_personal_id]":{required:!0,minlength:9,maxlength:11},"checkout_account_form[phone_number]":{required:!0,maxlength:25},"checkout_account_form[organization_address]":{required:!0,minlength:6}},messages:{},onkeyup:!1,submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_braintree_account_form(e){var t="#braintree_account_form";$(t).validate({rules:{"braintree_account[first_name]":{required:!0},"braintree_account[last_name]":{required:!0},"braintree_account[email]":{required:!0,email:!0},"braintree_account[phone]":{required:!0},"braintree_account[address_street_address]":{required:!0},"braintree_account[address_postal_code]":{required:!0,minlength:2,maxlength:6},"braintree_account[address_locality]":{required:!0},"braintree_account[address_region]":{required:!0},"braintree_account[date_of_birth]":{required:!0},"braintree_account[routing_number]":{required:!0,minlength:9,maxlength:9},"braintree_account[account_number]":{required:!0}},messages:{},onkeyup:!1,submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_send_message_form(e){auto_resize_text_areas("text_area"),$("textarea").focus();var t="#new_listing_conversation";$(t).validate({rules:{"listing_conversation[title]":{required:!0,minlength:1,maxlength:120},"listing_conversation[content]":{required:!0,minlength:1}},submitHandler:function(n){disable_and_submit(t,n,"false",e),report_analytics_event("message","sent")}})}function initialize_send_person_message_form(e){auto_resize_text_areas("text_area"),$("textarea").focus();var t="#new_conversation";$(t).validate({rules:{"conversation[message_attributes][content]":{required:!0,minlength:1}},submitHandler:function(n){disable_and_submit(t,n,"false",e),report_analytics_event("message","sent")}})}function initialize_reply_form(e){auto_resize_text_areas("reply_form_text_area"),$("textarea").focus(),prepare_ajax_form("#new_message",e,{"message[content]":{required:!0,minlength:1}})}function initialize_listing_view(e){$("#listing-image-link").click(function(){$("#listing-image-lightbox").lightbox_me({centered:!0,zIndex:1e6})}),auto_resize_text_areas("listing_comment_content_text_area"),$("textarea").focus(),prepare_ajax_form("#new_comment",e,{"comment[content]":{required:!0,minlength:1}}),$("#send_comment_button").click(function(){report_analytics_event("listing","commented")})}function initialize_accept_transaction_form(e,t,n,i,r,o,a){function s(){update_complex_form_price_fields(e,t)}auto_resize_text_areas("text_area"),style_action_selectors(),null!=e&&("simple"===n?($(".trigger-focusout").keyup(function(t){update_simple_form_price_fields(e)}),$(i).validate({rules:{"listing_conversation[payment_attributes][sum]":{money:!0,minimum_price_required:[r,o]}},messages:{"listing_conversation[payment_attributes][sum]":{minimum_price_required:a}}})):($(".trigger-focusout").focusout(s),s()))}function updateSellerGetsValue(e,t,n,i,r,o){function a(){var e,t=ST.paymentMath.parseFloatFromFieldValue($input.val());e=o?ST.paymentMath.totalCommission(t,i,r):t-ST.paymentMath.totalCommission(t,i,r),$display.text([ST.paymentMath.displayMoney(Math.max(0,e)),$currency.val()].join(" "))}o=o||!1,$display=$(t),$input=$(e),$currency=$(n),$input.keyup(a),$currency.change(a),a()}function update_simple_form_price_fields(e){var t=ST.paymentMath.parseFloatFromFieldValue($(".invoice-sum-field").val()),n=ST.paymentMath.totalCommission(t,e,0,0),i=t-n;$("#service-fee").text(ST.paymentMath.displayMoney(n)),$("#payment-to-seller").text(ST.paymentMath.displayMoney(i))}function update_complex_form_price_fields(e,t){var n="\u20ac",i=$(".field-row").toArray().map(function(e){var e=$(e),t=e.find(".payment-row-sum-field"),n=e.find(".payment-row-vat-field"),i=e.find(".total-label"),r=ST.paymentMath.parseFloatFromFieldValue(t.val()),o=ST.paymentMath.parseFloatFromFieldValue(n.val());o=Math.min(Math.max(o,0),100);var a=r+r*o/100;return{totalEl:i,sumWithVat:a}}),r=i.reduce(function(e,t){return e+t.sumWithVat},0),o=ST.paymentMath.totalCommission(r,e),a=o/(1+t/100),s=r-o;i.forEach(function(e){e.totalEl.text(e.sumWithVat.toFixed(2)+n)}),$("#service-fee-sum").text(a.toFixed(2)+n),$("#service-fee-total").text(o.toFixed(2)+n),$("#total").text(s.toFixed(2)+n)}function initialize_confirm_transaction_form(){style_action_selectors()}function style_action_selectors(){$(".conversation-action").each(function(){$(this).find("label").hide(),$(this).find(".conversation-action").each(function(){$(this).removeClass("hidden"),$(this).click(function(){var e=$(this).attr("id");$(this).siblings().removeClass("accept").removeClass("reject").removeClass("confirm").removeClass("cancel"),$(".confirm-description").addClass("hidden"),$(".cancel-description").addClass("hidden"),$("."+e+"-description").removeClass("hidden"),$(".conversation-price").addClass("hidden"),$("."+e+"-price").removeClass("hidden"),$(".hidden-accept-form").addClass("hidden"),$(".visible-when-"+e).removeClass("hidden"),$(this).addClass(e),$(".conversation-action").find("input:radio[id="+$(this).attr("name")+"]").attr("checked",!0),$("#conversation_message_attributes_action").val(e),$("#conversation_status").val(e+"ed")})})})}function initialize_give_feedback_form(e,t,n){auto_resize_text_areas("text_area"),$("textarea").focus(),style_grade_selectors();var i="#new_testimonial";$(i).validate({errorPlacement:function(e,t){"testimonial[grade]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)},rules:{"testimonial[grade]":{required:!0},"testimonial[text]":{required:!0}},messages:{"testimonial[grade]":{required:t}},submitHandler:function(t){disable_and_submit(i,t,"false",e)}})}function style_grade_selectors(){$(".feedback-grade").each(function(){$(this).find("label").hide(),$(this).find(".grade").each(function(){$(this).removeClass("hidden"),$(this).click(function(){$(this).siblings().removeClass("negative").removeClass("positive"),$(this).addClass($(this).attr("id")),$(".feedback-grade").find("input:radio[id="+$(this).attr("name")+"]").attr("checked",!0)})})})}function initialize_signup_form(e,t,n,i,r,o,a){$("#help_invitation_code_link").click(function(e){$("#help_invitation_code").lightbox_me({centered:!0,zIndex:1e6})}),$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})});var s="#new_person";$(s).validate({errorPlacement:function(e,t){"person[terms]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)},rules:{"person[username]":{required:!0,minlength:3,maxlength:20,valid_username:!0,remote:"/people/check_username_availability"},"person[given_name]":{required:o,maxlength:30},"person[family_name]":{required:o,maxlength:30},"person[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"},"person[terms]":"required","person[password]":{required:!0,minlength:4},"person[password2]":{required:!0,minlength:4,equalTo:"#person_password1"},invitation_code:{required:a,remote:"/people/check_invitation_code"}},messages:{"person[username]":{valid_username:n,remote:t},"person[email]":{remote:i},invitation_code:{remote:r}},onkeyup:!1,submitHandler:function(t){disable_and_submit(s,t,"false",e),report_analytics_event("user","signed up","normal form")}})}function initialize_terms_form(){$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})})}function initialize_payment_gateway_terms_lightbox(e){$("#"+e+"_terms_link").click(function(t){t.preventDefault(),$("#"+e+"_terms").lightbox_me({centered:!0,zIndex:1000001})})}function initialize_update_profile_info_form(e,t,n){auto_resize_text_areas("update_profile_description_text_area"),$("input.text_field:first").focus();var i="#edit_person_"+t;$(i).validate({rules:{"person[street_address]":{required:!1,address_validator:!0},"person[given_name]":{required:n,maxlength:30},"person[family_name]":{required:n,maxlength:30},"person[phone_number]":{required:!1,maxlength:25},"person[image]":{accept:"(jpe?g|gif|png)"}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0,submitHandler:function(t){disable_and_submit(i,t,"false",e)}})}function initialize_update_notification_settings_form(e,t){var n="#edit_person_"+t;$(n).validate({submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function initialize_update_account_info_form(e,t,n,i,r){$(".account-new-email-link").click(function(e){e.preventDefault(),$(".account-new-email-link").hide(),$(".account-settings-hidden-email-form").show(),$("#person_email_attributes_address").removeAttr("disabled"),$("#person_email_attributes_send_notifications").removeAttr("disabled")}),$(".account-hide-new-email-link").click(function(e){e.preventDefault(),$(".account-new-email-link").show(),$(".account-settings-hidden-email-form").hide(),$("#person_email_attributes_address").attr("disabled","disabled"),$("#person_email_attributes_send_notifications").attr("disabled","disabled")});var o=!0;$("#account_password_link").click(function(){o?($("#account_password_form").show(),$(this).text(n),$("#person_password").focus()):($("#account_password_form").hide(),$(this).text(t)),o=!o});var a="#email_form";$(a).validate({errorPlacement:function(e,t){"person[send_notifications][]"==t.attr("name")?e.insertAfter($("#account-settings-email-content-rows")):e.insertAfter(t)},rules:{"person[email_attributes][address]":{required:!0,email:!0,remote:"/people/check_email_availability"},"person[send_notifications][]":{required:!0}},messages:{"person[email_attributes][address]":{remote:i},"person[send_notifications][]":{required:r}},submitHandler:function(t){disable_and_submit(a,t,"false",e)}});var s="#password_form";$(s).validate({rules:{"person[password]":{required:!0,minlength:4},"person[password2]":{required:!0,minlength:4,equalTo:"#person_password"}},submitHandler:function(t){disable_and_submit(s,t,"false",e)}})}function initialize_reset_password_form(){var e="#new_person";$(e).validate({errorPlacement:function(e,t){e.insertAfter(t)},rules:{"person[password]":{required:!0,minlength:4},"person[password_confirmation]":{required:!0,minlength:4,equalTo:"#person_password"}},submitHandler:function(t){disable_and_submit(e,t,"false",locale)}})}function initialize_profile_view(e){$("#load-more-listings a").on("click",function(){var e=$(this).data().url;return $.get(e,function(e){$("#profile-listings-list").html(e)}),!1}),$("#load-more-followed-people").on("ajax:complete",function(e,t){$("#profile-followed-people-list").html(t.responseText),$(this).hide()}),$("#load-more-testimonials").click(function(){return request_path=e+"/testimonials",$.get(request_path,{per_page:200,page:1},function(e){$("#profile-testimonials-list").html(e)}),!1}),$("#description_preview_link").click(function(){$("#profile_description_preview").hide(),$("#profile_description_full").show()}),$("#description_full_link").click(function(){$("#profile_description_preview").show(),$("#profile_description_full").hide()}),$("#trustcloud_description_link").click(function(){$("#trustcloud_description").lightbox_me({centered:!0})})}function initialize_homepage(){$(".map-button").click(function(){return $("#hidden-map-toggle").val(!0),$("#homepage-filters").submit(),!1}),$(".list-button").click(function(){return $("#hidden-map-toggle").val(void 0),$("#homepage-filters").submit(),!1})}function initialize_invitation_form(e,t,n){$.validator.addMethod("max_invitations",function(e){return e.split(",").length<n},$.validator.format(t)),$("#new_invitation").validate({rules:{"invitation[email]":{required:!0,email_list:!0,max_invitations:!0},"invitation[message]":{required:!1,maxlength:5e3}},messages:{"invitation[email]":{email_list:t}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0,submitHandler:function(t){disable_and_submit("#new_invitation",t,"false",e)}})}function initialize_private_community_defaults(e,t){add_validator_methods(),translate_validation_messages(e),$("select.language_select").selectmenu({style:"dropdown",width:"100px"}),$("#close_notification_link").click(function(){$("#notifications").slideUp("fast")}),$(".wrapper").addClass("js_enabled")}function initialize_admin_edit_tribe_form(e,t){auto_resize_text_areas("new_tribe_text_area"),translate_validation_messages(e),$("#invite_only_help_text_link").click(function(){$("#invite_only_help_text").lightbox_me({centered:!0})});var n="#edit_community_"+t;$(n).validate({rules:{"community[name]":{required:!0,minlength:2,maxlength:50},"community[slogan]":{required:!0,minlength:2,maxlength:100},"community[description]":{required:!0,minlength:2}},submitHandler:function(t){disable_and_submit(n,t,"false",e)}})}function initialize_admin_edit_tribe_look_and_feel_form(e,t,n){translate_validation_messages(e);var i="#edit_community_"+t;$(i).validate({rules:{"community[custom_color1]":{required:!1,minlength:6,maxlength:6,regex:"^([a-fA-F0-9]+)?$"}},messages:{"community[custom_color1]":{regex:n}},submitHandler:function(t){disable_and_submit(i,t,"false",e)}})}function initialize_admin_social_media_form(e,t,n,i,r){translate_validation_messages(e);var o="#edit_community_"+t;$(o).validate({rules:{"community[twitter_handle]":{required:!1,minlength:1,maxlength:15,regex:"^([A-Za-z0-9_]+)?$"},"community[facebook_connect_id]":{required:!1,minlength:1,maxlength:16,regex:"^([0-9]+)?$"},"community[facebook_connect_secret]":{required:!1,minlength:32,maxlength:32,regex:"^([a-f0-9]+)?$"}},messages:{"community[twitter_handle]":{regex:n},"community[facebook_connect_id]":{regex:i},"community[facebook_connect_secret]":{regex:r}},submitHandler:function(t){disable_and_submit(o,t,"false",e)}})}function initialize_admin_listing_field_form_view(e,t,n,i){translate_validation_messages(e);var r=($(t),"custom_field[category_attributes][][category_id]"),o="custom_field[min]",a="custom_field[max]",s="custom_field[allow_decimals]",u={};u[r]={required:!0},u[o]={min_bound:a,number_conditional_decimals:s},u[a]={max_bound:o,number_conditional_decimals:s},$(t).validate({rules:u,errorPlacement:function(e,t){if(t.attr("name")===r){var n=$("#custom-field-categories-container");e.insertAfter(n)}else e.insertAfter(t)},submitHandler:function(n){disable_and_submit(t,n,"false",e)}}),window.ST=window.ST||{},ST.newOptionAdded=function(e,t,n,i){function r(){o=a>t,$links=$(i),$links.addClass(o?"enabled":"disabled"),$links.removeClass(o?"disabled":"enabled")}var o,a=e;return r(),$(n).on("click",i,function(e){if(e.preventDefault(),o){var t=$(e.currentTarget),n=t.closest(".custom-field-option-container");n.remove(),ST.customFieldOptionOrder.remove(n.data("field-id")),a-=1,r()}}),{add:function(){a+=1,r()}}}(n,i,"#options",".custom-field-option-remove").add}function initialize_admin_category_form_view(e,t){translate_validation_messages(e);var n=($(t),"category[listing_shapes][][listing_shape_id]"),i={};i[n]={required:!0},$(t).validate({rules:i,errorPlacement:function(e,t){if(t.attr("name")===n){var i=$("#category-listing-shapes-container");e.insertAfter(i)}else e.insertAfter(t)},submitHandler:function(n){disable_and_submit(t,n,"false",e)}})}function initialize_new_community_membership_form(e,t,n){$("#help_invitation_code_link").click(function(e){$("#help_invitation_code").lightbox_me({centered:!0,zIndex:1e6})}),$("#terms_link").click(function(e){e.preventDefault(),$("#terms").lightbox_me({centered:!0,zIndex:1e6})}),$("#new_community_membership").validate({errorPlacement:function(e,t){"community_membership[consent]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)},rules:{"community_membership[email]":{required:!0,email:!0,remote:"/people/check_email_availability_and_validity"},"community_membership[consent]":{required:!0},invitation_code:{required:t,remote:"/people/check_invitation_code"}},messages:{"community_membership[email]":{remote:e},invitation_code:{remote:n}}})}function initialize_braintree_preauthorize_form(e,t){$("#transaction-agreement-read-more").click(function(){$("#transaction-agreement-content").lightbox_me({centered:!0,zIndex:1e6})});var n={errorPlacement:function(e,t){"listing_conversation[contract_agreed]"==t.attr("name")?e.appendTo(t.parent().parent()):e.insertAfter(t)}};validateBraintreeForm(e,t,n)}function initialize_braintree_payment_form(e,t){validateBraintreeForm(e,t)}function validateBraintreeForm(e,t,n){n=n||{},t=t||function(e){e()};var i="#braintree-payment-form",r={rules:{"braintree_payment[cardholder_name]":{required:!0,minlength:2,maxlength:50},"braintree_payment[credit_card_number]":{required:!0,creditcard:!0},"braintree_payment[cvv]":{required:!0,digits:!0,minlength:3,maxlength:4}},submitHandler:function(n){t(function(){disable_and_submit(i,n,"false",e)})}},o=_.defaults(n,r);$(i).validate(o)}function set_textarea_maxlength(){var e=[8,9,13,33,34,35,36,37,38,39,40,46],t="keypress";$("textarea[maxlength]").on(t,function(t){var n=$(this),i=n.attr("maxlength"),r=$.data(this,"keycode");return i&&i>0?n.val().length<i||-1!==$.inArray(r,e):void 0}).on("keydown",function(e){$.data(this,"keycode",e.keyCode||e.which)})}function get_date_from_date_select(){return year=$("#listing_valid_until_1i").val(),month=$("#listing_valid_until_2i").val(),day=$("#listing_valid_until_3i").val(),date=new Date(year,month-1,day,"23","59","58"),date}function get_datetime_from_datetime_select(){return year=$("#listing_valid_until_1i").val(),month=$("#listing_valid_until_2i").val(),day=$("#listing_valid_until_3i").val(),hours=$("#listing_valid_until_4i").val(),minutes=$("#listing_valid_until_5i").val(),date=new Date(year,month-1,day,hours,minutes),date}function enableSamePageScroll(){function e(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")}function t(e){for(var t=0,n=arguments.length;n>t;t++){var i=arguments[t],r=$(i);if(r.scrollTop()>0)return i;r.scrollTop(1);var o=r.scrollTop()>0;if(r.scrollTop(0),o)return i}return[]}var n=e(location.pathname),i=t("html","body");$("a[href*=#]").each(function(){var t=e(this.pathname)||n;if(n==t&&(location.hostname==this.hostname||!this.hostname)&&this.hash.replace(/#/,"")){var r=$(this.hash),o=this.hash;if(o){var a=r.offset().top;$(this).click(function(e){e.preventDefault(),$(i).animate({scrollTop:a},400,function(){location.hash=o})})}}})}function timed_input(e){clearTimeout(timer),invalid_locations(),timer=setTimeout(function(){update_map(e)},1500)}function timed_input_on_route(){clearTimeout(timer),invalid_locations("listing_origin_loc_attributes"),invalid_locations("listing_destination_loc_attributes"),timer=setTimeout(function(){startRoute()},1500)}function googlemapMarkerInit(e,t,n,i,r,o,a){prefix=t,textfield=n,void 0==i&&(i=!1);var s=document.getElementById(prefix+"_latitude"),u=document.getElementById(prefix+"_longitude"),l=!0,c={zoom:12,streetViewControl:!1,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById(e),c),""!=s.value?setMapCenter(s.value,u.value,!0):setMapCenter(r,o,!1),geocoder=new google.maps.Geocoder,""!=s.value?markerPosition=new google.maps.LatLng(s.value,u.value):(markerPosition=defaultCenter,l=!1),marker=new google.maps.Marker({map:map,draggable:i,animation:google.maps.Animation.DROP,position:markerPosition}),infowindow=new google.maps.InfoWindow,void 0!=a&&google.maps.event.addListener(marker,"click",function(){infowindow.close(),infowindow.setContent(a),infowindow.open(map,marker)}),i&&(google.maps.event.addListener(map,"click",function(e){marker.setPosition(e.latLng),marker.setVisible(!0),geocoder.geocode({latLng:e.latLng},update_source)}),google.maps.event.addListener(marker,"dragend",function(){geocoder.geocode({latLng:marker.getPosition()},update_source)})),l||marker.setVisible(!1)}function update_map(e){return geocoder?void geocoder.geocode({address:e.value},function(e,t){t==google.maps.GeocoderStatus.OK?(marker.setVisible(!0),map.setCenter(e[0].geometry.location),marker.setPosition(e[0].geometry.location),update_model_location(e)):(marker.setVisible(!1),nil_locations())}):!1}function update_source(e,t){t==google.maps.GeocoderStatus.OK?(update_model_location(e),source=document.getElementById(textfield),source.value=e[0].formatted_address):(marker.setPosition(new google.maps.LatLng(60.1894,24.8358)),marker.setVisible(!1),nil_locations())}function manually_validate(e){var t=e.split("_"),n="#",i="#";t[0].match("person")?(n+="person_settings_form",i+="person_street_address"):t[0].match("community")?(n+="new_tribe_form",i+="community_address"):t[0].match("listing")&&(n+="new_listing_form",t[1].match("origin")?i+="listing_origin":t[1].match("destination")&&(i+="listing_destination")),$(n).validate().element(i)}function nil_locations(e){e||(e=prefix);var t=document.getElementById(e+"_address"),n=document.getElementById(e+"_latitude"),i=document.getElementById(e+"_longitude"),r=document.getElementById(e+"_google_address");t.value=null,n.value=null,i.value=null,r.value=null,manually_validate(e)}function invalid_locations(e){e||(e=prefix);var t=document.getElementById(e+"_latitude");t.value=null}function update_model_location(e,t){t||(t=prefix);var n=document.getElementById(t+"_address"),i=document.getElementById(t+"_latitude"),r=document.getElementById(t+"_longitude"),o=document.getElementById(t+"_google_address");n.value=e[0].formatted_address,i.value=e[0].geometry.location.lat(),r.value=e[0].geometry.location.lng(),o.value=e[0].formatted_address,manually_validate(t)}function googlemapRouteInit(e){geocoder=new google.maps.Geocoder,directionsService=new google.maps.DirectionsService,defaultCenter=new google.maps.LatLng(60.17,24.94);var t={mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,streetViewControl:!1,mapTypeControl:!1};map=new google.maps.Map(document.getElementById(e),t);var n={animation:google.maps.Animation.DROP};directionsDisplay=new google.maps.DirectionsRenderer({map:map,hideRouteList:!0,preserveViewport:!1,draggable:!1,markerOptions:n}),google.maps.event.addListener(directionsDisplay,"directions_changed",function(){currentDirections||(currentDirections=directionsDisplay.getDirections())})}function startRoute(e,t){var n=document.getElementById("listing_origin").value,i=document.getElementById("listing_destination").value;directionsDisplay.setMap(map),document.getElementById("listing_origin_loc_attributes_address").value=n,document.getElementById("listing_destination_loc_attributes_address").value=i,""!=n&&""!=i?calcRoute(n,i):(removeRoute(),""==n&&""==i&&(setMapCenter(e,t,!0),map.setZoom(12)))}function wrongLocationRoute(e){document.getElementById(e).value="Address not found",document.getElementById(e+"_loc_attributes_address").value=null,document.getElementById(e+"_loc_attributes_google_address").value=null,document.getElementById(e+"_loc_attributes_latitude").value=null,document.getElementById(e+"_loc_attributes_longitude").value=null}function wipeFieldsRoute(e){document.getElementById(e+"_loc_attributes_address").value=null,document.getElementById(e+"_loc_attributes_google_address").value=null,document.getElementById(e+"_loc_attributes_latitude").value=null,document.getElementById(e+"_loc_attributes_longitude").value=null}function removeRoute(){directionsDisplay.setMap(null)}function showRoute(e,t){var n=e,i=t,r={origin:n,destination:i,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC};directionsService.route(r,function(e,t){t==google.maps.DirectionsStatus.OK&&directionsDisplay.setDirections(e)})}function route_not_found(e,t){e?geocoder.geocode({address:e},function(e,t){t!=google.maps.GeocoderStatus.OK?(nil_locations("listing_origin_loc_attributes"),removeRoute()):update_model_location(e,"listing_origin_loc_attributes")}):nil_locations("listing_origin_loc_attributes"),t?geocoder.geocode({address:t},function(e,t){t!=google.maps.GeocoderStatus.OK?(nil_locations("listing_destination_loc_attributes"),removeRoute()):(update_model_location(e,"listing_destination_loc_attributes"),calcRoute(foo,bar))}):nil_locations("listing_destination_loc_attributes")}function calcRoute(e,t){var n=e,i=t;if(e.match(t))removeRoute();else{var r={origin:n,destination:i,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.DirectionsUnitSystem.METRIC};directionsService.route(r,function(n,i){i==google.maps.DirectionsStatus.OK?(directionsDisplay.setDirections(n),updateEditTextBoxes()):(removeRoute(),route_not_found(e,t))})}}function updateEditTextBoxes(){var e=directionsDisplay.getDirections().routes[0].legs[0].start_address,t=directionsDisplay.getDirections().routes[0].legs[0].end_address;document.getElementById("listing_origin_loc_attributes_google_address").value=e,document.getElementById("listing_destination_loc_attributes_google_address").value=t,document.getElementById("listing_origin_loc_attributes_latitude").value=directionsDisplay.getDirections().routes[0].legs[0].start_location.lat(),document.getElementById("listing_origin_loc_attributes_longitude").value=directionsDisplay.getDirections().routes[0].legs[0].start_location.lng(),document.getElementById("listing_destination_loc_attributes_latitude").value=directionsDisplay.getDirections().routes[0].legs[0].end_location.lat(),document.getElementById("listing_destination_loc_attributes_longitude").value=directionsDisplay.getDirections().routes[0].legs[0].end_location.lng(),manually_validate("listing_destination"),
manually_validate("listing_origin")}function addCommunityMarkers(){markerContents=[],markers=[];var e="/en/tribes";$.getJSON(e,{dataType:"json"},function(e){var t=e.data;for(i in t)!function(){var e=t[i];if(markerContents[i]=e.id,e.latitude){var n;n=new google.maps.LatLng(e.latitude,e.longitude);var r=new google.maps.Marker({position:n,title:e.name,map:map,icon:"/assets/dashboard/map_icons/tribe.png"});markers.push(r),markersArr.push(r);i;google.maps.event.addListener(r,"click",function(){infowindow.close(),showingMarker==r.getTitle()?showingMarker="":(showingMarker=r.getTitle(),infowindow.setContent("<div id='map_bubble'><div style='text-align: center; width: 360px; height: 70px; padding-top: 25px;'><img src='https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif'></div></div>"),infowindow.open(map,r),$.get("/en/tribes/"+e.id,function(e){$("#map_bubble").html(e)}))}),google.maps.event.addListener(infowindow,"closeclick",function(){showingMarker=""})}}()})}function initialize_listing_map(e,t,n,i,r,o){locale=r,infowindow=new InfoBubble({shadowStyle:0,borderRadius:5,borderWidth:1,arrowPosition:30,arrowStyle:0,padding:0,maxHeight:150,maxWidth:200,hideCloseButton:!0}),$(window).width()>=768?(infowindow.setMinHeight(235),infowindow.setMinWidth(425)):(infowindow.setMinHeight(150),infowindow.setMinWidth(225)),directionsService=new google.maps.DirectionsService,directionsDisplay=new google.maps.DirectionsRenderer,directionsDisplay.setOptions({suppressMarkers:!0}),helsinki=new google.maps.LatLng(60.17,24.94),flagMarker=new google.maps.Marker;var a={zoom:16,maxZoom:17,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(document.getElementById("map-canvas"),a);addListingMarkers(e,i)}function setMapCenter(e,t,n){function i(){o?map.setCenter(new google.maps.LatLng(e,t)):map.setCenter(new google.maps.LatLng(0,0))}function r(e){map.setCenter(new google.maps.LatLng(e.coords.latitude,e.coords.longitude))}var o=e&&t,a=o&&n;a?map.setCenter(new google.maps.LatLng(e,t)):navigator.geolocation?navigator.geolocation.getCurrentPosition(r,i):i()}function addListingMarkers(e,t){markerContents=[],markers=[];for(i in e)!function(){var t=e[i];if(t.latitude){var n;n=new google.maps.LatLng(t.latitude,t.longitude);var r=new google.maps.Marker({position:n,title:t.title}),o=new Label({map:map});o.set("zIndex",1234),o.bindTo("position",r,"position"),o.set("text",""),o.set("color","#FFF"),r.set("label",o),markers.push(r),markerContents.push(t.id),markersArr.push(r);i;google.maps.event.addListener(map,"mousedown",function(){infowindow.close(),showingMarker=""}),google.maps.event.addListener(r,"click",function(){infowindow.close(),directionsDisplay.setMap(null),flagMarker.setOptions({map:null}),showingMarker==r.getTitle()?showingMarker="":(showingMarker=r.getTitle(),infowindow.setContent("<div id='map_bubble'><img class='bubble-loader-gif' src='https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif'></div>"),infowindow.setMaxHeight(150),infowindow.setMinHeight(150),infowindow.open(map,r),$.ajax({url:"/"+locale+"/listing_bubble/"+t.id,dataType:"html",success:function(e){$("#map_bubble").html(e)}}))})}}();var n=_(e).pluck("latitude").filter().map(Number).value(),r=_(e).pluck("longitude").filter().map(Number).value();if(t&&t.boundingbox){var o=t.boundingbox;setBounds(o)}else if(t&&t.center){var a=t.center,s=new google.maps.LatLng(a[0],a[1]);map.setCenter(s)}else{var u=n.length&&r.length?{sw:[_.min(n),_.min(r)],ne:[_.max(n),_.max(r)]}:nil;setBounds(u)}markerCluster=new MarkerClusterer(map,markers,markerContents,infowindow,showingMarker,locale,{})}function setBounds(e){var t=new google.maps.LatLngBounds(new google.maps.LatLng(e.sw[0],e.sw[1]),new google.maps.LatLng(e.ne[0],e.ne[1]));map.fitBounds(t)}function clearMarkers(){if(markersArr)for(i in markersArr)markersArr[i].setMap(null);if(directionsDisplay.setMap(null),flagMarker.setOptions({map:null}),markerCluster&&(markerCluster.resetViewport(!0),markerCluster.clearMarkers(),delete markerCluster,markerCluster=null),markers)for(n in markers)markers[n].setMap(null)}function Label(e){this.setValues(e);var t=this.span_=document.createElement("span");t.style.cssText="position: relative; left: -50%; top: -10px; white-space: nowrap;padding: 2px;font-family: Arial; font-weight: bold;font-size: 12px;";var n=this.div_=document.createElement("div");n.appendChild(t),n.style.cssText="position: absolute; display: none"}function initialize_labels(){Label.prototype=new google.maps.OverlayView,Label.prototype.onAdd=function(){var e=this.getPanes().overlayImage;e.appendChild(this.div_);var t=this;this.listeners_=[google.maps.event.addListener(this,"position_changed",function(){t.draw()}),google.maps.event.addListener(this,"text_changed",function(){t.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){t.draw()})]},Label.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_);for(var e=0,t=this.listeners_.length;t>e;++e)google.maps.event.removeListener(this.listeners_[e])},Label.prototype.draw=function(){var e=this.getProjection(),t=e.fromLatLngToDivPixel(this.get("position")),n=this.div_;n.style.left=t.x+"px",n.style.top=t.y-40+"px",n.style.display="block",n.style.zIndex=this.get("zIndex"),this.span_.style.cssText+="color:#"+this.get("color").toString(),this.span_.innerHTML=this.get("text").toString()}}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=re.type(e);return"function"===n||re.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function i(e,t,n){if(re.isFunction(t))return re.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return re.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(pe.test(t))return re.filter(t,e,n);t=re.filter(t,e)}return re.grep(e,function(e){return re.inArray(e,t)>=0!==n})}function r(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function o(e){var t=_e[e]={};return re.each(e.match(be)||[],function(e,n){t[n]=!0}),t}function a(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(he.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(a(),re.ready())}function u(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(ke,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Se.test(n)?re.parseJSON(n):n}catch(r){}re.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if(("data"!==t||!re.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,i){if(re.acceptData(e)){var r,o,a=re.expando,s=e.nodeType,u=s?re.cache:e,l=s?e[a]:e[a]&&a;if(l&&u[l]&&(i||u[l].data)||void 0!==n||"string"!=typeof t)return l||(l=s?e[a]=Y.pop()||re.guid++:a),u[l]||(u[l]=s?{}:{toJSON:re.noop}),("object"==typeof t||"function"==typeof t)&&(i?u[l]=re.extend(u[l],t):u[l].data=re.extend(u[l].data,t)),o=u[l],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[re.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[re.camelCase(t)])):r=o,r}}function d(e,t,n){if(re.acceptData(e)){var i,r,o=e.nodeType,a=o?re.cache:e,s=o?e[re.expando]:re.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){re.isArray(t)?t=t.concat(re.map(t,re.camelCase)):t in i?t=[t]:(t=re.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!l(i):!re.isEmptyObject(i))return}(n||(delete a[s].data,l(a[s])))&&(o?re.cleanData([e],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function p(){return!0}function f(){return!1}function h(){try{return he.activeElement}catch(e){}}function m(e){var t=Be.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,i,r=0,o=typeof e.getElementsByTagName!==Ce?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Ce?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||re.nodeName(i,t)?o.push(i):re.merge(o,g(i,t));return void 0===t||t&&re.nodeName(e,t)?re.merge([e],o):o}function v(e){Fe.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return re.nodeName(e,"table")&&re.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==re.find.attr(e,"type"))+"/"+e.type,e}function _(e){var t=Xe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,i=0;null!=(n=e[i]);i++)re._data(n,"globalEval",!t||re._data(t[i],"globalEval"))}function x(e,t){if(1===t.nodeType&&re.hasData(e)){var n,i,r,o=re._data(e),a=re._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)re.event.add(t,n,s[n][i])}a.data&&(a.data=re.extend({},a.data))}}function C(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[re.expando]){r=re._data(t);for(i in r.events)re.removeEvent(t,i,r.handle);t.removeAttribute(re.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,_(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!re.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Fe.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var i,r=re(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(i=e.getDefaultComputedStyle(r[0]))?i.display:re.css(r[0],"display");return r.detach(),o}function k(e){var t=he,n=Je[e];return n||(n=S(e,t),"none"!==n&&n||(Ze=(Ze||re("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Ze[0].contentWindow||Ze[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Ze.detach()),Je[e]=n),n}function T(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,r=pt.length;r--;)if(t=pt[r]+n,t in e)return t;return i}function D(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=re._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&De(i)&&(o[a]=re._data(i,"olddisplay",k(i.nodeName)))):(r=De(i),(n&&"none"!==n||!r)&&re._data(i,"olddisplay",r?n:re.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function I(e,t,n){var i=ut.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function F(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=re.css(e,n+Ee[o],!0,r)),i?("content"===n&&(a-=re.css(e,"padding"+Ee[o],!0,r)),"margin"!==n&&(a-=re.css(e,"border"+Ee[o]+"Width",!0,r))):(a+=re.css(e,"padding"+Ee[o],!0,r),"padding"!==n&&(a+=re.css(e,"border"+Ee[o]+"Width",!0,r)));return a}function $(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),a=ne.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=tt(e,t,o),(0>r||null==r)&&(r=e.style[t]),it.test(r))return r;i=a&&(ne.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+F(e,t,n||(a?"border":"content"),i,o)+"px"}function j(e,t,n,i,r){return new j.prototype.init(e,t,n,i,r)}function A(){return setTimeout(function(){ft=void 0}),ft=re.now()}function M(e,t){var n,i={height:e},r=0;for(t=t?1:0;4>r;r+=2-t)n=Ee[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function O(e,t,n){for(var i,r=(bt[t]||[]).concat(bt["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function B(e,t,n){var i,r,o,a,s,u,l,c,d=this,p={},f=e.style,h=e.nodeType&&De(e),m=re._data(e,"fxshow");n.queue||(s=re._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,re.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],l=re.css(e,"display"),c="none"===l?re._data(e,"olddisplay")||k(e.nodeName):l,"inline"===c&&"none"===re.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==k(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ne.shrinkWrapBlocks()||d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],mt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;h=!0}p[i]=m&&m[i]||re.style(e,i)}else l=void 0;if(re.isEmptyObject(p))"inline"===("none"===l?k(e.nodeName):l)&&(f.display=l);else{m?"hidden"in m&&(h=m.hidden):m=re._data(e,"fxshow",{}),o&&(m.hidden=!h),h?re(e).show():d.done(function(){re(e).hide()}),d.done(function(){var t;re._removeData(e,"fxshow");for(t in p)re.style(e,t,p[t])});for(i in p)a=O(h?m[i]:0,i,d),i in m||(m[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function P(e,t){var n,i,r,o,a;for(n in e)if(i=re.camelCase(n),r=t[i],o=e[n],re.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=re.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function N(e,t,n){var i,r,o=0,a=yt.length,s=re.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=ft||A(),n=Math.max(0,l.startTime+l.duration-t),i=n/l.duration||0,o=1-i,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:re.extend({},t),opts:re.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ft||A(),duration:n.duration,tweens:[],createTween:function(t,n){var i=re.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var n=0,i=t?l.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(P(c,l.opts.specialEasing);a>o;o++)if(i=yt[o].call(l,e,c,l.opts))return i;return re.map(c,O,l),re.isFunction(l.opts.start)&&l.opts.start.call(e,l),re.fx.timer(re.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function L(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(be)||[];if(re.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function z(e,t,n,i){function r(s){var u;return o[s]=!0,re.each(e[s]||[],function(e,s){var l=s(t,n,i);return"string"!=typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),r(l),!1)}),u}var o={},a=e===Ht;return r(t.dataTypes[0])||!o["*"]&&r("*")}function R(e,t){var n,i,r=re.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&re.extend(!0,e,n),e}function q(e,t,n){for(var i,r,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==u[0]&&u.unshift(o),n[o]):void 0}function H(e,t,n,i){var r,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=l[u+" "+o]||l["* "+o],!a)for(r in l)if(s=r.split(" "),s[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){a===!0?a=l[r]:l[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(d){return{state:"parsererror",error:a?d:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function W(e,t,n,i){var r;if(re.isArray(t))re.each(t,function(t,r){n||Xt.test(e)?i(e,r):W(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==re.type(t))i(e,t);else for(r in t)W(e+"["+r+"]",t[r],n,i)}function U(){try{return new e.XMLHttpRequest}catch(t){}}function V(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function X(e){return re.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var Y=[],Q=Y.slice,G=Y.concat,K=Y.push,Z=Y.indexOf,J={},ee=J.toString,te=J.hasOwnProperty,ne={},ie="1.11.1",re=function(e,t){return new re.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};re.fn=re.prototype={jquery:ie,constructor:re,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=re.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return re.each(this,e,t)},map:function(e){return this.pushStack(re.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:Y.sort,splice:Y.splice},re.extend=re.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||re.isFunction(a)||(a={}),s===u&&(a=this,s--);u>s;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],n=r[i],a!==n&&(l&&n&&(re.isPlainObject(n)||(t=re.isArray(n)))?(t?(t=!1,o=e&&re.isArray(e)?e:[]):o=e&&re.isPlainObject(e)?e:{},a[i]=re.extend(l,o,n)):void 0!==n&&(a[i]=n));return a},re.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===re.type(e)},isArray:Array.isArray||function(e){return"array"===re.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!re.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==re.type(e)||e.nodeType||re.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?J[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&re.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,i){var r,o=0,a=e.length,s=n(e);if(i){if(s)for(;a>o&&(r=t.apply(e[o],i),r!==!1);o++);else for(o in e)if(r=t.apply(e[o],i),r===!1)break}else if(s)for(;a>o&&(r=t.call(e[o],o,e[o]),r!==!1);o++);else for(o in e)if(r=t.call(e[o],o,e[o]),r===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?re.merge(i,"string"==typeof e?[e]:e):K.call(i,e)),i},inArray:function(e,t,n){var i;if(t){if(Z)return Z.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o=0,a=e.length,s=n(e),u=[];if(s)for(;a>o;o++)r=t(e[o],o,i),null!=r&&u.push(r);else for(o in e)r=t(e[o],o,i),null!=r&&u.push(r);return G.apply([],u)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(r=e[t],t=e,e=r),re.isFunction(e)?(n=Q.call(arguments,2),i=function(){return e.apply(t||this,n.concat(Q.call(arguments)))},i.guid=e.guid=e.guid||re.guid++,i):void 0},now:function(){return+new Date},support:ne}),re.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){J["[object "+t+"]"]=t.toLowerCase()});var le=function(e){function t(e,t,n,i){var r,o,a,s,u,l,d,f,h,m;if((t?t.ownerDocument||t:z)!==j&&$(t),t=t||j,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(M&&!i){if(r=ye.exec(e))if(a=r[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&N(t,o)&&o.id===a)return n.push(o),n}else{if(r[2])return J.apply(n,t.getElementsByTagName(e)),n;if((a=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!O||!O.test(e))){if(f=d=L,h=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=k(e),(d=t.getAttribute("id"))?f=d.replace(_e,"\\$&"):t.setAttribute("id",f),f="[id='"+f+"'] ",u=l.length;u--;)l[u]=f+p(l[u]);h=be.test(e)&&c(t.parentNode)||t,m=l.join(",")}if(m)try{return J.apply(n,h.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return E(e.replace(ue,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[L]=!0,e}function r(e){var t=j.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||Y)-(~e.sourceIndex||Y);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function l(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&typeof e.getElementsByTagName!==X&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=q++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,u,l=[R,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[L]||(t[L]={}),(s=u[i])&&s[0]===R&&s[1]===o)return l[2]=s[2];if(u[i]=l,l[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,i,r))&&(a.push(o),l&&t.push(s));return a}function v(e,t,n,r,o,a){return r&&!r[L]&&(r=v(r)),o&&!o[L]&&(o=v(o,a)),i(function(i,a,s,u){var l,c,d,p=[],f=[],h=a.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,p,e,s,u),b=n?o||(i?e:h||r)?[]:a:y;if(n&&n(y,b,s,u),r)for(l=g(b,f),r(l,[],s,u),c=l.length;c--;)(d=l[c])&&(b[f[c]]=!(y[f[c]]=d));if(i){if(o||e){if(o){for(l=[],c=b.length;c--;)(d=b[c])&&l.push(y[c]=d);o(null,b=[],l,u)}for(c=b.length;c--;)(d=b[c])&&(l=o?te.call(i,d):p[c])>-1&&(i[l]=!(a[l]=d))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,u):J.apply(a,b)})}function y(e){for(var t,n,i,r=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,u=f(function(e){return e===t},a,!0),l=f(function(e){return te.call(t,e)>-1},a,!0),c=[function(e,n,i){return!o&&(i||n!==D)||((t=n).nodeType?u(e,n,i):l(e,n,i))}];r>s;s++)if(n=x.relative[e[s].type])c=[f(h(c),n)];else{if(n=x.filter[e[s].type].apply(null,e[s].matches),n[L]){for(i=++s;r>i&&!x.relative[e[i].type];i++);return v(s>1&&h(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ue,"$1"),n,i>s&&y(e.slice(s,i)),r>i&&y(e=e.slice(i)),r>i&&p(e))}c.push(n)}return h(c)}function b(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,u,l){var c,d,p,f=0,h="0",m=i&&[],v=[],y=D,b=i||o&&x.find.TAG("*",l),_=R+=null==y?1:Math.random()||.1,w=b.length;for(l&&(D=a!==j&&a);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(d=0;p=e[d++];)if(p(c,a,s)){u.push(c);break}l&&(R=_)}r&&((c=!p&&c)&&f--,i&&m.push(c))}if(f+=h,r&&h!==f){for(d=0;p=n[d++];)p(m,v,a,s);if(i){if(f>0)for(;h--;)m[h]||v[h]||(v[h]=K.call(u));v=g(v)}J.apply(u,v),l&&!i&&v.length>0&&f+n.length>1&&t.uniqueSort(u)}return l&&(R=_,D=y),m};return r?i(a):a}var _,w,x,C,S,k,T,E,D,I,F,$,j,A,M,O,B,P,N,L="sizzle"+-new Date,z=e.document,R=0,q=0,H=n(),W=n(),U=n(),V=function(e,t){return e===t&&(F=!0),0},X="undefined",Y=1<<31,Q={}.hasOwnProperty,G=[],K=G.pop,Z=G.push,J=G.push,ee=G.slice,te=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+ie+"*("+re+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",se=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ue=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),de=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),pe=new RegExp(se),fe=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,_e=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{J.apply(G=ee.call(z.childNodes),z.childNodes),G[z.childNodes.length].nodeType}catch(Ce){J={apply:G.length?function(e,t){Z.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},$=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:z,i=n.defaultView;return n!==j&&9===n.nodeType&&n.documentElement?(j=n,A=n.documentElement,M=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){$()},!1):i.attachEvent&&i.attachEvent("onunload",function(){$()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return A.appendChild(e).id=L,!n.getElementsByName||!n.getElementsByName(L).length}),w.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==X&&M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(we,xe);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(we,xe);return function(e){var n=typeof e.getAttributeNode!==X&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==X?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},x.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==X&&M?t.getElementsByClassName(e):void 0},B=[],O=[],(w.qsa=ve.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&O.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||O.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||O.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&O.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||O.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),O.push(",.*:")})),(w.matchesSelector=ve.test(P=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&r(function(e){w.disconnectedMatch=P.call(e,"div"),P.call(e,"[s!='']:x"),B.push("!=",se)}),O=O.length&&new RegExp(O.join("|")),B=B.length&&new RegExp(B.join("|")),t=ve.test(A.compareDocumentPosition),N=t||ve.test(A.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return F=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===z&&N(z,e)?-1:t===n||t.ownerDocument===z&&N(z,t)?1:I?te.call(I,e)-te.call(I,t):0:4&i?-1:1)}:function(e,t){if(e===t)return F=!0,0;var i,r=0,o=e.parentNode,s=t.parentNode,u=[e],l=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:I?te.call(I,e)-te.call(I,t):0;if(o===s)return a(e,t);for(i=e;i=i.parentNode;)u.unshift(i);for(i=t;i=i.parentNode;)l.unshift(i);for(;u[r]===l[r];)r++;return r?a(u[r],l[r]):u[r]===z?-1:l[r]===z?1:0},n):j},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==j&&$(e),n=n.replace(de,"='$1']"),w.matchesSelector&&M&&(!B||!B.test(n))&&(!O||!O.test(n)))try{var i=P.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,j,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==j&&$(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==j&&$(e);var n=x.attrHandle[t.toLowerCase()],i=n&&Q.call(x.attrHandle,t.toLowerCase())?n(e,t,!M):void 0;return void 0!==i?i:w.attributes||!M?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(F=!w.detectDuplicates,I=!w.sortStable&&e.slice(0),e.sort(V),F){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return I=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(we,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pe.test(n)&&(t=k(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),
e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=H[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&H(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==X&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(c=g[L]||(g[L]={}),l=c[e]||[],f=l[0]===R&&l[1],p=l[0]===R&&l[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(p=f=0)||h.pop();)if(1===d.nodeType&&++p&&d===t){c[e]=[R,f,p];break}}else if(y&&(l=(t[L]||(t[L]={}))[e])&&l[0]===R)p=l[1];else for(;(d=++f&&d&&d[m]||(p=f=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(y&&((d[L]||(d[L]={}))[e]=[R,p]),d!==t)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,n){var r,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[L]?o(n):o.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=te.call(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=T(e.replace(ue,"$1"));return r[L]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return fe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,xe).toLowerCase(),function(t){var n;do if(n=M?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===j.activeElement&&(!j.hasFocus||j.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:l(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=u(_);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,k=t.tokenize=function(e,n){var i,r,o,a,s,u,l,c=W[e+" "];if(c)return n?0:c.slice(0);for(s=e,u=[],l=x.preFilter;s;){(!i||(r=le.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),i=!1,(r=ce.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(ue," ")}),s=s.slice(i.length));for(a in x.filter)!(r=he[a].exec(s))||l[a]&&!(r=l[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):W(e,u).slice(0)},T=t.compile=function(e,t){var n,i=[],r=[],o=U[e+" "];if(!o){for(t||(t=k(e)),n=t.length;n--;)o=y(t[n]),o[L]?i.push(o):r.push(o);o=U(e,b(r,i)),o.selector=e}return o},E=t.select=function(e,t,n,i){var r,o,a,s,u,l="function"==typeof e&&e,d=!i&&k(e=l.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&M&&x.relative[o[1].type]){if(t=(x.find.ID(a.matches[0].replace(we,xe),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=he.needsContext.test(e)?0:o.length;r--&&(a=o[r],!x.relative[s=a.type]);)if((u=x.find[s])&&(i=u(a.matches[0].replace(we,xe),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return J.apply(n,i),n;break}}return(l||T(e,d))(i,t,!M,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=L.split("").sort(V).join("")===L,w.detectDuplicates=!!F,$(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(j.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(ne,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);re.find=le,re.expr=le.selectors,re.expr[":"]=re.expr.pseudos,re.unique=le.uniqueSort,re.text=le.getText,re.isXMLDoc=le.isXML,re.contains=le.contains;var ce=re.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;re.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?re.find.matchesSelector(i,e)?[i]:[]:re.find.matches(e,re.grep(t,function(e){return 1===e.nodeType}))},re.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(re(e).filter(function(){for(t=0;r>t;t++)if(re.contains(i[t],this))return!0}));for(t=0;r>t;t++)re.find(e,i[t],n);return n=this.pushStack(r>1?re.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&ce.test(e)?re(e):e||[],!1).length}});var fe,he=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ge=re.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||fe).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof re?t[0]:t,re.merge(this,re.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),de.test(n[1])&&re.isPlainObject(t))for(n in t)re.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(i=he.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return fe.find(e);this.length=1,this[0]=i}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):re.isFunction(e)?"undefined"!=typeof fe.ready?fe.ready(e):e(re):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),re.makeArray(e,this))};ge.prototype=re.fn,fe=re(he);var ve=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};re.extend({dir:function(e,t,n){for(var i=[],r=e[t];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!re(r).is(n));)1===r.nodeType&&i.push(r),r=r[t];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),re.fn.extend({has:function(e){var t,n=re(e,this),i=n.length;return this.filter(function(){for(t=0;i>t;t++)if(re.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=ce.test(e)||"string"!=typeof e?re(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&re.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?re.unique(o):o)},index:function(e){return e?"string"==typeof e?re.inArray(this[0],re(e)):re.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(re.unique(re.merge(this.get(),re(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),re.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return re.dir(e,"parentNode")},parentsUntil:function(e,t,n){return re.dir(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return re.dir(e,"nextSibling")},prevAll:function(e){return re.dir(e,"previousSibling")},nextUntil:function(e,t,n){return re.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return re.dir(e,"previousSibling",n)},siblings:function(e){return re.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return re.sibling(e.firstChild)},contents:function(e){return re.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:re.merge([],e.childNodes)}},function(e,t){re.fn[e]=function(n,i){var r=re.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=re.filter(i,r)),this.length>1&&(ye[e]||(r=re.unique(r)),ve.test(e)&&(r=r.reverse())),this.pushStack(r)}});var be=/\S+/g,_e={};re.Callbacks=function(e){e="string"==typeof e?_e[e]||o(e):re.extend({},e);var t,n,i,r,a,s,u=[],l=!e.once&&[],c=function(o){for(n=e.memory&&o,i=!0,a=s||0,s=0,r=u.length,t=!0;u&&r>a;a++)if(u[a].apply(o[0],o[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(l?l.length&&c(l.shift()):n?u=[]:d.disable())},d={add:function(){if(u){var i=u.length;!function o(t){re.each(t,function(t,n){var i=re.type(n);"function"===i?e.unique&&d.has(n)||u.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),t?r=u.length:n&&(s=i,c(n))}return this},remove:function(){return u&&re.each(arguments,function(e,n){for(var i;(i=re.inArray(n,u,i))>-1;)u.splice(i,1),t&&(r>=i&&r--,a>=i&&a--)}),this},has:function(e){return e?re.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],r=0,this},disable:function(){return u=l=n=void 0,this},disabled:function(){return!u},lock:function(){return l=void 0,n||d.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!u||i&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},re.extend({Deferred:function(e){var t=[["resolve","done",re.Callbacks("once memory"),"resolved"],["reject","fail",re.Callbacks("once memory"),"rejected"],["notify","progress",re.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return re.Deferred(function(n){re.each(t,function(t,o){var a=re.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&re.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?re.extend(e,i):i}},r={};return i.pipe=i.then,re.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=Q.call(arguments),a=o.length,s=1!==a||e&&re.isFunction(e.promise)?a:0,u=1===s?e:re.Deferred(),l=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):r,i===t?u.notifyWith(n,i):--s||u.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&re.isFunction(o[r].promise)?o[r].promise().done(l(r,i,o)).fail(u.reject).progress(l(r,n,t)):--s;return s||u.resolveWith(i,o),u.promise()}});var we;re.fn.ready=function(e){return re.ready.promise().done(e),this},re.extend({isReady:!1,readyWait:1,holdReady:function(e){e?re.readyWait++:re.ready(!0)},ready:function(e){if(e===!0?!--re.readyWait:!re.isReady){if(!he.body)return setTimeout(re.ready);re.isReady=!0,e!==!0&&--re.readyWait>0||(we.resolveWith(he,[re]),re.fn.triggerHandler&&(re(he).triggerHandler("ready"),re(he).off("ready")))}}}),re.ready.promise=function(t){if(!we)if(we=re.Deferred(),"complete"===he.readyState)setTimeout(re.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{he.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!re.isReady){try{n.doScroll("left")}catch(e){return setTimeout(r,50)}a(),re.ready()}}()}return we.promise(t)};var xe,Ce="undefined";for(xe in re(ne))break;ne.ownLast="0"!==xe,ne.inlineBlockNeedsLayout=!1,re(function(){var e,t,n,i;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ce&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(t){ne.deleteExpando=!1}}e=null}(),re.acceptData=function(e){var t=re.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute("classid")===t};var Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ke=/([A-Z])/g;re.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?re.cache[e[re.expando]]:e[re.expando],!!e&&!l(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),re.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=re.data(o),1===o.nodeType&&!re._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=re.camelCase(i.slice(5)),u(o,i,r[i])));re._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){re.data(this,e)}):arguments.length>1?this.each(function(){re.data(this,e,t)}):o?u(o,e,re.data(o,e)):void 0},removeData:function(e){return this.each(function(){re.removeData(this,e)})}}),re.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=re._data(e,t),n&&(!i||re.isArray(n)?i=re._data(e,t,re.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=re.queue(e,t),i=n.length,r=n.shift(),o=re._queueHooks(e,t),a=function(){re.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return re._data(e,n)||re._data(e,n,{empty:re.Callbacks("once memory").add(function(){re._removeData(e,t+"queue"),re._removeData(e,n)})})}}),re.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?re.queue(this[0],e):void 0===t?this:this.each(function(){var n=re.queue(this,e,t);re._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&re.dequeue(this,e)})},dequeue:function(e){return this.each(function(){re.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=re.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=re._data(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ee=["Top","Right","Bottom","Left"],De=function(e,t){return e=t||e,"none"===re.css(e,"display")||!re.contains(e.ownerDocument,e)},Ie=re.access=function(e,t,n,i,r,o,a){var s=0,u=e.length,l=null==n;if("object"===re.type(n)){r=!0;for(s in n)re.access(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,re.isFunction(i)||(a=!0),l&&(a?(t.call(e,i),t=null):(l=t,t=function(e,t,n){return l.call(re(e),n)})),t))for(;u>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:l?t.call(e):u?t(e[0],n):o},Fe=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(i){ne.deleteExpando=!1}}}(),function(){var t,n,i=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(i.setAttribute(n,"t"),ne[t+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var $e=/^(?:input|select|textarea)$/i,je=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Oe=/^([^.]*)(?:\.(.+)|)$/;re.event={global:{},add:function(e,t,n,i,r){var o,a,s,u,l,c,d,p,f,h,m,g=re._data(e);if(g){for(n.handler&&(u=n,n=u.handler,r=u.selector),n.guid||(n.guid=re.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof re===Ce||e&&re.event.triggered===e.type?void 0:re.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(be)||[""],s=t.length;s--;)o=Oe.exec(t[s])||[],f=m=o[1],h=(o[2]||"").split(".").sort(),f&&(l=re.event.special[f]||{},f=(r?l.delegateType:l.bindType)||f,l=re.event.special[f]||{},d=re.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&re.expr.match.needsContext.test(r),namespace:h.join(".")},u),(p=a[f])||(p=a[f]=[],p.delegateCount=0,l.setup&&l.setup.call(e,i,h,c)!==!1||(e.addEventListener?e.addEventListener(f,c,!1):e.attachEvent&&e.attachEvent("on"+f,c))),l.add&&(l.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,d):p.push(d),re.event.global[f]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,u,l,c,d,p,f,h,m,g=re.hasData(e)&&re._data(e);if(g&&(c=g.events)){for(t=(t||"").match(be)||[""],l=t.length;l--;)if(s=Oe.exec(t[l])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=re.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=c[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=p.length;o--;)a=p[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(p.splice(o,1),a.selector&&p.delegateCount--,d.remove&&d.remove.call(e,a));u&&!p.length&&(d.teardown&&d.teardown.call(e,h,g.handle)!==!1||re.removeEvent(e,f,g.handle),delete c[f])}else for(f in c)re.event.remove(e,f+t[l],n,i,!0);re.isEmptyObject(c)&&(delete g.handle,re._removeData(e,"events"))}},trigger:function(t,n,i,r){var o,a,s,u,l,c,d,p=[i||he],f=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=c=i=i||he,3!==i.nodeType&&8!==i.nodeType&&!Me.test(f+re.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),a=f.indexOf(":")<0&&"on"+f,t=t[re.expando]?t:new re.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:re.makeArray(n,[t]),l=re.event.special[f]||{},r||!l.trigger||l.trigger.apply(i,n)!==!1)){if(!r&&!l.noBubble&&!re.isWindow(i)){for(u=l.delegateType||f,Me.test(u+f)||(s=s.parentNode);s;s=s.parentNode)p.push(s),c=s;c===(i.ownerDocument||he)&&p.push(c.defaultView||c.parentWindow||e)}for(d=0;(s=p[d++])&&!t.isPropagationStopped();)t.type=d>1?u:l.bindType||f,o=(re._data(s,"events")||{})[t.type]&&re._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&re.acceptData(s)&&(t.result=o.apply(s,n),t.result===!1&&t.preventDefault());if(t.type=f,!r&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),n)===!1)&&re.acceptData(i)&&a&&i[f]&&!re.isWindow(i)){c=i[a],c&&(i[a]=null),re.event.triggered=f;try{i[f]()}catch(m){}re.event.triggered=void 0,c&&(i[a]=c)}return t.result}},dispatch:function(e){e=re.event.fix(e);var t,n,i,r,o,a=[],s=Q.call(arguments),u=(re._data(this,"events")||{})[e.type]||[],l=re.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(a=re.event.handlers.call(this,e,u),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,n=((re.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&(!e.button||"click"!==e.type))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(r=[],o=0;s>o;o++)i=t[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?re(n,this).index(u)>=0:re.find(n,this,null,[u]).length),r[n]&&r.push(i);r.length&&a.push({elem:u,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[re.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ae.test(r)?this.mouseHooks:je.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new re.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||he,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return re.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return re.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=re.extend(new re.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?re.event.trigger(r,null,t):re.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},re.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var i="on"+t;e.detachEvent&&(typeof e[i]===Ce&&(e[i]=null),e.detachEvent(i,n))},re.Event=function(e,t){return this instanceof re.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:f):this.type=e,t&&re.extend(this,t),this.timeStamp=e&&e.timeStamp||re.now(),void(this[re.expando]=!0)):new re.Event(e,t)},re.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},re.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){re.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return(!r||r!==i&&!re.contains(i,r))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(re.event.special.submit={setup:function(){return re.nodeName(this,"form")?!1:void re.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=re.nodeName(t,"input")||re.nodeName(t,"button")?t.form:void 0;n&&!re._data(n,"submitBubbles")&&(re.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),re._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&re.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return re.nodeName(this,"form")?!1:void re.event.remove(this,"._submit")}}),ne.changeBubbles||(re.event.special.change={setup:function(){return $e.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(re.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),re.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),re.event.simulate("change",this,e,!0)})),!1):void re.event.add(this,"beforeactivate._change",function(e){var t=e.target;$e.test(t.nodeName)&&!re._data(t,"changeBubbles")&&(re.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||re.event.simulate("change",this.parentNode,e,!0)}),re._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return re.event.remove(this,"._change"),!$e.test(this.nodeName)}}),ne.focusinBubbles||re.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){re.event.simulate(t,e.target,re.event.fix(e),!0)};re.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=re._data(i,t);r||i.addEventListener(e,n,!0),re._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=re._data(i,t)-1;r?re._data(i,t,r):(i.removeEventListener(e,n,!0),re._removeData(i,t))}}}),re.fn.extend({on:function(e,t,n,i,r){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=f;else if(!i)return this;return 1===r&&(a=i,i=function(e){return re().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=re.guid++)),this.each(function(){re.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,re(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=f),this.each(function(){re.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){re.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?re.event.trigger(e,t,n,!0):void 0}});var Be="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Pe=/ jQuery\d+="(?:null|\d+)"/g,Ne=new RegExp("<(?:"+Be+")[\\s/>]","i"),Le=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Re=/<([\w:]+)/,qe=/<tbody/i,He=/<|&#?\w+;/,We=/<(?:script|style|link)/i,Ue=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,Ye=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ge=m(he),Ke=Ge.appendChild(he.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,re.extend({clone:function(e,t,n){var i,r,o,a,s,u=re.contains(e.ownerDocument,e);if(ne.html5Clone||re.isXMLDoc(e)||!Ne.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Ke.innerHTML=e.outerHTML,Ke.removeChild(o=Ke.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||re.isXMLDoc(e)))for(i=g(o),s=g(e),a=0;null!=(r=s[a]);++a)i[a]&&C(r,i[a]);if(t)if(n)for(s=s||g(e),i=i||g(o),a=0;null!=(r=s[a]);a++)x(r,i[a]);else x(e,o);return i=g(o,"script"),i.length>0&&w(i,!u&&g(e,"script")),i=s=r=null,o},buildFragment:function(e,t,n,i){for(var r,o,a,s,u,l,c,d=e.length,p=m(t),f=[],h=0;d>h;h++)if(o=e[h],o||0===o)if("object"===re.type(o))re.merge(f,o.nodeType?[o]:o);else if(He.test(o)){for(s=s||p.appendChild(t.createElement("div")),u=(Re.exec(o)||["",""])[1].toLowerCase(),c=Qe[u]||Qe._default,s.innerHTML=c[1]+o.replace(ze,"<$1></$2>")+c[2],r=c[0];r--;)s=s.lastChild;if(!ne.leadingWhitespace&&Le.test(o)&&f.push(t.createTextNode(Le.exec(o)[0])),!ne.tbody)for(o="table"!==u||qe.test(o)?"<table>"!==c[1]||qe.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)re.nodeName(l=o.childNodes[r],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(re.merge(f,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=p.lastChild}else f.push(t.createTextNode(o));for(s&&p.removeChild(s),ne.appendChecked||re.grep(g(f,"input"),v),h=0;o=f[h++];)if((!i||-1===re.inArray(o,i))&&(a=re.contains(o.ownerDocument,o),s=g(p.appendChild(o),"script"),a&&w(s),n))for(r=0;o=s[r++];)Ve.test(o.type||"")&&n.push(o);return s=null,p},cleanData:function(e,t){for(var n,i,r,o,a=0,s=re.expando,u=re.cache,l=ne.deleteExpando,c=re.event.special;null!=(n=e[a]);a++)if((t||re.acceptData(n))&&(r=n[s],o=r&&u[r])){if(o.events)for(i in o.events)c[i]?re.event.remove(n,i):re.removeEvent(n,i,o.handle);u[r]&&(delete u[r],l?delete n[s]:typeof n.removeAttribute!==Ce?n.removeAttribute(s):n[s]=null,Y.push(r))}}}),re.fn.extend({text:function(e){return Ie(this,function(e){return void 0===e?re.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){
var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?re.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||re.cleanData(g(n)),n.parentNode&&(t&&re.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&re.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&re.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return re.clone(this,e,t)})},html:function(e){return Ie(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Pe,""):void 0;if("string"==typeof e&&!We.test(e)&&(ne.htmlSerialize||!Ne.test(e))&&(ne.leadingWhitespace||!Le.test(e))&&!Qe[(Re.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ze,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(re.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,re.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e);var n,i,r,o,a,s,u=0,l=this.length,c=this,d=l-1,p=e[0],f=re.isFunction(p);if(f||l>1&&"string"==typeof p&&!ne.checkClone&&Ue.test(p))return this.each(function(n){var i=c.eq(n);f&&(e[0]=p.call(this,n,i.html())),i.domManip(e,t)});if(l&&(s=re.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=re.map(g(s,"script"),b),r=o.length;l>u;u++)i=s,u!==d&&(i=re.clone(i,!0,!0),r&&re.merge(o,g(i,"script"))),t.call(this[u],i,u);if(r)for(a=o[o.length-1].ownerDocument,re.map(o,_),u=0;r>u;u++)i=o[u],Ve.test(i.type||"")&&!re._data(i,"globalEval")&&re.contains(a,i)&&(i.src?re._evalUrl&&re._evalUrl(i.src):re.globalEval((i.text||i.textContent||i.innerHTML||"").replace(Ye,"")));s=n=null}return this}}),re.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){re.fn[e]=function(e){for(var n,i=0,r=[],o=re(e),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),re(o[i])[t](n),K.apply(r,n.get());return this.pushStack(r)}});var Ze,Je={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),typeof t.style.zoom!==Ce&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var et,tt,nt=/^margin/,it=new RegExp("^("+Te+")(?!px)[a-z%]+$","i"),rt=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tt=function(e,t,n){var i,r,o,a,s=e.style;return n=n||et(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||re.contains(e.ownerDocument,e)||(a=re.style(e,t)),it.test(a)&&nt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):he.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var i,r,o,a,s=e.style;return n=n||et(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),it.test(a)&&!rt.test(t)&&(i=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,i,r;n=he.getElementsByTagName("body")[0],n&&n.style&&(t=he.createElement("div"),i=he.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,u=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,r=t.appendChild(he.createElement("div")),r.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",r.style.marginRight=r.style.width="0",t.style.width="1px",u=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",r=t.getElementsByTagName("td"),r[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===r[0].offsetHeight,s&&(r[0].style.display="",r[1].style.display="none",s=0===r[0].offsetHeight),n.removeChild(i))}var n,i,r,o,a,s,u;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=n.getElementsByTagName("a")[0],i=r&&r.style,i&&(i.cssText="float:left;opacity:.5",ne.opacity="0.5"===i.opacity,ne.cssFloat=!!i.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===i.boxSizing||""===i.MozBoxSizing||""===i.WebkitBoxSizing,re.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==u&&t(),u}}))}(),re.swap=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r};var ot=/alpha\([^)]*\)/i,at=/opacity\s*=\s*([^)]*)/,st=/^(none|table(?!-c[ea]).+)/,ut=new RegExp("^("+Te+")(.*)$","i"),lt=new RegExp("^([+-])=("+Te+")","i"),ct={position:"absolute",visibility:"hidden",display:"block"},dt={letterSpacing:"0",fontWeight:"400"},pt=["Webkit","O","Moz","ms"];re.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=re.camelCase(t),u=e.style;if(t=re.cssProps[s]||(re.cssProps[s]=E(u,s)),a=re.cssHooks[t]||re.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t];if(o=typeof n,"string"===o&&(r=lt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(re.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||re.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{u[t]=n}catch(l){}}},css:function(e,t,n,i){var r,o,a,s=re.camelCase(t);return t=re.cssProps[s]||(re.cssProps[s]=E(e.style,s)),a=re.cssHooks[t]||re.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tt(e,t,i)),"normal"===o&&t in dt&&(o=dt[t]),""===n||n?(r=parseFloat(o),n===!0||re.isNumeric(r)?r||0:o):o}}),re.each(["height","width"],function(e,t){re.cssHooks[t]={get:function(e,n,i){return n?st.test(re.css(e,"display"))&&0===e.offsetWidth?re.swap(e,ct,function(){return $(e,t,i)}):$(e,t,i):void 0},set:function(e,n,i){var r=i&&et(e);return I(e,n,i?F(e,t,i,ne.boxSizing&&"border-box"===re.css(e,"boxSizing",!1,r),r):0)}}}),ne.opacity||(re.cssHooks.opacity={get:function(e,t){return at.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=re.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===re.trim(o.replace(ot,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=ot.test(o)?o.replace(ot,r):o+" "+r)}}),re.cssHooks.marginRight=T(ne.reliableMarginRight,function(e,t){return t?re.swap(e,{display:"inline-block"},tt,[e,"marginRight"]):void 0}),re.each({margin:"",padding:"",border:"Width"},function(e,t){re.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Ee[i]+t]=o[i]||o[i-2]||o[0];return r}},nt.test(e)||(re.cssHooks[e+t].set=I)}),re.fn.extend({css:function(e,t){return Ie(this,function(e,t,n){var i,r,o={},a=0;if(re.isArray(t)){for(i=et(e),r=t.length;r>a;a++)o[t[a]]=re.css(e,t[a],!1,i);return o}return void 0!==n?re.style(e,t,n):re.css(e,t)},e,t,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){De(this)?re(this).show():re(this).hide()})}}),re.Tween=j,j.prototype={constructor:j,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(re.cssNumber[n]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,n=j.propHooks[this.prop];return this.options.duration?this.pos=t=re.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=re.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){re.fx.step[e.prop]?re.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[re.cssProps[e.prop]]||re.cssHooks[e.prop])?re.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},re.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},re.fx=j.prototype.init,re.fx.step={};var ft,ht,mt=/^(?:toggle|show|hide)$/,gt=new RegExp("^(?:([+-])=|)("+Te+")([a-z%]*)$","i"),vt=/queueHooks$/,yt=[B],bt={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=gt.exec(t),o=r&&r[3]||(re.cssNumber[e]?"":"px"),a=(re.cssNumber[e]||"px"!==o&&+i)&&gt.exec(re.css(n.elem,e)),s=1,u=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,re.style(n.elem,e,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--u)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};re.Animation=re.extend(N,{tweener:function(e,t){re.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],bt[n]=bt[n]||[],bt[n].unshift(t)},prefilter:function(e,t){t?yt.unshift(e):yt.push(e)}}),re.speed=function(e,t,n){var i=e&&"object"==typeof e?re.extend({},e):{complete:n||!n&&t||re.isFunction(e)&&e,duration:e,easing:n&&t||t&&!re.isFunction(t)&&t};return i.duration=re.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in re.fx.speeds?re.fx.speeds[i.duration]:re.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){re.isFunction(i.old)&&i.old.call(this),i.queue&&re.dequeue(this,i.queue)},i},re.fn.extend({fadeTo:function(e,t,n,i){return this.filter(De).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=re.isEmptyObject(e),o=re.speed(t,n,i),a=function(){var t=N(this,re.extend({},e),o);(r||re._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=re.timers,a=re._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&vt.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));(t||!n)&&re.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=re._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=re.timers,a=i?i.length:0;for(n.finish=!0,re.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),re.each(["toggle","show","hide"],function(e,t){var n=re.fn[t];re.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(M(t,!0),e,i,r)}}),re.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){re.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),re.timers=[],re.fx.tick=function(){var e,t=re.timers,n=0;for(ft=re.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||re.fx.stop(),ft=void 0},re.fx.timer=function(e){re.timers.push(e),e()?re.fx.start():re.timers.pop()},re.fx.interval=13,re.fx.start=function(){ht||(ht=setInterval(re.fx.tick,re.fx.interval))},re.fx.stop=function(){clearInterval(ht),ht=null},re.fx.speeds={slow:600,fast:200,_default:400},re.fn.delay=function(e,t){return e=re.fx?re.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e,t,n,i,r;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=t.getElementsByTagName("a")[0],n=he.createElement("select"),r=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],i.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(i.getAttribute("style")),ne.hrefNormalized="/a"===i.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=r.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!r.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var _t=/\r/g;re.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=re.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,re(this).val()):e,null==r?r="":"number"==typeof r?r+="":re.isArray(r)&&(r=re.map(r,function(e){return null==e?"":e+""})),t=re.valHooks[this.type]||re.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=re.valHooks[r.type]||re.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(_t,""):null==n?"":n)}}}),re.extend({valHooks:{option:{get:function(e){var t=re.find.attr(e,"value");return null!=t?t:re.trim(re.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,u=0>r?s:o?r:0;s>u;u++)if(n=i[u],(n.selected||u===r)&&(ne.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!re.nodeName(n.parentNode,"optgroup"))){if(t=re(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=re.makeArray(t),a=r.length;a--;)if(i=r[a],re.inArray(re.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),re.each(["radio","checkbox"],function(){re.valHooks[this]={set:function(e,t){return re.isArray(t)?e.checked=re.inArray(re(e).val(),t)>=0:void 0}},ne.checkOn||(re.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var wt,xt,Ct=re.expr.attrHandle,St=/^(?:checked|selected)$/i,kt=ne.getSetAttribute,Tt=ne.input;re.fn.extend({attr:function(e,t){return Ie(this,re.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){re.removeAttr(this,e)})}}),re.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Ce?re.prop(e,t,n):(1===o&&re.isXMLDoc(e)||(t=t.toLowerCase(),i=re.attrHooks[t]||(re.expr.match.bool.test(t)?xt:wt)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=re.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void re.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(be);if(o&&1===e.nodeType)for(;n=o[r++];)i=re.propFix[n]||n,re.expr.match.bool.test(n)?Tt&&kt||!St.test(n)?e[i]=!1:e[re.camelCase("default-"+n)]=e[i]=!1:re.attr(e,n,""),e.removeAttribute(kt?n:i)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&re.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),xt={set:function(e,t,n){return t===!1?re.removeAttr(e,n):Tt&&kt||!St.test(n)?e.setAttribute(!kt&&re.propFix[n]||n,n):e[re.camelCase("default-"+n)]=e[n]=!0,n}},re.each(re.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Ct[t]||re.find.attr;Ct[t]=Tt&&kt||!St.test(t)?function(e,t,i){var r,o;return i||(o=Ct[t],Ct[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,Ct[t]=o),r}:function(e,t,n){return n?void 0:e[re.camelCase("default-"+t)]?t.toLowerCase():null}}),Tt&&kt||(re.attrHooks.value={set:function(e,t,n){return re.nodeName(e,"input")?void(e.defaultValue=t):wt&&wt.set(e,t,n)}}),kt||(wt={set:function(e,t,n){var i=e.getAttributeNode(n);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Ct.id=Ct.name=Ct.coords=function(e,t,n){var i;return n?void 0:(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},re.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:wt.set},re.attrHooks.contenteditable={set:function(e,t,n){wt.set(e,""===t?!1:t,n)}},re.each(["width","height"],function(e,t){re.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(re.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Et=/^(?:input|select|textarea|button|object)$/i,Dt=/^(?:a|area)$/i;re.fn.extend({prop:function(e,t){return Ie(this,re.prop,e,t,arguments.length>1)},removeProp:function(e){return e=re.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),re.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!re.isXMLDoc(e),o&&(t=re.propFix[t]||t,r=re.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=re.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||Dt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||re.each(["href","src"],function(e,t){re.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(re.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),re.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){re.propFix[this.toLowerCase()]=this}),ne.enctype||(re.propFix.enctype="encoding");var It=/[\t\r\n\f]/g;re.fn.extend({addClass:function(e){var t,n,i,r,o,a,s=0,u=this.length,l="string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(be)||[];u>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):" ")){for(o=0;r=t[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=re.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,i,r,o,a,s=0,u=this.length,l=0===arguments.length||"string"==typeof e&&e;if(re.isFunction(e))return this.each(function(t){re(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||"").match(be)||[];u>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(It," "):"")){for(o=0;r=t[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=e?re.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):re.isFunction(e)?this.each(function(n){re(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,i=0,r=re(this),o=e.match(be)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Ce||"boolean"===n)&&(this.className&&re._data(this,"__className__",this.className),this.className=this.className||e===!1?"":re._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(It," ").indexOf(t)>=0)return!0;return!1}}),re.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){re.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),re.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Ft=re.now(),$t=/\?/,jt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;re.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,i=null,r=re.trim(t+"");return r&&!re.trim(r.replace(jt,function(e,t,r,o){return n&&t&&(i=0),0===i?e:(n=r||t,i+=!o-!r,"")}))?Function("return "+r)():re.error("Invalid JSON: "+t)},re.parseXML=function(t){var n,i;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(i=new DOMParser,n=i.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||re.error("Invalid XML: "+t),n};var At,Mt,Ot=/#.*$/,Bt=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Lt=/^(?:GET|HEAD)$/,zt=/^\/\//,Rt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,qt={},Ht={},Wt="*/".concat("*");try{Mt=location.href}catch(Ut){Mt=he.createElement("a"),Mt.href="",Mt=Mt.href}At=Rt.exec(Mt.toLowerCase())||[],re.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt,type:"GET",isLocal:Nt.test(At[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Wt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":re.parseJSON,"text xml":re.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?R(R(e,re.ajaxSettings),t):R(re.ajaxSettings,e)},ajaxPrefilter:L(qt),ajaxTransport:L(Ht),ajax:function(e,t){function n(e,t,n,i){var r,c,v,y,_,x=t;2!==b&&(b=2,s&&clearTimeout(s),l=void 0,a=i||"",w.readyState=e>0?4:0,r=e>=200&&300>e||304===e,n&&(y=q(d,w,n)),y=H(d,y,w,r),r?(d.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(re.lastModified[o]=_),_=w.getResponseHeader("etag"),_&&(re.etag[o]=_)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=y.state,c=y.data,v=y.error,r=!v)):(v=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",r?h.resolveWith(p,[c,x,w]):h.rejectWith(p,[w,x,v]),w.statusCode(g),g=void 0,u&&f.trigger(r?"ajaxSuccess":"ajaxError",[w,d,r?c:v]),m.fireWith(p,[w,x]),u&&(f.trigger("ajaxComplete",[w,d]),--re.active||re.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,o,a,s,u,l,c,d=re.ajaxSetup({},t),p=d.context||d,f=d.context&&(p.nodeType||p.jquery)?re(p):re.event,h=re.Deferred(),m=re.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Pt.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return l&&l.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||Mt)+"").replace(Ot,"").replace(zt,At[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=re.trim(d.dataType||"*").toLowerCase().match(be)||[""],null==d.crossDomain&&(i=Rt.exec(d.url.toLowerCase()),d.crossDomain=!(!i||i[1]===At[1]&&i[2]===At[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(At[3]||("http:"===At[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=re.param(d.data,d.traditional)),z(qt,d,t,w),2===b)return w;u=d.global,u&&0===re.active++&&re.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Lt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=($t.test(o)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=Bt.test(o)?o.replace(Bt,"$1_="+Ft++):o+($t.test(o)?"&":"?")+"_="+Ft++)),d.ifModified&&(re.lastModified[o]&&w.setRequestHeader("If-Modified-Since",re.lastModified[o]),re.etag[o]&&w.setRequestHeader("If-None-Match",re.etag[o])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Wt+"; q=0.01":""):d.accepts["*"]);for(r in d.headers)w.setRequestHeader(r,d.headers[r]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===b))return w.abort();_="abort";for(r in{success:1,error:1,complete:1})w[r](d[r]);if(l=z(Ht,d,t,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,l.send(v,n)}catch(x){if(!(2>b))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return re.get(e,t,n,"json")},getScript:function(e,t){return re.get(e,void 0,t,"script")}}),re.each(["get","post"],function(e,t){re[t]=function(e,n,i,r){return re.isFunction(n)&&(r=r||i,i=n,n=void 0),re.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),re.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){re.fn[t]=function(e){return this.on(t,e)}}),re._evalUrl=function(e){return re.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},re.fn.extend({wrapAll:function(e){if(re.isFunction(e))return this.each(function(t){re(this).wrapAll(e.call(this,t))});if(this[0]){var t=re(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return re.isFunction(e)?this.each(function(t){re(this).wrapInner(e.call(this,t))}):this.each(function(){var t=re(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=re.isFunction(e);return this.each(function(n){re(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){re.nodeName(this,"body")||re(this).replaceWith(this.childNodes)}).end()}}),re.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||re.css(e,"display"))},re.expr.filters.visible=function(e){return!re.expr.filters.hidden(e)};var Vt=/%20/g,Xt=/\[\]$/,Yt=/\r?\n/g,Qt=/^(?:submit|button|image|reset|file)$/i,Gt=/^(?:input|select|textarea|keygen)/i;re.param=function(e,t){var n,i=[],r=function(e,t){t=re.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=re.ajaxSettings&&re.ajaxSettings.traditional),re.isArray(e)||e.jquery&&!re.isPlainObject(e))re.each(e,function(){r(this.name,this.value)});else for(n in e)W(n,e[n],t,r);return i.join("&").replace(Vt,"+")},re.fn.extend({serialize:function(){return re.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=re.prop(this,"elements");return e?re.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!re(this).is(":disabled")&&Gt.test(this.nodeName)&&!Qt.test(e)&&(this.checked||!Fe.test(e))}).map(function(e,t){var n=re(this).val();return null==n?null:re.isArray(n)?re.map(n,function(e){return{name:t.name,value:e.replace(Yt,"\r\n")}}):{name:t.name,value:n.replace(Yt,"\r\n")}}).get()}}),re.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&U()||V()}:U;var Kt=0,Zt={},Jt=re.ajaxSettings.xhr();e.ActiveXObject&&re(e).on("unload",function(){for(var e in Zt)Zt[e](void 0,!0)}),ne.cors=!!Jt&&"withCredentials"in Jt,Jt=ne.ajax=!!Jt,Jt&&re.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,i){var r,o=e.xhr(),a=++Kt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)o[r]=e.xhrFields[r];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(e.hasContent&&e.data||null),t=function(n,r){var s,u,l;if(t&&(r||4===o.readyState))if(delete Zt[a],t=void 0,o.onreadystatechange=re.noop,r)4!==o.readyState&&o.abort();else{l={},s=o.status,"string"==typeof o.responseText&&(l.text=o.responseText);try{u=o.statusText}catch(c){u=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=l.text?200:404}l&&i(s,u,l,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Zt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),re.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return re.globalEval(e),e}}}),re.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),re.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||re("head")[0]||he.documentElement;return{send:function(i,r){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var en=[],tn=/(=)\?(?=&|$)|\?\?/;re.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=en.pop()||re.expando+"_"+Ft++;return this[e]=!0,e}}),re.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(tn.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tn.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=re.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(tn,"$1"+r):t.jsonp!==!1&&(t.url+=($t.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||re.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,en.push(r)),a&&re.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),re.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var i=de.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=re.buildFragment([e],t,r),
r&&r.length&&re(r).remove(),re.merge([],i.childNodes))};var nn=re.fn.load;re.fn.load=function(e,t,n){if("string"!=typeof e&&nn)return nn.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>=0&&(i=re.trim(e.slice(s,e.length)),e=e.slice(0,s)),re.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&re.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){r=arguments,a.html(i?re("<div>").append(re.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){a.each(n,r||[e.responseText,t,e])}),this},re.expr.filters.animated=function(e){return re.grep(re.timers,function(t){return e===t.elem}).length};var rn=e.document.documentElement;re.offset={setOffset:function(e,t,n){var i,r,o,a,s,u,l,c=re.css(e,"position"),d=re(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=re.css(e,"top"),u=re.css(e,"left"),l=("absolute"===c||"fixed"===c)&&re.inArray("auto",[o,u])>-1,l?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(u)||0),re.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):d.css(p)}},re.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){re.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,re.contains(t,r)?(typeof r.getBoundingClientRect!==Ce&&(i=r.getBoundingClientRect()),n=X(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===re.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),re.nodeName(e[0],"html")||(n=e.offset()),n.top+=re.css(e[0],"borderTopWidth",!0),n.left+=re.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-re.css(i,"marginTop",!0),left:t.left-n.left-re.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||rn;e&&!re.nodeName(e,"html")&&"static"===re.css(e,"position");)e=e.offsetParent;return e||rn})}}),re.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);re.fn[e]=function(i){return Ie(this,function(e,i,r){var o=X(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?re(o).scrollLeft():r,n?r:re(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),re.each(["top","left"],function(e,t){re.cssHooks[t]=T(ne.pixelPosition,function(e,n){return n?(n=tt(e,t),it.test(n)?re(e).position()[t]+"px":n):void 0})}),re.each({Height:"height",Width:"width"},function(e,t){re.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){re.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Ie(this,function(t,n,i){var r;return re.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?re.css(t,n,a):re.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),re.fn.size=function(){return this.length},re.fn.andSelf=re.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return re});var on=e.jQuery,an=e.$;return re.noConflict=function(t){return e.$===re&&(e.$=an),t&&e.jQuery===re&&(e.jQuery=on),re},typeof t===Ce&&(e.jQuery=e.$=re),re}),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,i="ui-effects-";e.effects={effect:{}},function(t,n){function i(e,t,n){var i=p[t.type]||{};return null==e?n||!t.def?null:t.def:(e=i.floor?~~e:parseFloat(e),isNaN(e)?t.def:i.mod?(e+i.mod)%i.mod:0>e?0:i.max<e?i.max:e)}function r(e){var n=c(),i=n._rgba=[];return e=e.toLowerCase(),m(l,function(t,r){var o,a=r.re.exec(e),s=a&&r.parse(a),u=r.space||"rgba";return s?(o=n[u](s),n[d[u].cache]=o[d[u].cache],i=n._rgba=o._rgba,!1):void 0}),i.length?("0,0,0,0"===i.join()&&t.extend(i,a.transparent),n):a[e]}function o(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var a,s="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),u=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=t.Color=function(e,n,i,r){return new t.Color.fn.parse(e,n,i,r)},d={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=c.support={},h=t("<p>")[0],m=t.each;h.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=h.style.backgroundColor.indexOf("rgba")>-1,m(d,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=t.extend(c.prototype,{parse:function(o,s,u,l){if(o===n)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=t(o).css(s),s=n);var p=this,f=t.type(o),h=this._rgba=[];return s!==n&&(o=[o,s,u,l],f="array"),"string"===f?this.parse(r(o)||a._default):"array"===f?(m(d.rgba.props,function(e,t){h[t.idx]=i(o[t.idx],t)}),this):"object"===f?(o instanceof c?m(d,function(e,t){o[t.cache]&&(p[t.cache]=o[t.cache].slice())}):m(d,function(t,n){var r=n.cache;m(n.props,function(e,t){if(!p[r]&&n.to){if("alpha"===e||null==o[e])return;p[r]=n.to(p._rgba)}p[r][t.idx]=i(o[e],t,!0)}),p[r]&&e.inArray(null,p[r].slice(0,3))<0&&(p[r][3]=1,n.from&&(p._rgba=n.from(p[r])))}),this):void 0},is:function(e){var t=c(e),n=!0,i=this;return m(d,function(e,r){var o,a=t[r.cache];return a&&(o=i[r.cache]||r.to&&r.to(i._rgba)||[],m(r.props,function(e,t){return null!=a[t.idx]?n=a[t.idx]===o[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return m(d,function(n,i){t[i.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=c(e),r=n._space(),o=d[r],a=0===this.alpha()?c("transparent"):this,s=a[o.cache]||o.to(a._rgba),u=s.slice();return n=n[o.cache],m(o.props,function(e,r){var o=r.idx,a=s[o],l=n[o],c=p[r.type]||{};null!==l&&(null===a?u[o]=l:(c.mod&&(l-a>c.mod/2?a+=c.mod:a-l>c.mod/2&&(a-=c.mod)),u[o]=i((l-a)*t+a,r)))}),this[r](u)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),i=n.pop(),r=c(e)._rgba;return c(t.map(n,function(e,t){return(1-i)*r[t]+i*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),i=n.pop();return e&&n.push(~~(255*i)),"#"+t.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,d.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,n,i=e[0]/255,r=e[1]/255,o=e[2]/255,a=e[3],s=Math.max(i,r,o),u=Math.min(i,r,o),l=s-u,c=s+u,d=.5*c;return t=u===s?0:i===s?60*(r-o)/l+360:r===s?60*(o-i)/l+120:60*(i-r)/l+240,n=0===d||1===d?d:.5>=d?l/c:l/(2-c),[Math.round(t)%360,n,d,null==a?1:a]},d.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],i=e[2],r=e[3],a=.5>=i?i*(1+n):i+n-i*n,s=2*i-a;return[Math.round(255*o(s,a,t+1/3)),Math.round(255*o(s,a,t)),Math.round(255*o(s,a,t-1/3)),r]},m(d,function(e,r){var o=r.props,a=r.cache,s=r.to,l=r.from;c.fn[e]=function(e){if(s&&!this[a]&&(this[a]=s(this._rgba)),e===n)return this[a].slice();var r,u=t.type(e),d="array"===u||"object"===u?e:arguments,p=this[a].slice();return m(o,function(e,t){var n=d["object"===u?e:t.idx];null==n&&(n=p[t.idx]),p[t.idx]=i(n,t)}),l?(r=c(l(p)),r[a]=p,r):c(p)},m(o,function(n,i){c.fn[n]||(c.fn[n]=function(r){var o,a=t.type(r),s="alpha"===n?this._hsla?"hsla":"rgba":e,l=this[s](),c=l[i.idx];return"undefined"===a?c:("function"===a&&(r=r.call(this,c),a=t.type(r)),null==r&&i.empty?this:("string"===a&&(o=u.exec(r),o&&(r=c+parseFloat(o[2])*("+"===o[1]?1:-1))),l[i.idx]=r,this[s](l)))})})}),m(s,function(e,n){t.cssHooks[n]={set:function(e,i){var o,a,s="";if("string"!==t.type(i)||(o=r(i))){if(i=c(o||i),!f.rgba&&1!==i._rgba[3]){for(a="backgroundColor"===n?e.parentNode:e;(""===s||"transparent"===s)&&a&&a.style;)try{s=t.css(a,"backgroundColor"),a=a.parentNode}catch(u){}i=i.blend(s&&"transparent"!==s?s:"_default")}i=i.toRgbaString()}try{e.style[n]=i}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=c(e.elem,n),e.end=c(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return m(["Top","Right","Bottom","Left"],function(n,i){t["border"+i+"Color"]=e}),t}},a=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function n(){var t,n,i=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(n=i.length;n--;)t=i[n],"string"==typeof i[t]&&(r[e.camelCase(t)]=i[t]);else for(t in i)"string"==typeof i[t]&&(r[t]=i[t]);return r}function i(t,n){var i,r,a={};for(i in n)r=n[i],t[i]!==r&&(o[i]||(e.fx.step[i]||!isNaN(parseFloat(r)))&&(a[i]=r));return a}var r=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,o,a,s){var u=e.speed(o,a,s);return this.queue(function(){var o,a=e(this),s=a.attr("class")||"",l=u.children?a.find("*").andSelf():a;l=l.map(function(){var t=e(this);return{el:t,start:n.call(this)}}),o=function(){e.each(r,function(e,n){t[n]&&a[n+"Class"](t[n])})},o(),l=l.map(function(){return this.end=n.call(this.el[0]),this.diff=i(this.start,this.end),this}),a.attr("class",s),l=l.map(function(){var t=this,n=e.Deferred(),i=jQuery.extend({},u,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,i),n.promise()}),e.when.apply(e,l.get()).done(function(){o(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),u.complete.call(a[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{add:t},n,i,r):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,r){return n?e.effects.animateClass.call(this,{remove:t},n,i,r):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,i,r,o,a){return"boolean"==typeof i||i===t?r?e.effects.animateClass.call(this,i?{add:n}:{remove:n},r,o,a):this._toggleClass(n,i):e.effects.animateClass.call(this,{toggle:n},i,r,o)},switchClass:function(t,n,i,r,o){return e.effects.animateClass.call(this,{add:n,remove:t},i,r,o)}})}(),function(){function r(t,n,i,r){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(r=n,i=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(r=i,i=n,n={}),e.isFunction(i)&&(r=i,i=null),n&&e.extend(t,n),i=i||n.duration,t.duration=e.fx.off?0:"number"==typeof i?i:i in e.fx.speeds?e.fx.speeds[i]:e.fx.speeds._default,t.complete=r||n.complete,t}function o(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:n&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(i+t[n],e[0].style[t[n]])},restore:function(e,n){var r,o;for(o=0;o<n.length;o++)null!==n[o]&&(r=e.data(i+n[o]),r===t&&(r=""),e.css(n[o],r))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,i;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":i=0;break;case"center":i=.5;break;case"right":i=1;break;default:i=e[1]/t.width}return{x:i,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),r={width:t.width(),height:t.height()},o=document.activeElement;try{o.id}catch(a){o=document.body}return t.wrap(i),(t[0]===o||e.contains(t[0],o))&&e(o).focus(),i=t.parent(),"static"===t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(r),i.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,i,r){return r=r||{},e.each(n,function(e,n){var o=t.cssUnit(n);o[0]>0&&(r[n]=o[0]*i+o[1])}),r}}),e.fn.extend({effect:function(){function t(t){function n(){e.isFunction(o)&&o.call(r[0]),e.isFunction(t)&&t()}var r=e(this),o=i.complete,a=i.mode;(r.is(":hidden")?"hide"===a:"show"===a)?n():s.call(r[0],i,n)}var i=r.apply(this,arguments),o=i.mode,a=i.queue,s=e.effects.effect[i.effect],u=!s&&n&&e.effects[i.effect];return e.fx.off||!s&&!u?o?this[o](i.duration,i.complete):this.each(function(){i.complete&&i.complete.call(this)}):s?a===!1?this.each(t):this.queue(a||"fx",t):u.call(this,{options:i,duration:i.duration,callback:i.complete,mode:i.mode})},_show:e.fn.show,show:function(e){if(o(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(o(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(o(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e,t){e.effects.effect.highlight=function(t,n){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],o=e.effects.setMode(i,t.mode||"show"),a={backgroundColor:i.css("backgroundColor")};"hide"===o&&(a.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(a,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===o&&i.hide(),e.effects.restore(i,r),n()}})}}(jQuery),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,i=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,i){var r=e.Event(n);return t.trigger(r,i),r.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e[0].href},handleRemote:function(i){var r,o,a,s,u,l;if(n.fire(i,"ajax:before")){if(s=i.data("with-credentials")||null,u=i.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType,i.is("form")){r=i.attr("method"),o=i.attr("action"),a=i.serializeArray();var c=i.data("ujs:submit-button");c&&(a.push(c),i.data("ujs:submit-button",null))}else i.is(n.inputChangeSelector)?(r=i.data("method"),o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):i.is(n.buttonClickSelector)?(r=i.data("method")||"get",o=i.data("url"),a=i.serialize(),i.data("params")&&(a=a+"&"+i.data("params"))):(r=i.data("method"),o=n.href(i),a=i.data("params")||null);return l={type:r||"GET",data:a,dataType:u,beforeSend:function(e,r){return r.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+r.accepts.script),n.fire(i,"ajax:beforeSend",[e,r])?void i.trigger("ajax:send",e):!1},success:function(e,t,n){i.trigger("ajax:success",[e,t,n])},complete:function(e,t){i.trigger("ajax:complete",[e,t])},error:function(e,t,n){i.trigger("ajax:error",[e,t,n])},crossDomain:n.isCrossDomain(o)},s&&(l.xhrFields={withCredentials:s}),o&&(l.url=o),n.ajax(l)}return!1},isCrossDomain:function(e){var t=document.createElement("a");t.href=location.href;var n=document.createElement("a");try{return n.href=e,n.href=n.href,!n.protocol||!n.host||t.protocol+"//"+t.host!=n.protocol+"//"+n.host}catch(i){return!0}},handleMethod:function(i){var r=n.href(i),o=i.data("method"),a=i.attr("target"),s=e("meta[name=csrf-token]").attr("content"),u=e("meta[name=csrf-param]").attr("content"),l=e('<form method="post" action="'+r+'"></form>'),c='<input name="_method" value="'+o+'" type="hidden" />';u===t||s===t||n.isCrossDomain(r)||(c+='<input name="'+u+'" value="'+s+'" type="hidden" />'),a&&l.attr("target",a),l.hide().append(c).appendTo("body"),l.submit()},formElements:function(t,n){return t.is("form")?e(t[0].elements).filter(n):t.find(n)},disableFormElements:function(t){n.formElements(t,n.disableSelector).each(function(){n.disableFormElement(e(this))})},disableFormElement:function(e){var n,i;n=e.is("button")?"html":"val",i=e.data("disable-with"),e.data("ujs:enable-with",e[n]()),i!==t&&e[n](i),e.prop("disabled",!0)},enableFormElements:function(t){n.formElements(t,n.enableSelector).each(function(){n.enableFormElement(e(this))})},enableFormElement:function(e){var t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.prop("disabled",!1)},allowAction:function(e){var t,i=e.data("confirm"),r=!1;return i?(n.fire(e,"confirm")&&(r=n.confirm(i),t=n.fire(e,"confirm:complete",[r])),r&&t):!0},blankInputs:function(t,n,i){var r,o,a=e(),s=n||"input,textarea",u=t.find(s);return u.each(function(){if(r=e(this),o=r.is("input[type=checkbox],input[type=radio]")?r.is(":checked"):r.val(),!o==!i){if(r.is("input[type=radio]")&&u.filter('input[type=radio]:checked[name="'+r.attr("name")+'"]').length)return!0;a=a.add(r)}}),a.length?a:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){var i=e.data("disable-with");e.data("ujs:enable-with",e.html()),i!==t&&e.html(i),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(i,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,i){e.crossDomain||n.CSRFProtection(i)}),i.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),i.delegate(n.buttonDisableSelector,"ajax:complete",function(){n.enableFormElement(e(this))}),i.delegate(n.linkClickSelector,"click.rails",function(i){var r=e(this),o=r.data("method"),a=r.data("params"),s=i.metaKey||i.ctrlKey;if(!n.allowAction(r))return n.stopEverything(i);if(!s&&r.is(n.linkDisableSelector)&&n.disableElement(r),r.data("remote")!==t){if(s&&(!o||"GET"===o)&&!a)return!0;var u=n.handleRemote(r);return u===!1?n.enableElement(r):u.error(function(){n.enableElement(r)}),!1}return r.data("method")?(n.handleMethod(r),!1):void 0}),i.delegate(n.buttonClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);i.is(n.buttonDisableSelector)&&n.disableFormElement(i);var r=n.handleRemote(i);return r===!1?n.enableFormElement(i):r.error(function(){n.enableFormElement(i)}),!1}),i.delegate(n.inputChangeSelector,"change.rails",function(t){var i=e(this);return n.allowAction(i)?(n.handleRemote(i),!1):n.stopEverything(t)}),i.delegate(n.formSubmitSelector,"submit.rails",function(i){var r,o,a=e(this),s=a.data("remote")!==t;if(!n.allowAction(a))return n.stopEverything(i);if(a.attr("novalidate")==t&&(r=n.blankInputs(a,n.requiredInputSelector),r&&n.fire(a,"ajax:aborted:required",[r])))return n.stopEverything(i);if(s){if(o=n.nonBlankInputs(a,n.fileInputSelector)){setTimeout(function(){n.disableFormElements(a)},13);var u=n.fire(a,"ajax:aborted:file",[o]);return u||setTimeout(function(){n.enableFormElements(a)},13),u}return n.handleRemote(a),!1}setTimeout(function(){n.disableFormElements(a)},13)}),i.delegate(n.formInputClickSelector,"click.rails",function(t){var i=e(this);if(!n.allowAction(i))return n.stopEverything(t);var r=i.attr("name"),o=r?{name:r,value:i.val()}:null;i.closest("form").data("ujs:submit-button",o)}),i.delegate(n.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),i.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),function(e){"use strict";function t(t){var n=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(n))}function n(t){var n=t.target,i=e(n);if(!i.is(":submit,input:image")){var r=i.closest(":submit");if(0===r.length)return;n=r[0]}var o=this;if(o.clk=n,"image"==n.type)if(void 0!==t.offsetX)o.clk_x=t.offsetX,o.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var a=i.offset();o.clk_x=t.pageX-a.left,o.clk_y=t.pageY-a.top}else o.clk_x=t.pageX-n.offsetLeft,o.clk_y=t.pageY-n.offsetTop;setTimeout(function(){o.clk=o.clk_x=o.clk_y=null},100)}function i(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var r={};r.fileapi=void 0!==e("<input type='file'/>").get(0).files,r.formdata=void 0!==window.FormData,e.fn.ajaxSubmit=function(t){function n(n){for(var i=new FormData,r=0;r<n.length;r++)i.append(n[r].name,n[r].value);if(t.extraData)for(var o in t.extraData)t.extraData.hasOwnProperty(o)&&i.append(o,t.extraData[o]);t.data=null;var a=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:"POST"});t.uploadProgress&&(a.xhr=function(){var e=jQuery.ajaxSettings.xhr();return e.upload&&(e.upload.onprogress=function(e){var n=0,i=e.loaded||e.position,r=e.total;e.lengthComputable&&(n=Math.ceil(i/r*100)),t.uploadProgress(e,i,r,n)}),e}),a.data=null;var s=a.beforeSend;a.beforeSend=function(e,n){n.data=i,s&&s.call(n,e,t)},e.ajax(a)}function o(n){function r(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function o(){function t(){try{var e=r(g).readyState;i("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(n){i("Server abort: ",n," (",n.name,")"),s(k),w&&clearTimeout(w),w=void 0}}var n=l.attr("target"),o=l.attr("action");x.setAttribute("target",h),a||x.setAttribute("method","POST"),o!=d.url&&x.setAttribute("action",d.url),d.skipEncodingOverride||a&&!/post/i.test(a)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(w=setTimeout(function(){_=!0,s(S)},d.timeout));var u=[];try{if(d.extraData)for(var c in d.extraData)d.extraData.hasOwnProperty(c)&&u.push(e('<input type="hidden" name="'+c+'">').attr("value",d.extraData[c]).appendTo(x)[0]);d.iframeTarget||(m.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(t,15),x.submit()}finally{x.setAttribute("action",o),n?x.setAttribute("target",n):l.removeAttr("target"),e(u).remove()}}function s(t){if(!v.aborted&&!F){try{I=r(g)}catch(n){i("cannot access response document: ",n),t=k}if(t===S&&v)return void v.abort("timeout");if(t==k&&v)return void v.abort("server abort");if(I&&I.location.href!=d.iframeSrc||_){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var o,a="success";try{if(_)throw"timeout";var u="xml"==d.dataType||I.XMLDocument||e.isXMLDoc(I);if(i("isXml="+u),!u&&window.opera&&(null===I.body||!I.body.innerHTML)&&--$)return i("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var l=I.body?I.body:I.documentElement;v.responseText=l?l.innerHTML:null,v.responseXML=I.XMLDocument?I.XMLDocument:I,u&&(d.dataType="xml"),v.getResponseHeader=function(e){var t={"content-type":d.dataType};return t[e]},l&&(v.status=Number(l.getAttribute("status"))||v.status,v.statusText=l.getAttribute("statusText")||v.statusText);var c=(d.dataType||"").toLowerCase(),f=/(json|script|text)/.test(c);if(f||d.textarea){var h=I.getElementsByTagName("textarea")[0];if(h)v.responseText=h.value,v.status=Number(h.getAttribute("status"))||v.status,v.statusText=h.getAttribute("statusText")||v.statusText;else if(f){var y=I.getElementsByTagName("pre")[0],b=I.getElementsByTagName("body")[0];y?v.responseText=y.textContent?y.textContent:y.innerText:b&&(v.responseText=b.textContent?b.textContent:b.innerText)}}else"xml"==c&&!v.responseXML&&v.responseText&&(v.responseXML=j(v.responseText));try{D=M(v,c,d)}catch(t){a="parsererror",v.error=o=t||a}}catch(t){i("error caught: ",t),a="error",v.error=o=t||a}v.aborted&&(i("upload aborted"),a=null),v.status&&(a=v.status>=200&&v.status<300||304===v.status?"success":"error"),"success"===a?(d.success&&d.success.call(d.context,D,"success",v),p&&e.event.trigger("ajaxSuccess",[v,d])):a&&(void 0===o&&(o=v.statusText),d.error&&d.error.call(d.context,v,a,o),p&&e.event.trigger("ajaxError",[v,d,o])),p&&e.event.trigger("ajaxComplete",[v,d]),p&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,v,a),F=!0,d.timeout&&clearTimeout(w),setTimeout(function(){d.iframeTarget||m.remove(),v.responseXML=null},100)}}}var u,c,d,p,h,m,g,v,y,b,_,w,x=l[0],C=!!e.fn.prop;if(e(":input[name=submit],:input[id=submit]",x).length)return void alert('Error: Form elements must not have name or id of "submit".');if(n)for(c=0;c<f.length;c++)u=e(f[c]),C?u.prop("disabled",!1):u.removeAttr("disabled");if(d=e.extend(!0,{},e.ajaxSettings,t),d.context=d.context||d,h="jqFormIO"+(new Date).getTime(),d.iframeTarget?(m=e(d.iframeTarget),b=m.attr("name"),b?h=b:m.attr("name",h)):(m=e('<iframe name="'+h+'" src="'+d.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=m[0],v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n="timeout"===t?"timeout":"aborted";i("aborting upload... "+n),this.aborted=1,m.attr("src",d.iframeSrc),v.error=n,d.error&&d.error.call(d.context,v,n,t),p&&e.event.trigger("ajaxError",[v,d,n]),d.complete&&d.complete.call(d.context,v,n)}},p=d.global,p&&0===e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[v,d]),d.beforeSend&&d.beforeSend.call(d.context,v,d)===!1)return void(d.global&&e.active--);if(!v.aborted){y=x.clk,y&&(b=y.name,b&&!y.disabled&&(d.extraData=d.extraData||{},d.extraData[b]=y.value,"image"==y.type&&(d.extraData[b+".x"]=x.clk_x,d.extraData[b+".y"]=x.clk_y)));var S=1,k=2,T=e("meta[name=csrf-token]").attr("content"),E=e("meta[name=csrf-param]").attr("content");E&&T&&(d.extraData=d.extraData||{},d.extraData[E]=T),d.forceSync?o():setTimeout(o,10);var D,I,F,$=50,j=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},A=e.parseJSON||function(e){return window.eval("("+e+")")},M=function(t,n,i){var r=t.getResponseHeader("content-type")||"",o="xml"===n||!n&&r.indexOf("xml")>=0,a=o?t.responseXML:t.responseText;return o&&"parsererror"===a.documentElement.nodeName&&e.error&&e.error("parsererror"),i&&i.dataFilter&&(a=i.dataFilter(a,n)),"string"==typeof a&&("json"===n||!n&&r.indexOf("json")>=0?a=A(a):("script"===n||!n&&r.indexOf("javascript")>=0)&&e.globalEval(a)),a}}}if(!this.length)return i("ajaxSubmit: skipping submit process - no element selected"),this;var a,s,u,l=this;"function"==typeof t&&(t={success:t}),a=this.attr("method"),s=this.attr("action"),u="string"==typeof s?e.trim(s):"",u=u||window.location.href||"",u&&(u=(u.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:u,success:e.ajaxSettings.success,type:a||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var c={};if(this.trigger("form-pre-serialize",[this,t,c]),c.veto)return i("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&t.beforeSerialize(this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=t.traditional;void 0===d&&(d=e.ajaxSettings.traditional);var p,f=[],h=this.formToArray(t.semantic,f);if(t.data&&(t.extraData=t.data,p=e.param(t.data,d)),t.beforeSubmit&&t.beforeSubmit(h,this,t)===!1)return i("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[h,this,t,c]),c.veto)return i("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var m=e.param(h,d);p&&(m=m?m+"&"+p:p),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+m,t.data=null):t.data=m;var g=[];if(t.resetForm&&g.push(function(){l.resetForm()}),t.clearForm&&g.push(function(){l.clearForm(t.includeHidden)}),!t.dataType&&t.target){var v=t.success||function(){};g.push(function(n){var i=t.replaceTarget?"replaceWith":"html";e(t.target)[i](n).each(v,arguments)})}else t.success&&g.push(t.success);t.success=function(e,n,i){for(var r=t.context||t,o=0,a=g.length;a>o;o++)g[o].apply(r,[e,n,i||l,l]);
};var y=e("input:file:enabled[value]",this),b=y.length>0,_="multipart/form-data",w=l.attr("enctype")==_||l.attr("encoding")==_,x=r.fileapi&&r.formdata;i("fileAPI :"+x);var C=(b||w)&&!x;t.iframe!==!1&&(t.iframe||C)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){o(h)}):o(h):(b||w)&&x?n(h):e.ajax(t);for(var S=0;S<f.length;S++)f[S]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(r){if(r=r||{},r.delegation=r.delegation&&e.isFunction(e.fn.on),!r.delegation&&0===this.length){var o={s:this.selector,c:this.context};return!e.isReady&&o.s?(i("DOM not ready, queuing ajaxForm"),e(function(){e(o.s,o.c).ajaxForm(r)}),this):(i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return r.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,r,t).on("click.form-plugin",this.selector,r,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",r,t).bind("click.form-plugin",r,n)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,n){var i=[];if(0===this.length)return i;var o=this[0],a=t?o.getElementsByTagName("*"):o.elements;if(!a)return i;var s,u,l,c,d,p,f;for(s=0,p=a.length;p>s;s++)if(d=a[s],l=d.name)if(t&&o.clk&&"image"==d.type)d.disabled||o.clk!=d||(i.push({name:l,value:e(d).val(),type:d.type}),i.push({name:l+".x",value:o.clk_x},{name:l+".y",value:o.clk_y}));else if(c=e.fieldValue(d,!0),c&&c.constructor==Array)for(n&&n.push(d),u=0,f=c.length;f>u;u++)i.push({name:l,value:c[u]});else if(r.fileapi&&"file"==d.type&&!d.disabled){n&&n.push(d);var h=d.files;if(h.length)for(u=0;u<h.length;u++)i.push({name:l,value:h[u],type:d.type});else i.push({name:l,value:"",type:d.type})}else null!==c&&"undefined"!=typeof c&&(n&&n.push(d),i.push({name:l,value:c,type:d.type,required:d.required}));if(!t&&o.clk){var m=e(o.clk),g=m[0];l=g.name,l&&!g.disabled&&"image"==g.type&&(i.push({name:l,value:m.val()}),i.push({name:l+".x",value:o.clk_x},{name:l+".y",value:o.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var n=[];return this.each(function(){var i=this.name;if(i){var r=e.fieldValue(this,t);if(r&&r.constructor==Array)for(var o=0,a=r.length;a>o;o++)n.push({name:i,value:r[o]});else null!==r&&"undefined"!=typeof r&&n.push({name:this.name,value:r})}}),e.param(n)},e.fn.fieldValue=function(t){for(var n=[],i=0,r=this.length;r>i;i++){var o=this[i],a=e.fieldValue(o,t);null===a||"undefined"==typeof a||a.constructor==Array&&!a.length||(a.constructor==Array?e.merge(n,a):n.push(a))}return n},e.fieldValue=function(t,n){var i=t.name,r=t.type,o=t.tagName.toLowerCase();if(void 0===n&&(n=!0),n&&(!i||t.disabled||"reset"==r||"button"==r||("checkbox"==r||"radio"==r)&&!t.checked||("submit"==r||"image"==r)&&t.form&&t.form.clk!=t||"select"==o&&-1==t.selectedIndex))return null;if("select"==o){var a=t.selectedIndex;if(0>a)return null;for(var s=[],u=t.options,l="select-one"==r,c=l?a+1:u.length,d=l?a:0;c>d;d++){var p=u[d];if(p.selected){var f=p.value;if(f||(f=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),l)return f;s.push(f)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();n.test(i)||"textarea"==r?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r?this.selectedIndex=-1:t&&(t===!0&&/hidden/.test(i)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var n=this.type;if("checkbox"==n||"radio"==n)this.checked=t;else if("option"==this.tagName.toLowerCase()){var i=e(this).parent("select");t&&i[0]&&"select-one"==i[0].type&&i.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0)}),this.submit(function(t){function i(){var i;return n.settings.submitHandler?(n.submitButton&&(i=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(n.submitButton.value).appendTo(n.currentForm)),n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&i.remove(),!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,i()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):i():(n.focusInvalid(),!1)})),n)},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,n=e(this[0].form).validate();return this.each(function(){t&=n.element(this)}),t},removeAttrs:function(t){var n={},i=this;return e.each(t.split(/\s/),function(e,t){n[t]=i.attr(t),i.removeAttr(t)}),n},rules:function(t,n){var i=this[0];if(t){var r=e.data(i.form,"validator").settings,o=r.rules,a=e.validator.staticRules(i);switch(t){case"add":e.extend(a,e.validator.normalizeRule(n)),o[i.name]=a,n.messages&&(r.messages[i.name]=e.extend(r.messages[i.name],n.messages));break;case"remove":if(!n)return delete o[i.name],a;var s={};return e.each(n.split(/\s/),function(e,t){s[t]=a[t],delete a[t]}),s}}var u=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(i),e.validator.classRules(i),e.validator.attributeRules(i),e.validator.staticRules(i)),i);if(u.required){var l=u.required;delete u.required,u=e.extend({required:l},u)}return u}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return 1===arguments.length?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),n)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(9!==t.which||""!==this.elementValue(e))&&(e.name in this.submitted||e===this.lastActive)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).addClass(n).removeClass(i):e(t).addClass(n).removeClass(i)},unhighlight:function(t,n,i){"radio"===t.type?this.findByName(t.name).removeClass(n).addClass(i):e(t).removeClass(n).addClass(i)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var n=e.data(this[0].form,"validator"),i="on"+t.type.replace(/^validate/,"");n.settings[i]&&n.settings[i].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var n=this.groups={};e.each(this.settings.groups,function(t,i){e.each(i.split(/\s/),function(e,i){n[i]=t})});var i=this.settings.rules;e.each(i,function(t,n){i[t]=e.validator.normalizeRule(n)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var n=this.check(t)!==!1;return n?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),n},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var n in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.replace(" ",".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n=e(t).attr("type"),i=e(t).val();return"radio"===n||"checkbox"===n?e('input[name="'+e(t).attr("name")+'"]:checked').val():"string"==typeof i?i.replace(/\r/g,""):i},check:function(t){t=this.validationTargetFor(this.clean(t));var n,i=e(t).rules(),r=!1,o=this.elementValue(t);for(var a in i){var s={method:a,parameters:i[a]};try{if(n=e.validator.methods[a].call(this,o,t,s.parameters),"dependency-mismatch"===n){r=!0;continue}if(r=!1,"pending"===n)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!n)return this.formatAndAdd(t,s),!1}catch(u){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+s.method+"' method",u),u}}return r?void 0:(this.objectLength(i)&&this.successList.push(t),!0)},customMetaMessage:function(t,n){if(e.metadata){var i=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return i&&i.messages&&i.messages[n]}},customDataMessage:function(t,n){return e(t).data("msg-"+n.toLowerCase())||t.attributes&&e(t).attr("data-msg-"+n.toLowerCase())},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e];return void 0},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),this.customMetaMessage(t,n),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var i=this.defaultMessage(t,n.method),r=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,n.parameters,t):r.test(i)&&(i=e.validator.format(i.replace(r,"{$1}"),n.parameters)),this.errorList.push({message:i,element:t}),this.errorMap[t.name]=i,this.submitted[t.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t;for(e=0;this.errorList[e];e++){var n=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var i=this.errorsFor(t);i.length?(i.removeClass(this.settings.validClass).addClass(this.settings.errorClass),i.attr("generated")&&i.html(n)):(i=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(n||""),this.settings.wrapper&&(i=i.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(i).length||(this.settings.errorPlacement?this.settings.errorPlacement(i,e(t)):i.insertAfter(t))),!n&&this.settings.success&&(i.text(""),"string"==typeof this.settings.success?i.addClass(this.settings.success):this.settings.success(i,t)),this.toShow=this.toShow.add(i)},errorsFor:function(t){var n=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")===n})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find('[name="'+t+'"]')},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e,t){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},i=e(t).attr("class");return i&&e.each(i.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},i=e(t);for(var r in e.validator.methods){var o;"required"===r?(o=i.get(0).getAttribute(r),""===o&&(o=!0),o=!!o):o=i.attr(r),o?n[r]=o:i[0].getAttribute("type")===r&&(n[r]=!0)}return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},metadataRules:function(t){if(!e.metadata)return{};var n=e.data(t.form,"validator").settings.meta;return n?e(t).metadata()[n]:e(t).metadata()},staticRules:function(t){var n={},i=e.data(t.form,"validator");return i.settings.rules&&(n=e.validator.normalizeRule(i.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(i,r){if(r===!1)return void delete t[i];if(r.param||r.depends){var o=!0;switch(typeof r.depends){case"string":o=!!e(r.depends,n.form).length;break;case"function":o=r.depends.call(n,n)}o?t[i]=void 0!==r.param?r.param:!0:delete t[i]}}),e.each(t,function(i,r){t[i]=e.isFunction(r)?r(n):r}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,i){e.validator.methods[t]=n,e.validator.messages[t]=void 0!==i?i:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,i){if(!this.depend(i,n))return"dependency-mismatch";if("select"===n.nodeName.toLowerCase()){var r=e(n).val();return r&&r.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},remote:function(t,n,i){if(this.optional(n))return"dependency-mismatch";var r=this.previousValue(n);if(this.settings.messages[n.name]||(this.settings.messages[n.name]={}),r.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=r.message,i="string"==typeof i&&{url:i}||i,this.pending[n.name])return"pending";if(r.old===t)return r.valid;r.old=t;var o=this;this.startRequest(n);var a={};return a[n.name]=t,e.ajax(e.extend(!0,{url:i,mode:"abort",port:"validate"+n.name,dataType:"json",data:a,success:function(i){o.settings.messages[n.name].remote=r.originalMessage;var a=i===!0||"true"===i;if(a){var s=o.formSubmitted;o.prepareElement(n),o.formSubmitted=s,o.successList.push(n),delete o.invalid[n.name],o.showErrors()}else{var u={},l=i||o.defaultMessage(n,"remote");u[n.name]=r.message=e.isFunction(l)?l(t):l,o.invalid[n.name]=!0,o.showErrors(u)}r.valid=a,o.stopRequest(n,a)}},i)),"pending"},minlength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||r>=i},maxlength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||i>=r},rangelength:function(t,n,i){var r=e.isArray(t)?t.length:this.getLength(e.trim(t),n);return this.optional(n)||r>=i[0]&&r<=i[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||n>=e},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n=0,i=0,r=!1;e=e.replace(/\D/g,"");for(var o=e.length-1;o>=0;o--){var a=e.charAt(o);i=parseInt(a,10),r&&(i*=2)>9&&(i-=9),n+=i,r=!r}return n%10===0},equalTo:function(t,n,i){var r=e(i);return this.settings.onfocusout&&r.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===r.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,n,i){var r=e.port;"abort"===e.mode&&(t[r]&&t[r].abort(),t[r]=i)});else{var n=e.ajax;e.ajax=function(i){var r=("mode"in i?i:e.ajaxSettings).mode,o=("port"in i?i:e.ajaxSettings).port;return"abort"===r?(t[o]&&t[o].abort(),t[o]=n.apply(this,arguments)):n.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,n){function i(t){return t=e.event.fix(t),t.type=n,e.event.handle.call(this,t)}e.event.special[n]={setup:function(){this.addEventListener(t,i,!0)},teardown:function(){this.removeEventListener(t,i,!0)},handler:function(t){var i=arguments;return i[0]=e.event.fix(t),i[0].type=n,e.event.handle.apply(this,i)}}}),e.extend(e.fn,{validateDelegate:function(t,n,i){return this.bind(n,function(n){var r=e(n.target);return r.is(t)?i.apply(r,arguments):void 0})}})}(jQuery),function(e){var t,n,i,r,o=!1,a=!o,s=o,u=".pageless",l="scroll"+u,c="resize"+u,d={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",method:"get"};e.pageless=function(t){e.isFunction(t)?t.call():f(t)},e.pagelessReset=function(){d={container:window,currentPage:1,distance:100,pagination:".pagination",params:{},url:location.href,loaderImage:"https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",method:"get"},g(),d.end&&d.end.call()};var p=function(){return d.loaderHtml||'<div id="pageless-loader" style="display:none;text-align:center;width:100%;">  <div class="msg" style="color:#e9e9e9;font-size:2em"></div>  <img src="'+d.loaderImage+'" alt="loading more results" style="margin:10px auto" /></div>'},f=function(t){d.inited||(d.inited=a,t&&e.extend(d,t),i=d.container,r=e(i),d.pagination&&e(d.pagination).remove(),v())};e.fn.pageless=function(i){var r=e(this),o=e(i.loader,r);f(i),t=r,i.loader&&o.length?n=o:(n=e(p()),r.append(n),i.loaderHtml||e("#pageless-loader .msg").html(i.loaderMsg).css(i.msgStyles||{}))};var h=function(e){(s=e)?n&&n.fadeIn("normal"):n&&n.fadeOut("normal")},m=function(){if(null!=d.targetDiv){var t=e(d.targetDiv).offset().top,n=e(d.targetDiv).height(),o=e(window).scrollTop(),a=window.innerHeight;return t+n-o-a}return i===window?e(document).height()-r.scrollTop()-r.height():r[0].scrollHeight-r.scrollTop()-r.height()},g=function(){r.unbind(u)},v=function(){r.bind(l+" "+c,y).trigger(l)},y=function(){return d.totalPages<=d.currentPage?(g(),void(d.end&&d.end.call())):void(!s&&m()<d.distance&&(h(a),d.currentPage++,e.extend(d.params,{page:d.currentPage}),"post"==d.method?e.post(d.url,d.params,function(i){e.isFunction(d.scrape)?d.scrape(i):i,n?n.before(i):t.append(i),h(o),d.complete&&d.complete.call()},"html"):e.get(d.url,d.params,function(i){e.isFunction(d.scrape)?d.scrape(i):i,n?n.before(i):t.append(i),h(o),d.complete&&d.complete.call()},"html")))}}(jQuery),function(e){var t="hidden",n="border-box",i='<textarea tabindex="-1" style="position:absolute; top:-9999px; left:-9999px; right:auto; bottom:auto; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden">',r=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],o="oninput",a="onpropertychange",s=e(i)[0];s.setAttribute(o,"return"),e.isFunction(s[o])||a in s?e.fn.autosize=function(s){return this.each(function(){function u(){var e,n;c||(c=!0,l.value=p.value,l.style.overflowY=p.style.overflowY,l.style.width=f.css("width"),l.scrollTop=0,l.scrollTop=9e4,e=l.scrollTop,n=t,e>m?(e=m,n="scroll"):h>e&&(e=h),p.style.overflowY=n,p.style.height=e+v+"px",setTimeout(function(){c=!1},1))}var l,c,d,p=this,f=e(p),h=f.height(),m=parseInt(f.css("maxHeight"),10),g=r.length,v=0;if((f.css("box-sizing")===n||f.css("-moz-box-sizing")===n||f.css("-webkit-box-sizing")===n)&&(v=f.outerHeight()-f.height()),!f.data("mirror")&&!f.data("ismirror")){for(l=e(i).data("ismirror",!0).addClass(s||"autosizejs")[0],d="none"===f.css("resize")?"none":"horizontal",f.data("mirror",e(l)).css({overflow:t,overflowY:t,wordWrap:"break-word",resize:d}),m=m&&m>0?m:9e4;g--;)l.style[r[g]]=f.css(r[g]);e("body").append(l),a in p?o in p?p[o]=p.onkeyup=u:p[a]=u:p[o]=u,e(window).resize(u),f.bind("autosize",u),u()}})}:e.fn.autosize=function(){return this}}(jQuery),function(e){e.fn.lightbox_me=function(t){return this.each(function(){function n(){u[0].style;a.destroyOnClose?u.add(s).remove():u.add(s).hide(),a.parentLightbox&&a.parentLightbox.fadeIn(200),a.preventScroll&&e("body").css("overflow",""),l.remove(),u.undelegate(a.closeSelector,"click"),u.unbind("close",n),u.unbind("repositon",o),e(window).unbind("resize",r),e(window).unbind("resize",o),e(window).unbind("scroll",o),e(window).unbind("keyup.lightbox_me"),a.onClose()}function i(e){(27==e.keyCode||27==e.DOM_VK_ESCAPE&&0==e.which)&&a.closeEsc&&n()}function r(){e(window).height()<e(document).height()?(s.css({height:e(document).height()+"px"}),l.css({height:e(document).height()+"px"})):s.css({height:"100%"})}function o(){u[0].style;if(u.css({left:"50%",marginLeft:u.outerWidth()/2*-1,zIndex:a.zIndex+3}),u.height()+80>=e(window).height()&&"absolute"!=u.css("position")){var t=e(document).scrollTop()+40;u.css({position:"absolute",top:t+"px",marginTop:0})}else u.height()+80<e(window).height()&&(a.centered?u.css({position:"fixed",top:"50%",marginTop:u.outerHeight()/2*-1}):u.css({position:"fixed"}).css(a.modalCSS),a.preventScroll&&e("body").css("overflow","hidden"))}var a=e.extend({},e.fn.lightbox_me.defaults,t),s=e(),u=e(this),l=e('<iframe id="foo" style="z-index: '+(a.zIndex+1)+';border: none; margin: 0; padding: 0; position: absolute; width: 100%; height: 100%; top: 0; left: 0; filter: mask();"/>');if(a.showOverlay){var c=e(".js_lb_overlay:visible");s=e(c.length>0?'<div class="lb_overlay_clear js_lb_overlay"/>':'<div class="'+a.classPrefix+'_overlay js_lb_overlay"/>')}e("body").append(u.hide()).append(s),a.showOverlay&&(r(),s.css({position:"absolute",width:"100%",top:0,left:0,right:0,bottom:0,zIndex:a.zIndex+2,display:"none"}),s.hasClass("lb_overlay_clear")||s.css(a.overlayCSS)),a.showOverlay?s.fadeIn(a.overlaySpeed,function(){o(),u[a.appearEffect](a.lightboxSpeed,function(){r(),o(),a.onLoad()})}):(o(),u[a.appearEffect](a.lightboxSpeed,function(){a.onLoad()})),a.parentLightbox&&a.parentLightbox.fadeOut(200),e(window).resize(r).resize(o).scroll(o),e(window).bind("keyup.lightbox_me",i),a.closeClick&&s.click(function(e){n(),e.preventDefault}),u.delegate(a.closeSelector,"click",function(e){n(),e.preventDefault()}),u.bind("close",n),u.bind("reposition",o)})},e.fn.lightbox_me.defaults={appearEffect:"fadeIn",appearEase:"",overlaySpeed:250,lightboxSpeed:300,closeSelector:".close",closeClick:!0,closeEsc:!0,destroyOnClose:!1,showOverlay:!0,parentLightbox:!1,preventScroll:!1,onLoad:function(){},onClose:function(){},classPrefix:"lb",zIndex:999,centered:!1,modalCSS:{top:"40px"},overlayCSS:{background:"black",opacity:.3}}}(jQuery),function(e){function t(e){if(e in d.style)return e;var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in d.style)return e;for(var i=0;i<t.length;++i){var r=t[i]+n;if(r in d.style)return r}}function n(){return d.style[p.transform]="",d.style[p.transform]="rotateY(90deg)",""!==d.style[p.transform]}function i(e){return"string"==typeof e&&this.parse(e),this}function r(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function o(t){var n=[];return e.each(t,function(t){t=e.camelCase(t),t=e.transit.propertyMap[t]||e.cssProps[t]||t,t=u(t),-1===e.inArray(t,n)&&n.push(t)}),n}function a(t,n,i,r){var a=o(t);e.cssEase[i]&&(i=e.cssEase[i]);var s=""+c(n)+" "+i;parseInt(r,10)>0&&(s+=" "+c(r));var u=[];return e.each(a,function(e,t){u.push(t+" "+s)}),u.join(", ")}function s(t,n){n||(e.cssNumber[t]=!0),e.transit.propertyMap[t]=p.transform,e.cssHooks[t]={get:function(n){var i=e(n).css("transit:transform");
return i.get(t)},set:function(n,i){var r=e(n).css("transit:transform");r.setFromString(t,i),e(n).css({"transit:transform":r})}}}function u(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function l(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function c(t){var n=t;return e.fx.speeds[n]&&(n=e.fx.speeds[n]),l(n,"ms")}e.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var d=document.createElement("div"),p={},f=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;p.transition=t("transition"),p.transitionDelay=t("transitionDelay"),p.transform=t("transform"),p.transformOrigin=t("transformOrigin"),p.transform3d=n();var h={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=p.transitionEnd=h[p.transition]||null;for(var g in p)p.hasOwnProperty(g)&&"undefined"==typeof e.support[g]&&(e.support[g]=p[g]);d=null,e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},e.cssHooks["transit:transform"]={get:function(t){return e(t).data("transform")||new i},set:function(t,n){var r=n;r instanceof i||(r=new i(r)),"WebkitTransform"!==p.transform||f?t.style[p.transform]=r.toString():t.style[p.transform]=r.toString(!0),e(t).data("transform",r)}},e.cssHooks.transform={set:e.cssHooks["transit:transform"].set},e.fn.jquery<"1.8"&&(e.cssHooks.transformOrigin={get:function(e){return e.style[p.transformOrigin]},set:function(e,t){e.style[p.transformOrigin]=t}},e.cssHooks.transition={get:function(e){return e.style[p.transition]},set:function(e,t){e.style[p.transition]=t}}),s("scale"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),i.prototype={setFromString:function(e,t){var n="string"==typeof t?t.split(","):t.constructor===Array?t:[t];n.unshift(e),i.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=l(e,"deg")},rotateX:function(e){this.rotateX=l(e,"deg")},rotateY:function(e){this.rotateY=l(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=l(e,"deg")},skewY:function(e){this.skewY=l(e,"deg")},perspective:function(e){this.perspective=l(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&void 0!==e&&(this._translateX=l(e,"px")),null!==t&&void 0!==t&&(this._translateY=l(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=l(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,i){t.setFromString(n,i)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!p.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},e.fn.transition=e.fn.transit=function(t,n,i,o){var s=this,u=0,l=!0;"function"==typeof n&&(o=n,n=void 0),"function"==typeof i&&(o=i,i=void 0),"undefined"!=typeof t.easing&&(i=t.easing,delete t.easing),"undefined"!=typeof t.duration&&(n=t.duration,delete t.duration),"undefined"!=typeof t.complete&&(o=t.complete,delete t.complete),"undefined"!=typeof t.queue&&(l=t.queue,delete t.queue),"undefined"!=typeof t.delay&&(u=t.delay,delete t.delay),"undefined"==typeof n&&(n=e.fx.speeds._default),"undefined"==typeof i&&(i=e.cssEase._default),n=c(n);var d=a(t,n,i,u),f=e.transit.enabled&&p.transition,h=f?parseInt(n,10)+parseInt(u,10):0;if(0===h){var g=function(e){s.css(t),o&&o.apply(s),e&&e()};return r(s,l,g),s}var v={},y=function(n){var i=!1,r=function(){i&&s.unbind(m,r),h>0&&s.each(function(){this.style[p.transition]=v[this]||null}),"function"==typeof o&&o.apply(s),"function"==typeof n&&n()};h>0&&m&&e.transit.useTransitionEnd?(i=!0,s.bind(m,r)):window.setTimeout(r,h),s.each(function(){h>0&&(this.style[p.transition]=d),e(this).css(t)})},b=function(e){this.offsetWidth,y(e)};return r(s,l,b),this},e.transit.getTransitionValue=a}(jQuery),function(e,t,n){function i(e){var t={},i=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!i.test(n.name)&&(t[n.name]=n.value)}),t}function r(e,t){var i=this,r=n(i);if(i.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=t;r.focus()}else i.value="",r.removeClass("placeholder"),i==a()&&i.select()}function o(){var e,t=this,o=n(t),a=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(s){e=n("<input>").attr(n.extend(i(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":a}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":a}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",a).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function a(){try{return t.activeElement}catch(e){}}var s,u,l="[object OperaMini]"==Object.prototype.toString.call(e.operamini),c="placeholder"in t.createElement("input")&&!l,d="placeholder"in t.createElement("textarea")&&!l,p=n.fn,f=n.valHooks,h=n.propHooks;c&&d?(u=p.placeholder=function(){return this},u.input=u.textarea=!0):(u=p.placeholder=function(){var e=this;return e.filter((c?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},u.input=c,u.textarea=d,s={get:function(e){var t=n(e),i=t.data("placeholder-password");return i?i[0].value:t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,t){var i=n(e),s=i.data("placeholder-password");return s?s[0].value=t:i.data("placeholder-enabled")?(""==t?(e.value=t,e!=a()&&o.call(e)):i.hasClass("placeholder")?r.call(e,!0,t)||(e.value=t):e.value=t,i):e.value=t}},c||(f.input=s,h.value=s),d||(f.textarea=s,h.value=s),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e,t){var n=0,i=Array.prototype.slice,r=e.cleanData;e.cleanData=function(t){for(var n,i=0;null!=(n=t[i]);i++)try{e(n).triggerHandler("remove")}catch(o){}r(t)},e.widget=function(t,n,i){var r,o,a,s,u={},l=t.split(".")[0];t=t.split(".")[1],r=l+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][r.toLowerCase()]=function(t){return!!e.data(t,r)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new a(e,t)},e.extend(a,o,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),s=new n,s.options=e.widget.extend({},s.options),e.each(i,function(t,i){return e.isFunction(i)?void(u[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(u[t]=i)}),a.prototype=e.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||t:t},u,{constructor:a,namespace:l,widgetName:t,widgetFullName:r}),o?(e.each(o._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(n){for(var r,o,a=i.call(arguments,1),s=0,u=a.length;u>s;s++)for(r in a[s])o=a[s][r],a[s].hasOwnProperty(r)&&o!==t&&(e.isPlainObject(o)?n[r]=e.isPlainObject(n[r])?e.widget.extend({},n[r],o):e.widget.extend({},o):n[r]=o);return n},e.widget.bridge=function(n,r){var o=r.prototype.widgetFullName||n;e.fn[n]=function(a){var s="string"==typeof a,u=i.call(arguments,1),l=this;return a=!s&&u.length?e.widget.extend.apply(null,[a].concat(u)):a,s?this.each(function(){var i,r=e.data(this,o);return r?e.isFunction(r[a])&&"_"!==a.charAt(0)?(i=r[a].apply(r,u),i!==r&&i!==t?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+a+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(a||{})._init():e.data(this,o,new r(a,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,i){var r,o,a,s=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(s={},r=n.split("."),n=r.shift(),r.length){for(o=s[n]=e.widget.extend({},this.options[n]),a=0;a<r.length-1;a++)o[r[a]]=o[r[a]]||{},o=o[r[a]];if(n=r.pop(),1===arguments.length)return o[n]===t?null:o[n];o[n]=i}else{if(1===arguments.length)return this.options[n]===t?null:this.options[n];s[n]=i}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,i){var r,o=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=i.match(/^(\w+)\s*(.*)$/),l=u[1]+o.eventNamespace,c=u[2];c?r.delegate(c,l,s):n.bind(l,s)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,i){var r,o,a=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),a=!e.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&e.effects&&e.effects.effect[s]?i[t](r):s!==t&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){e(this)[t](),o&&o.call(i[0]),n()})}})}),!function(e){"use strict";var t=function(e,n,i){var r,o,a=document.createElement("img");if(a.onerror=n,a.onload=function(){!o||i&&i.noRevoke||t.revokeObjectURL(o),n&&n(t.scale(a,i))},t.isInstanceOf("Blob",e)||t.isInstanceOf("File",e))r=o=t.createObjectURL(e),a._type=e.type;else{if("string"!=typeof e)return!1;r=e,i&&i.crossOrigin&&(a.crossOrigin=i.crossOrigin)}return r?(a.src=r,a):t.readFile(e,function(e){var t=e.target;t&&t.result?a.src=t.result:n&&n(e)})},n=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;t.isInstanceOf=function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},t.transformCoordinates=function(){},t.getTransformedOptions=function(e){return e},t.renderImageToCanvas=function(e,t,n,i,r,o,a,s,u,l){return e.getContext("2d").drawImage(t,n,i,r,o,a,s,u,l),e},t.hasCanvasOption=function(e){return e.canvas||e.crop},t.scale=function(e,n){n=n||{};var i,r,o,a,s,u,l,c,d,p=document.createElement("canvas"),f=e.getContext||t.hasCanvasOption(n)&&p.getContext,h=e.naturalWidth||e.width,m=e.naturalHeight||e.height,g=h,v=m,y=function(){var e=Math.max((o||g)/g,(a||v)/v);e>1&&(g=Math.ceil(g*e),v=Math.ceil(v*e))},b=function(){var e=Math.min((i||g)/g,(r||v)/v);1>e&&(g=Math.ceil(g*e),v=Math.ceil(v*e))};return f&&(n=t.getTransformedOptions(n),l=n.left||0,c=n.top||0,n.sourceWidth?(s=n.sourceWidth,void 0!==n.right&&void 0===n.left&&(l=h-s-n.right)):s=h-l-(n.right||0),n.sourceHeight?(u=n.sourceHeight,void 0!==n.bottom&&void 0===n.top&&(c=m-u-n.bottom)):u=m-c-(n.bottom||0),g=s,v=u),i=n.maxWidth,r=n.maxHeight,o=n.minWidth,a=n.minHeight,f&&i&&r&&n.crop?(g=i,v=r,d=s/u-i/r,0>d?(u=r*s/i,void 0===n.top&&void 0===n.bottom&&(c=(m-u)/2)):d>0&&(s=i*u/r,void 0===n.left&&void 0===n.right&&(l=(h-s)/2))):((n.contain||n.cover)&&(o=i=i||o,a=r=r||a),n.cover?(b(),y()):(y(),b())),f?(p.width=g,p.height=v,t.transformCoordinates(p,n),t.renderImageToCanvas(p,e,l,c,s,u,0,0,g,v)):(e.width=g,e.height=v,e)},t.createObjectURL=function(e){return n?n.createObjectURL(e):!1},t.revokeObjectURL=function(e){return n?n.revokeObjectURL(e):!1},t.readFile=function(e,t,n){if(window.FileReader){var i=new FileReader;if(i.onload=i.onerror=t,n=n||"readAsDataURL",i[n])return i[n](e),i}return!1},"function"==typeof define&&define.amd?define(function(){return t}):e.loadImage=t}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var t=e.renderImageToCanvas;e.detectSubsampling=function(e){var t,n;return e.width*e.height>1048576?(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-e.width+1,0),0===n.getImageData(0,0,1,1).data[3]):!1},e.detectVerticalSquash=function(e,t){var n,i,r,o,a,s=e.naturalHeight||e.height,u=document.createElement("canvas"),l=u.getContext("2d");for(t&&(s/=2),u.width=1,u.height=s,l.drawImage(e,0,0),n=l.getImageData(0,0,1,s).data,i=0,r=s,o=s;o>i;)a=n[4*(o-1)+3],0===a?r=o:i=o,o=r+i>>1;return o/s||1},e.renderImageToCanvas=function(n,i,r,o,a,s,u,l,c,d){if("image/jpeg"===i._type){var p,f,h,m,g=n.getContext("2d"),v=document.createElement("canvas"),y=1024,b=v.getContext("2d");if(v.width=y,v.height=y,g.save(),p=e.detectSubsampling(i),p&&(r/=2,o/=2,a/=2,s/=2),f=e.detectVerticalSquash(i,p),p||1!==f){for(o*=f,c=Math.ceil(y*c/a),d=Math.ceil(y*d/s/f),l=0,m=0;s>m;){for(u=0,h=0;a>h;)b.clearRect(0,0,y,y),b.drawImage(i,r,o,a,s,-h,-m,a,s),g.drawImage(v,0,0,y,y,u,l,c,d),h+=y,u+=c;m+=y,l+=d}return g.restore(),n}}return t(n,i,r,o,a,s,u,l,c,d)}}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=e.hasCanvasOption;e.hasCanvasOption=function(e){return t(e)||e.orientation},e.transformCoordinates=function(e,t){var n=e.getContext("2d"),i=e.width,r=e.height,o=t.orientation;if(o)switch(o>4&&(e.width=r,e.height=i),o){case 2:n.translate(i,0),n.scale(-1,1);break;case 3:n.translate(i,r),n.rotate(Math.PI);break;case 4:n.translate(0,r),n.scale(1,-1);break;case 5:n.rotate(.5*Math.PI),n.scale(1,-1);break;case 6:n.rotate(.5*Math.PI),n.translate(0,-r);break;case 7:n.rotate(.5*Math.PI),n.translate(i,-r),n.scale(-1,1);break;case 8:n.rotate(-.5*Math.PI),n.translate(-i,0)}},e.getTransformedOptions=function(e){if(!e.orientation||1===e.orientation)return e;var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);switch(e.orientation){case 2:n.left=e.right,n.right=e.left;break;case 3:n.left=e.right,n.top=e.bottom,n.right=e.left,n.bottom=e.top;break;case 4:n.top=e.bottom,n.bottom=e.top;break;case 5:n.left=e.top,n.top=e.left,n.right=e.bottom,n.bottom=e.right;break;case 6:n.left=e.top,n.top=e.right,n.right=e.bottom,n.bottom=e.left;break;case 7:n.left=e.bottom,n.top=e.right,n.right=e.top,n.bottom=e.left;break;case 8:n.left=e.bottom,n.top=e.left,n.right=e.top,n.bottom=e.right}return e.orientation>4&&(n.maxWidth=e.maxHeight,n.maxHeight=e.maxWidth,n.minWidth=e.minHeight,n.minHeight=e.minWidth,n.sourceWidth=e.sourceHeight,n.sourceHeight=e.sourceWidth),n}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image"],e):e(window.loadImage)}(function(e){"use strict";var t=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);e.blobSlice=t&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},e.metaDataParsers={jpeg:{65505:[]}},e.parseMetaData=function(t,n,i){i=i||{};var r=this,o=i.maxMetaDataSize||262144,a={},s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&e.blobSlice);(s||!e.readFile(e.blobSlice.call(t,0,o),function(t){if(t.target.error)return console.log(t.target.error),void n(a);var o,s,u,l,c=t.target.result,d=new DataView(c),p=2,f=d.byteLength-4,h=p;if(65496===d.getUint16(0)){for(;f>p&&(o=d.getUint16(p),o>=65504&&65519>=o||65534===o);){if(s=d.getUint16(p+2)+2,p+s>d.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(u=e.metaDataParsers.jpeg[o])for(l=0;l<u.length;l+=1)u[l].call(r,d,p,s,a,i);p+=s,h=p}!i.disableImageHead&&h>6&&(a.imageHead=c.slice?c.slice(0,h):new Uint8Array(c).subarray(0,h))}else console.log("Invalid JPEG file: Missing JPEG marker.");n(a)},"readAsArrayBuffer"))&&n(a)}}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap=function(){return this},e.ExifMap.prototype.map={Orientation:274},e.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},e.getExifThumbnail=function(e,t,n){var i,r,o;if(!n||t+n>e.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(i=[],r=0;n>r;r+=1)o=e.getUint8(t+r),i.push((16>o?"0":"")+o.toString(16));return"data:image/jpeg,%"+i.join("%")},e.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},e.exifTagTypes[7]=e.exifTagTypes[1],e.getExifValue=function(t,n,i,r,o,a){var s,u,l,c,d,p,f=e.exifTagTypes[r];if(!f)return void console.log("Invalid Exif data: Invalid tag type.");if(s=f.size*o,u=s>4?n+t.getUint32(i+8,a):i+8,u+s>t.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===o)return f.getValue(t,u,a);for(l=[],c=0;o>c;c+=1)l[c]=f.getValue(t,u+c*f.size,a);if(f.ascii){for(d="",c=0;c<l.length&&(p=l[c],"\x00"!==p);c+=1)d+=p;return d}return l},e.parseExifTag=function(t,n,i,r,o){var a=t.getUint16(i,r);o.exif[a]=e.getExifValue(t,n,i,t.getUint16(i+2,r),t.getUint32(i+4,r),r)},e.parseExifTags=function(e,t,n,i,r){var o,a,s;if(n+6>e.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(o=e.getUint16(n,i),a=n+2+12*o,a+4>e.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(s=0;o>s;s+=1)this.parseExifTag(e,t,n+2+12*s,i,r);return e.getUint32(a,i)},e.parseExifData=function(t,n,i,r,o){if(!o.disableExif){var a,s,u,l=n+10;if(1165519206===t.getUint32(n+4)){if(l+8>t.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(n+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:a=!0;break;case 19789:a=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,a))return void console.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,a),r.exif=new e.ExifMap,s=e.parseExifTags(t,l,l+s,a,r),s&&!o.disableExifThumbnail&&(u={exif:{}},s=e.parseExifTags(t,l,l+s,a,u),u.exif[513]&&(r.exif.Thumbnail=e.getExifThumbnail(t,l+u.exif[513],u.exif[514]))),r.exif[34665]&&!o.disableExifSub&&e.parseExifTags(t,l,l+r.exif[34665],a,r),r.exif[34853]&&!o.disableExifGps&&e.parseExifTags(t,l,l+r.exif[34853],a,r)}}},e.metaDataParsers.jpeg[65505].push(e.parseExifData)}),function(e){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,n=e.tags,i=e.map;for(t in n)n.hasOwnProperty(t)&&(i[n[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,n={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e],t&&(n[t]=this.getText(t)));return n}}),!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,n=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),i=n&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),r=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,o=(n||r)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,o,a,s,u,l;for(t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),o=new ArrayBuffer(t.length),a=new Uint8Array(o),s=0;s<t.length;s+=1)a[s]=t.charCodeAt(s);return u=e.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?a:o],{type:u}):(l=new r,l.append(o),l.getBlob(u))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,n,i){e(i&&t.toDataURL&&o?o(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:t.toDataURL&&o&&(t.toBlob=function(e,t,n){e(o(this.toDataURL(t,n)))})),"function"==typeof define&&define.amd?define(function(){return o}):e.dataURLtoBlob=o}(this),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],e):e(window.jQuery)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{
options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,n){return t=this.messages[t]||t.toString(),n&&e.each(n,function(e,n){t=t.replace("{"+e+"}",n)}),t},formData:function(e){return e.serializeArray()},add:function(t,n){return t.isDefaultPrevented()?!1:void((n.autoUpload||n.autoUpload!==!1&&e(this).fileupload("option","autoUpload"))&&n.process().done(function(){n.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){var e=this.slice||this.webkitSlice||this.mozSlice;return e.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,n){var i=e-this.timestamp;return(!this.bitrate||!n||i>n)&&(this.bitrate=(t-this.loaded)*(1e3/i)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var n;return"function"===e.type(t.formData)?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(n=[],e.each(t.formData,function(e,t){n.push({name:e,value:t})}),n):[]},_getTotal:function(t){var n=0;return e.each(t,function(e,t){n+=t.size||1}),n},_initProgressObject:function(t){var n={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,n):t._progress=n},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(t,n){if(t.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(n._time&&n.progressInterval&&r-n._time<n.progressInterval&&t.loaded!==t.total)return;n._time=r,i=Math.floor(t.loaded/t.total*(n.chunkSize||n._progress.total))+(n.uploadedBytes||0),this._progress.loaded+=i-n._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,n.bitrateInterval),n._progress.loaded=n.loaded=i,n._progress.bitrate=n.bitrate=n._bitrateTimer.getBitrate(r,i,n.bitrateInterval),this._trigger("progress",e.Event("progress",{delegatedEvent:t}),n),this._trigger("progressall",e.Event("progressall",{delegatedEvent:t}),this._progress)}},_initProgressListener:function(t){var n=this,i=t.xhr?t.xhr():e.ajaxSettings.xhr();i.upload&&(e(i.upload).bind("progress",function(e){var i=e.originalEvent;e.lengthComputable=i.lengthComputable,e.loaded=i.loaded,e.total=i.total,n._onProgress(e,t)}),t.xhr=function(){return i})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var n,i=this,r=t.files[0],o=t.multipart||!e.support.xhrFileUpload,a="array"===e.type(t.paramName)?t.paramName[0]:t.paramName;t.headers=e.extend({},t.headers),t.contentRange&&(t.headers["Content-Range"]=t.contentRange),o&&!t.blob&&this._isInstanceOf("File",r)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(r.name)+'"'),o?e.support.xhrFormDataFileUpload&&(t.postMessage?(n=this._getFormData(t),t.blob?n.push({name:a,value:t.blob}):e.each(t.files,function(i,r){n.push({name:"array"===e.type(t.paramName)&&t.paramName[i]||a,value:r})})):(i._isInstanceOf("FormData",t.formData)?n=t.formData:(n=new FormData,e.each(this._getFormData(t),function(e,t){n.append(t.name,t.value)})),t.blob?n.append(a,t.blob,r.name):e.each(t.files,function(r,o){(i._isInstanceOf("File",o)||i._isInstanceOf("Blob",o))&&n.append("array"===e.type(t.paramName)&&t.paramName[r]||a,o,o.uploadName||o.name)})),t.data=n):(t.contentType=r.type||"application/octet-stream",t.data=t.blob||r),t.blob=null},_initIframeSettings:function(t){var n=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&n&&n!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var n=e(t.fileInput),i=t.paramName;return i?e.isArray(i)||(i=[i]):(i=[],n.each(function(){for(var t=e(this),n=t.prop("name")||"files[]",r=(t.prop("files")||[1]).length;r;)i.push(n),r-=1}),i.length||(i=[n.prop("name")||"files[]"])),i},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||"string"===e.type(t.form.prop("method"))&&t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var n=e.extend({},this.options,t);return this._initFormSettings(n),this._initDataSettings(n),n},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,n,i){var r=e.Deferred(),o=r.promise();return n=n||this.options.context||o,t===!0?r.resolveWith(n,i):t===!1&&r.rejectWith(n,i),o.abort=r.promise,this._enhancePromise(o)},_addConvenienceMethods:function(t,n){var i=this,r=function(t){return e.Deferred().resolveWith(i,t).promise()};n.process=function(t,o){return(t||o)&&(n._processQueue=this._processQueue=(this._processQueue||r([this])).pipe(function(){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():r(arguments)}).pipe(t,o)),this._processQueue||r([this])},n.submit=function(){return"pending"!==this.state()&&(n.jqXHR=this.jqXHR=i._trigger("submit",e.Event("submit",{delegatedEvent:t}),this)!==!1&&i._onSend(t,this)),this.jqXHR||i._getXHRPromise()},n.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",i._trigger("fail",null,this),i._getXHRPromise(!1))},n.state=function(){return this.jqXHR?i._getDeferredState(this.jqXHR):this._processQueue?i._getDeferredState(this._processQueue):void 0},n.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===i._getDeferredState(this._processQueue)},n.progress=function(){return this._progress},n.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),n=t&&t.split("-"),i=n&&n.length>1&&parseInt(n[1],10);return i&&i+1},_chunkedUpload:function(t,n){t.uploadedBytes=t.uploadedBytes||0;var i,r,o=this,a=t.files[0],s=a.size,u=t.uploadedBytes,l=t.maxChunkSize||s,c=this._blobSlice,d=e.Deferred(),p=d.promise();return this._isXHRUpload(t)&&c&&(u||s>l)&&!t.data?n?!0:u>=s?(a.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",a.error])):(r=function(){var n=e.extend({},t),p=n._progress.loaded;n.blob=c.call(a,u,u+l,a.type),n.chunkSize=n.blob.size,n.contentRange="bytes "+u+"-"+(u+n.chunkSize-1)+"/"+s,o._initXHRData(n),o._initProgressListener(n),i=(o._trigger("chunksend",null,n)!==!1&&e.ajax(n)||o._getXHRPromise(!1,n.context)).done(function(i,a,l){u=o._getUploadedBytes(l)||u+n.chunkSize,p+n.chunkSize-n._progress.loaded&&o._onProgress(e.Event("progress",{lengthComputable:!0,loaded:u-n.uploadedBytes,total:u-n.uploadedBytes}),n),t.uploadedBytes=n.uploadedBytes=u,n.result=i,n.textStatus=a,n.jqXHR=l,o._trigger("chunkdone",null,n),o._trigger("chunkalways",null,n),s>u?r():d.resolveWith(n.context,[i,a,l])}).fail(function(e,t,i){n.jqXHR=e,n.textStatus=t,n.errorThrown=i,o._trigger("chunkfail",null,n),o._trigger("chunkalways",null,n),d.rejectWith(n.context,[e,t,i])})},this._enhancePromise(p),p.abort=function(){return i.abort()},r(),p):!1},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,n,i,r){var o=r._progress.total,a=r._response;r._progress.loaded<o&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:o,total:o}),r),a.result=r.result=t,a.textStatus=r.textStatus=n,a.jqXHR=r.jqXHR=i,this._trigger("done",null,r)},_onFail:function(e,t,n,i){var r=i._response;i.recalculateProgress&&(this._progress.loaded-=i._progress.loaded,this._progress.total-=i._progress.total),r.jqXHR=i.jqXHR=e,r.textStatus=i.textStatus=t,r.errorThrown=i.errorThrown=n,this._trigger("fail",null,i)},_onAlways:function(e,t,n,i){this._trigger("always",null,i)},_onSend:function(t,n){n.submit||this._addConvenienceMethods(t,n);var i,r,o,a,s=this,u=s._getAJAXSettings(n),l=function(){return s._sending+=1,u._bitrateTimer=new s._BitrateTimer,i=i||((r||s._trigger("send",e.Event("send",{delegatedEvent:t}),u)===!1)&&s._getXHRPromise(!1,u.context,r)||s._chunkedUpload(u)||e.ajax(u)).done(function(e,t,n){s._onDone(e,t,n,u)}).fail(function(e,t,n){s._onFail(e,t,n,u)}).always(function(e,t,n){if(s._onAlways(e,t,n,u),s._sending-=1,s._active-=1,u.limitConcurrentUploads&&u.limitConcurrentUploads>s._sending)for(var i=s._slots.shift();i;){if("pending"===s._getDeferredState(i)){i.resolve();break}i=s._slots.shift()}0===s._active&&s._trigger("stop")})};return this._beforeSend(t,u),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(o=e.Deferred(),this._slots.push(o),a=o.pipe(l)):(this._sequence=this._sequence.pipe(l,l),a=this._sequence),a.abort=function(){return r=[void 0,"abort","abort"],i?i.abort():(o&&o.rejectWith(u.context,r),l())},this._enhancePromise(a)):l()},_onAdd:function(t,n){var i,r,o,a,s=this,u=!0,l=e.extend({},this.options,n),c=n.files,d=c.length,p=l.limitMultiFileUploads,f=l.limitMultiFileUploadSize,h=l.limitMultiFileUploadSizeOverhead,m=0,g=this._getParamName(l),v=0;if(!f||d&&void 0!==c[0].size||(f=void 0),(l.singleFileUploads||p||f)&&this._isXHRUpload(l))if(l.singleFileUploads||f||!p)if(!l.singleFileUploads&&f)for(o=[],i=[],a=0;d>a;a+=1)m+=c[a].size+h,(a+1===d||m+c[a+1].size+h>f||p&&a+1-v>=p)&&(o.push(c.slice(v,a+1)),r=g.slice(v,a+1),r.length||(r=g),i.push(r),v=a+1,m=0);else i=g;else for(o=[],i=[],a=0;d>a;a+=p)o.push(c.slice(a,a+p)),r=g.slice(a,a+p),r.length||(r=g),i.push(r);else o=[c],i=[g];return n.originalFiles=c,e.each(o||c,function(r,a){var l=e.extend({},n);return l.files=o?a:[a],l.paramName=i[r],s._initResponseObject(l),s._initProgressObject(l),s._addConvenienceMethods(t,l),u=s._trigger("add",e.Event("add",{delegatedEvent:t}),l)}),u},_replaceFileInput:function(t){var n=t.clone(!0);e("<form></form>").append(n)[0].reset(),t.after(n).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,i){return i===t[0]?n[0]:i}),t[0]===this.element[0]&&(this.element=n)},_handleFileTreeEntry:function(t,n){var i,r=this,o=e.Deferred(),a=function(e){e&&!e.entry&&(e.entry=t),o.resolve([e])};return n=n||"",t.isFile?t._file?(t._file.relativePath=n,o.resolve(t._file)):t.file(function(e){e.relativePath=n,o.resolve(e)},a):t.isDirectory?(i=t.createReader(),i.readEntries(function(e){r._handleFileTreeEntries(e,n+t.name+"/").done(function(e){o.resolve(e)}).fail(a)},a)):o.resolve([]),o.promise()},_handleFileTreeEntries:function(t,n){var i=this;return e.when.apply(e,e.map(t,function(e){return i._handleFileTreeEntry(e,n)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var n=t.items;return n&&n.length&&(n[0].webkitGetAsEntry||n[0].getAsEntry)?this._handleFileTreeEntries(e.map(n,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var n,i,r=t.prop("webkitEntries")||t.prop("entries");if(r&&r.length)return this._handleFileTreeEntries(r);if(n=e.makeArray(t.prop("files")),n.length)void 0===n[0].name&&n[0].fileName&&e.each(n,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(i=t.prop("value"),!i)return e.Deferred().resolve([]).promise();n=[{name:i.replace(/^.*\\/,"")}]}return e.Deferred().resolve(n).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var n=this,i={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(i.fileInput).always(function(r){i.files=r,n.options.replaceFileInput&&n._replaceFileInput(i.fileInput),n._trigger("change",e.Event("change",{delegatedEvent:t}),i)!==!1&&n._onAdd(t,i)})},_onPaste:function(t){var n=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,i={files:[]};n&&n.length&&(e.each(n,function(e,t){var n=t.getAsFile&&t.getAsFile();n&&i.files.push(n)}),this._trigger("paste",e.Event("paste",{delegatedEvent:t}),i)!==!1&&this._onAdd(t,i))},_onDrop:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=this,i=t.dataTransfer,r={};i&&i.files&&i.files.length&&(t.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,n._trigger("drop",e.Event("drop",{delegatedEvent:t}),r)!==!1&&n._onAdd(t,r)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var n=t.dataTransfer;n&&-1!==e.inArray("Files",n.types)&&this._trigger("dragover",e.Event("dragover",{delegatedEvent:t}))!==!1&&(t.preventDefault(),n.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,n){var i=-1!==e.inArray(t,this._specialOptions);i&&this._destroyEventHandlers(),this._super(t,n),i&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),n=t.pop();return t.shift(),new RegExp(t.join("/"),n)},_isRegExpOption:function(t,n){return"url"!==t&&"string"===e.type(n)&&/^\/.*\/[igm]{0,3}$/.test(n)},_initDataAttributes:function(){var t=this,n=this.options,i=e(this.element[0].cloneNode(!1));e.each(i.data(),function(e,r){var o="data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();i.attr(o)&&(t._isRegExpOption(e,r)&&(r=t._getRegExp(r)),n[e]=r)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var n=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,n._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var n,i,r=this,o=e.Deferred(),a=o.promise();return a.abort=function(){return i=!0,n?n.abort():(o.reject(null,"abort","abort"),a)},this._getFileInputFiles(t.fileInput).always(function(e){if(!i){if(!e.length)return void o.reject();t.files=e,n=r._onSend(null,t).then(function(e,t,n){o.resolve(e,t,n)},function(e,t,n){o.reject(e,t,n)})}}),this._enhancePromise(a)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],e):e(window.jQuery)}(function(e){"use strict";var t=e.blueimp.fileupload.prototype.options.add;e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{processQueue:[],add:function(n,i){var r=e(this);i.process(function(){return r.fileupload("process",i)}),t.call(this,n,i)}},processActions:{},_processFile:function(t,n){var i=this,r=e.Deferred().resolveWith(i,[t]),o=r.promise();return this._trigger("process",null,t),e.each(t.processQueue,function(t,r){var a=function(t){return n.errorThrown?e.Deferred().rejectWith(i,[n]).promise():i.processActions[r.action].call(i,t,r)};o=o.pipe(a,r.always&&a)}),o.done(function(){i._trigger("processdone",null,t),i._trigger("processalways",null,t)}).fail(function(){i._trigger("processfail",null,t),i._trigger("processalways",null,t)}),o},_transformProcessQueue:function(t){var n=[];e.each(t.processQueue,function(){var i={},r=this.action,o=this.prefix===!0?r:this.prefix;e.each(this,function(n,r){"string"===e.type(r)&&"@"===r.charAt(0)?i[n]=t[r.slice(1)||(o?o+n.charAt(0).toUpperCase()+n.slice(1):n)]:i[n]=r}),n.push(i)}),t.processQueue=n},processing:function(){return this._processing},process:function(t){var n=this,i=e.extend({},this.options,t);return i.processQueue&&i.processQueue.length&&(this._transformProcessQueue(i),0===this._processing&&this._trigger("processstart"),e.each(t.files,function(r){var o=r?e.extend({},i):i,a=function(){return t.errorThrown?e.Deferred().rejectWith(n,[t]).promise():n._processFile(o,t)};o.index=r,n._processing+=1,n._processingQueue=n._processingQueue.pipe(a,a).always(function(){n._processing-=1,0===n._processing&&n._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=e.Deferred().resolveWith(this).promise()}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload-process"],e):e(window.jQuery)}(function(e){"use strict";e.blueimp.fileupload.prototype.options.processQueue.push({action:"validate",always:!0,acceptFileTypes:"@",maxFileSize:"@",minFileSize:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{getNumberOfFiles:e.noop,messages:{maxNumberOfFiles:"Maximum number of files exceeded",acceptFileTypes:"File type not allowed",maxFileSize:"File is too large",minFileSize:"File is too small"}},processActions:{validate:function(t,n){if(n.disabled)return t;var i,r=e.Deferred(),o=this.options,a=t.files[t.index];return(n.minFileSize||n.maxFileSize)&&(i=a.size),"number"===e.type(n.maxNumberOfFiles)&&(o.getNumberOfFiles()||0)+t.files.length>n.maxNumberOfFiles?a.error=o.i18n("maxNumberOfFiles"):!n.acceptFileTypes||n.acceptFileTypes.test(a.type)||n.acceptFileTypes.test(a.name)?i>n.maxFileSize?a.error=o.i18n("maxFileSize"):"number"===e.type(i)&&i<n.minFileSize?a.error=o.i18n("minFileSize"):delete a.error:a.error=o.i18n("acceptFileTypes"),a.error||t.files.error?(t.files.error=!0,r.rejectWith(this,[t])):r.resolveWith(this,[t]),r.promise()}}})}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],e):e(window.jQuery,window.loadImage)}(function(e,t){"use strict";e.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),e.widget("blueimp.fileupload",e.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(n,i){if(i.disabled)return n;var r=this,o=n.files[n.index],a=e.Deferred();return"number"===e.type(i.maxFileSize)&&o.size>i.maxFileSize||i.fileTypes&&!i.fileTypes.test(o.type)||!t(o,function(e){e.src&&(n.img=e),a.resolveWith(r,[n])},i)?n:a.promise()},resizeImage:function(n,i){if(i.disabled||!n.canvas&&!n.img)return n;i=e.extend({canvas:!0},i);var r,o=this,a=e.Deferred(),s=i.canvas&&n.canvas||n.img,u=function(e){e&&(e.width!==s.width||e.height!==s.height||i.forceResize)&&(n[e.getContext?"canvas":"img"]=e),n.preview=e,a.resolveWith(o,[n])};if(n.exif){if(i.orientation===!0&&(i.orientation=n.exif.get("Orientation")),i.thumbnail&&(r=n.exif.get("Thumbnail")))return t(r,u,i),a.promise();n.orientation?delete i.orientation:n.orientation=i.orientation}return s?(u(t.scale(s,i)),a.promise()):n},saveImage:function(t,n){if(!t.canvas||n.disabled)return t;var i=this,r=t.files[t.index],o=e.Deferred();return t.canvas.toBlob?(t.canvas.toBlob(function(e){e.name||(r.type===e.type?e.name=r.name:r.name&&(e.name=r.name.replace(/\..+$/,"."+e.type.substr(6)))),r.type!==e.type&&delete t.imageHead,t.files[t.index]=e,o.resolveWith(i,[t])},n.type||r.type,n.quality),o.promise()):t},loadImageMetaData:function(n,i){if(i.disabled)return n;var r=this,o=e.Deferred();return t.parseMetaData(n.files[n.index],function(t){e.extend(n,t),o.resolveWith(r,[n])},i),o.promise()},saveImageMetaData:function(e,t){if(!(e.imageHead&&e.canvas&&e.canvas.toBlob)||t.disabled)return e;var n=e.files[e.index],i=new Blob([e.imageHead,this._blobSlice.call(n,20)],{type:n.type});return i.name=n.name,e.files[e.index]=i,e},setImage:function(e,t){return e.preview&&!t.disabled&&(e.files[e.index][t.name||"preview"]=e.preview),e},deleteImageReferences:function(e,t){return t.disabled||(delete e.img,delete e.canvas,delete e.preview,delete e.imageHead),e}}})}),function(e,t){"function"==typeof define&&define.amd?define("sifter",t):"object"==typeof exports?module.exports=t():e.Sifter=t()}(this,function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(e=i(String(e||"").toLowerCase()),!e||!e.length)return[];var t,n,o,s,u=[],l=e.split(/ +/);for(t=0,n=l.length;n>t;t++){if(o=r(l[t]),this.settings.diacritics)for(s in a)a.hasOwnProperty(s)&&(o=o.replace(new RegExp(s,"g"),a[s]));u.push({string:l[t],regex:new RegExp(o,"i")})}return u},e.prototype.iterator=function(e,t){var n;n=o(e)?Array.prototype.forEach||function(e){for(var t=0,n=this.length;n>t;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)},n.apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var n,i,r,o;n=this,e=n.prepareSearch(e,t),r=e.tokens,i=e.options.fields,o=r.length;var a=function(e,t){var n,i;return e?(e=String(e||""),i=e.search(t.regex),-1===i?0:(n=t.string.length/e.length,0===i&&(n+=.5),n)):0},s=function(){var e=i.length;return e?1===e?function(e,t){return a(t[i[0]],e)}:function(t,n){for(var r=0,o=0;e>r;r++)o+=a(n[i[r]],t);return o/e}:function(){return 0}}();return o?1===o?function(e){return s(r[0],e)}:"and"===e.options.conjunction?function(e){for(var t,n=0,i=0;o>n;n++){if(t=s(r[n],e),0>=t)return 0;i+=t}return i/o}:function(e){for(var t=0,n=0;o>t;t++)n+=s(r[t],e);return n/o}:function(){return 0}},e.prototype.getSortFunction=function(e,n){var i,r,o,a,s,u,l,c,d,p,f;if(o=this,e=o.prepareSearch(e,n),f=!e.query&&n.sort_empty||n.sort,d=function(e,t){return"$score"===e?t.score:o.items[t.id][e]},s=[],f)for(i=0,r=f.length;r>i;i++)(e.query||"$score"!==f[i].field)&&s.push(f[i]);if(e.query){for(p=!0,i=0,r=s.length;r>i;i++)if("$score"===s[i].field){p=!1;break}p&&s.unshift({field:"$score",direction:"desc"})}else for(i=0,r=s.length;r>i;i++)if("$score"===s[i].field){s.splice(i,1);break}for(c=[],i=0,r=s.length;r>i;i++)c.push("desc"===s[i].direction?-1:1);return u=s.length,u?1===u?(a=s[0].field,l=c[0],function(e,n){return l*t(d(a,e),d(a,n))}):function(e,n){var i,r,o;for(i=0;u>i;i++)if(o=s[i].field,r=c[i]*t(d(o,e),d(o,n)))return r;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;t=n({},t);var i=t.fields,r=t.sort,a=t.sort_empty;return i&&!o(i)&&(t.fields=[i]),r&&!o(r)&&(t.sort=[r]),a&&!o(a)&&(t.sort_empty=[a]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var n,i,r,o,a=this;return i=this.prepareSearch(e,t),t=i.options,e=i.query,o=t.score||a.getScoreFunction(i),e.length?a.iterator(a.items,function(e,r){n=o(e),(t.filter===!1||n>0)&&i.items.push({score:n,id:r})}):a.iterator(a.items,function(e,t){i.items.push({score:1,id:t})}),r=a.getSortFunction(i,t),r&&i.items.sort(r),i.total=i.items.length,"number"==typeof t.limit&&(i.items=i.items.slice(0,t.limit)),i};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:t>e?-1:0:(e=s(String(e||"")),t=s(String(t||"")),e>t?1:t>e?-1:0)},n=function(e,t){var n,i,r,o;for(n=1,i=arguments.length;i>n;n++)if(o=arguments[n])for(r in o)o.hasOwnProperty(r)&&(e[r]=o[r]);return e},i=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},r=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[a\xc0\xc1\xc2\xc3\xc4\xc5\xe0\xe1\xe2\xe3\xe4\xe5\u0100\u0101\u0105\u0104]",c:"[c\xc7\xe7\u0107\u0106\u010d\u010c]",d:"[d\u0111\u0110\u010f\u010e]",e:"[e\xc8\xc9\xca\xcb\xe8\xe9\xea\xeb\u011b\u011a\u0112\u0113\u0119\u0118]",i:"[i\xcc\xcd\xce\xcf\xec\xed\xee\xef\u012a\u012b]",l:"[l\u0142\u0141]",n:"[n\xd1\xf1\u0148\u0147\u0144\u0143]",o:"[o\xd2\xd3\xd4\xd5\xd5\xd6\xd8\xf2\xf3\xf4\xf5\xf6\xf8\u014c\u014d]",r:"[r\u0159\u0158]",s:"[s\u0160\u0161\u015b\u015a]",t:"[t\u0165\u0164]",u:"[u\xd9\xda\xdb\xdc\xf9\xfa\xfb\xfc\u016f\u016e\u016a\u016b]",y:"[y\u0178\xff\xfd\xdd]",z:"[z\u017d\u017e\u017c\u017b\u017a\u0179]"},s=function(){var e,t,n,i,r="",o={};for(n in a)if(a.hasOwnProperty(n))for(i=a[n].substring(2,a[n].length-1),r+=i,e=0,t=i.length;t>e;e++)o[i.charAt(e)]=n;var s=new RegExp("["+r+"]","g");return function(e){return e.replace(s,function(e){return o[e]}).toLowerCase()}}();return e}),function(e,t){"function"==typeof define&&define.amd?define("microplugin",t):"object"==typeof exports?module.exports=t():e.MicroPlugin=t()}(this,function(){var e={};e.mixin=function(e){e.plugins={},e.prototype.initializePlugins=function(e){var n,i,r,o=this,a=[];if(o.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(n=0,i=e.length;i>n;n++)"string"==typeof e[n]?a.push(e[n]):(o.plugins.settings[e[n].name]=e[n].options,a.push(e[n].name));else if(e)for(r in e)e.hasOwnProperty(r)&&(o.plugins.settings[r]=e[r],a.push(r));for(;a.length;)o.require(a.shift())},e.prototype.loadPlugin=function(t){var n=this,i=n.plugins,r=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=r.fn.apply(n,[n.plugins.settings[t]||{}]),i.names.push(t)},e.prototype.require=function(e){var t=this,n=t.plugins;if(!t.plugins.loaded.hasOwnProperty(e)){if(n.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');t.loadPlugin(e)}return n.loaded[e]},e.define=function(t,n){e.plugins[t]={name:t,fn:n}}};var t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e}),function(e,t){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("sifter"),require("microplugin")):e.Selectize=t(e.jQuery,e.Sifter,e.MicroPlugin)}(this,function(e,t,n){"use strict";var i=function(e,t){if("string"!=typeof t||t.length){var n="string"==typeof t?new RegExp(t,"i"):t,i=function(e){var t=0;if(3===e.nodeType){var r=e.data.search(n);if(r>=0&&e.data.length>0){var o=e.data.match(n),a=document.createElement("span");a.className="highlight";var s=e.splitText(r),u=(s.splitText(o[0].length),s.cloneNode(!0));a.appendChild(u),s.parentNode.replaceChild(a,s),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var l=0;l<e.childNodes.length;++l)l+=i(e.childNodes[l]);return t};return e.each(function(){i(this)})}},r=function(){};r.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["on","off","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=r.prototype[t[n]]};var o=/Mac/.test(navigator.userAgent),a=65,s=13,u=27,l=37,c=38,d=80,p=39,f=40,h=78,m=8,g=46,v=16,y=o?91:17,b=o?18:17,_=9,w=1,x=2,C=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,S=function(e){return"undefined"!=typeof e},k=function(e){return"undefined"==typeof e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},T=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},E=function(e){return(e+"").replace(/\$/g,"$$$$")},D={};D.before=function(e,t,n){var i=e[t];e[t]=function(){return n.apply(e,arguments),i.apply(e,arguments)}},D.after=function(e,t,n){var i=e[t];e[t]=function(){var t=i.apply(e,arguments);return n.apply(e,arguments),t}};var I=function(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}},F=function(e,t){var n;return function(){var i=this,r=arguments;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(i,r)},t)}},$=function(e,t,n){var i,r=e.trigger,o={};e.trigger=function(){var n=arguments[0];return-1===t.indexOf(n)?r.apply(e,arguments):void(o[n]=arguments)},n.apply(e,[]),e.trigger=r;for(i in o)o.hasOwnProperty(i)&&r.apply(e,o[i])},j=function(e,t,n,i){e.on(t,n,function(t){for(var n=t.target;n&&n.parentNode!==e[0];)n=n.parentNode;return t.currentTarget=n,i.apply(this,[t])})},A=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-e.value.length),t.start=n.text.length-i,t.length=i}return t},M=function(e,t,n){var i,r,o={};if(n)for(i=0,r=n.length;r>i;i++)o[n[i]]=e.css(n[i]);else o=e.css();t.css(o)},O=function(t,n){if(!t)return 0;var i=e("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).appendTo("body");M(n,i,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var r=i.width();return i.remove(),r},B=function(e){var t=null,n=function(n,i){var r,o,a,s,u,l,c,d;n=n||window.event||{},i=i||{},n.metaKey||n.altKey||(i.force||e.data("grow")!==!1)&&(r=e.val(),n.type&&"keydown"===n.type.toLowerCase()&&(o=n.keyCode,a=o>=97&&122>=o||o>=65&&90>=o||o>=48&&57>=o||32===o,o===g||o===m?(d=A(e[0]),d.length?r=r.substring(0,d.start)+r.substring(d.start+d.length):o===m&&d.start?r=r.substring(0,d.start-1)+r.substring(d.start+1):o===g&&"undefined"!=typeof d.start&&(r=r.substring(0,d.start)+r.substring(d.start+1))):a&&(l=n.shiftKey,
c=String.fromCharCode(n.keyCode),c=l?c.toUpperCase():c.toLowerCase(),r+=c)),s=e.attr("placeholder"),!r&&s&&(r=s),u=O(r,e)+4,u!==t&&(t=u,e.width(u),e.triggerHandler("resize")))};e.on("keydown keyup update blur",n),n()},P=function(n,i){var r,o,a,s,u=this;s=n[0],s.selectize=u;var l=window.getComputedStyle&&window.getComputedStyle(s,null);if(a=l?l.getPropertyValue("direction"):s.currentStyle&&s.currentStyle.direction,a=a||n.parents("[dir]:first").attr("dir")||"",e.extend(u,{order:0,settings:i,$input:n,tabIndex:n.attr("tabindex")||"",tagType:"select"===s.tagName.toLowerCase()?w:x,rtl:/rtl/i.test(a),eventNS:".selectize"+ ++P.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:n.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===i.loadThrottle?u.onSearchChange:F(u.onSearchChange,i.loadThrottle)}),u.sifter=new t(this.options,{diacritics:i.diacritics}),u.settings.options){for(r=0,o=u.settings.options.length;o>r;r++)u.registerOption(u.settings.options[r]);delete u.settings.options}if(u.settings.optgroups){for(r=0,o=u.settings.optgroups.length;o>r;r++)u.registerOptionGroup(u.settings.optgroups[r]);delete u.settings.optgroups}u.settings.mode=u.settings.mode||(1===u.settings.maxItems?"single":"multi"),"boolean"!=typeof u.settings.hideSelected&&(u.settings.hideSelected="multi"===u.settings.mode),u.initializePlugins(u.settings.plugins),u.setupCallbacks(),u.setupTemplates(),u.setup()};return r.mixin(P),n.mixin(P),e.extend(P.prototype,{setup:function(){var t,n,i,r,a,s,u,l,c,d=this,p=d.settings,f=d.eventNS,h=e(window),m=e(document),g=d.$input;if(u=d.settings.mode,l=g.attr("class")||"",t=e("<div>").addClass(p.wrapperClass).addClass(l).addClass(u),n=e("<div>").addClass(p.inputClass).addClass("items").appendTo(t),i=e('<input type="text" autocomplete="off" />').appendTo(n).attr("tabindex",g.is(":disabled")?"-1":d.tabIndex),s=e(p.dropdownParent||t),r=e("<div>").addClass(p.dropdownClass).addClass(u).hide().appendTo(s),a=e("<div>").addClass(p.dropdownContentClass).appendTo(r),d.settings.copyClassesToDropdown&&r.addClass(l),t.css({width:g[0].style.width}),d.plugins.names.length&&(c="plugin-"+d.plugins.names.join(" plugin-"),t.addClass(c),r.addClass(c)),(null===p.maxItems||p.maxItems>1)&&d.tagType===w&&g.attr("multiple","multiple"),d.settings.placeholder&&i.attr("placeholder",p.placeholder),!d.settings.splitOn&&d.settings.delimiter){var _=d.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");d.settings.splitOn=new RegExp("\\s*"+_+"+\\s*")}g.attr("autocorrect")&&i.attr("autocorrect",g.attr("autocorrect")),g.attr("autocapitalize")&&i.attr("autocapitalize",g.attr("autocapitalize")),d.$wrapper=t,d.$control=n,d.$control_input=i,d.$dropdown=r,d.$dropdown_content=a,r.on("mouseenter","[data-selectable]",function(){return d.onOptionHover.apply(d,arguments)}),r.on("mousedown click","[data-selectable]",function(){return d.onOptionSelect.apply(d,arguments)}),j(n,"mousedown","*:not(input)",function(){return d.onItemSelect.apply(d,arguments)}),B(i),n.on({mousedown:function(){return d.onMouseDown.apply(d,arguments)},click:function(){return d.onClick.apply(d,arguments)}}),i.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return d.onKeyDown.apply(d,arguments)},keyup:function(){return d.onKeyUp.apply(d,arguments)},keypress:function(){return d.onKeyPress.apply(d,arguments)},resize:function(){d.positionDropdown.apply(d,[])},blur:function(){return d.onBlur.apply(d,arguments)},focus:function(){return d.ignoreBlur=!1,d.onFocus.apply(d,arguments)},paste:function(){return d.onPaste.apply(d,arguments)}}),m.on("keydown"+f,function(e){d.isCmdDown=e[o?"metaKey":"ctrlKey"],d.isCtrlDown=e[o?"altKey":"ctrlKey"],d.isShiftDown=e.shiftKey}),m.on("keyup"+f,function(e){e.keyCode===b&&(d.isCtrlDown=!1),e.keyCode===v&&(d.isShiftDown=!1),e.keyCode===y&&(d.isCmdDown=!1)}),m.on("mousedown"+f,function(e){if(d.isFocused){if(e.target===d.$dropdown[0]||e.target.parentNode===d.$dropdown[0])return!1;d.$control.has(e.target).length||e.target===d.$control[0]||d.blur(e.target)}}),h.on(["scroll"+f,"resize"+f].join(" "),function(){d.isOpen&&d.positionDropdown.apply(d,arguments)}),h.on("mousemove"+f,function(){d.ignoreHover=!1}),this.revertSettings={$children:g.children().detach(),tabindex:g.attr("tabindex")},g.attr("tabindex",-1).hide().after(d.$wrapper),e.isArray(p.items)&&(d.setValue(p.items),delete p.items),C&&g.on("invalid"+f,function(e){e.preventDefault(),d.isInvalid=!0,d.refreshState()}),d.updateOriginalInput(),d.refreshItems(),d.refreshState(),d.updatePlaceholder(),d.isSetup=!0,g.is(":disabled")&&d.disable(),d.on("change",this.onChange),g.data("selectize",d),g.addClass("selectized"),d.trigger("initialize"),p.preload===!0&&d.onSearchChange("")},setupTemplates:function(){var t=this,n=t.settings.labelField,i=t.settings.optgroupLabelField,r={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,t){return'<div class="option">'+t(e[n])+"</div>"},item:function(e,t){return'<div class="item">'+t(e[n])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};t.settings.render=e.extend({},r,t.settings.render)},setupCallbacks:function(){var e,t,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in n)n.hasOwnProperty(e)&&(t=this.settings[n[e]],t&&this.on(e,t))},onClick:function(e){var t=this;t.isFocused||(t.focus(),e.preventDefault())},onMouseDown:function(t){var n=this,i=t.isDefaultPrevented();e(t.target);if(n.isFocused){if(t.target!==n.$control_input[0])return"single"===n.settings.mode?n.isOpen?n.close():n.open():i||n.setActiveItem(null),!1}else i||window.setTimeout(function(){n.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var n=this;n.isFull()||n.isInputHidden||n.isLocked?t.preventDefault():n.settings.splitOn&&setTimeout(function(){for(var t=e.trim(n.$control_input.val()||"").split(n.settings.splitOn),i=0,r=t.length;r>i;i++)n.createItem(t[i])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var t=(e.target===this.$control_input[0],this);if(t.isLocked)return void(e.keyCode!==_&&e.preventDefault());switch(e.keyCode){case a:if(t.isCmdDown)return void t.selectAll();break;case u:return void(t.isOpen&&(e.preventDefault(),e.stopPropagation(),t.close()));case h:if(!e.ctrlKey||e.altKey)break;case f:if(!t.isOpen&&t.hasOptions)t.open();else if(t.$activeOption){t.ignoreHover=!0;var n=t.getAdjacentOption(t.$activeOption,1);n.length&&t.setActiveOption(n,!0,!0)}return void e.preventDefault();case d:if(!e.ctrlKey||e.altKey)break;case c:if(t.$activeOption){t.ignoreHover=!0;var i=t.getAdjacentOption(t.$activeOption,-1);i.length&&t.setActiveOption(i,!0,!0)}return void e.preventDefault();case s:return void(t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),e.preventDefault()));case l:return void t.advanceSelection(-1,e);case p:return void t.advanceSelection(1,e);case _:return t.settings.selectOnTab&&t.isOpen&&t.$activeOption&&(t.onOptionSelect({currentTarget:t.$activeOption}),t.isFull()||e.preventDefault()),void(t.settings.create&&t.createItem()&&e.preventDefault());case m:case g:return void t.deleteSelection(e)}return!t.isFull()&&!t.isInputHidden||(o?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var t=this;if(t.isLocked)return e&&e.preventDefault();var n=t.$control_input.val()||"";t.lastValue!==n&&(t.lastValue=n,t.onSearchChange(n),t.refreshOptions(),t.trigger("type",n))},onSearchChange:function(e){var t=this,n=t.settings.load;n&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(i){n.apply(t,[e,i])})))},onFocus:function(e){var t=this,n=t.isFocused;return t.isDisabled?(t.blur(),e&&e.preventDefault(),!1):void(t.ignoreFocus||(t.isFocused=!0,"focus"===t.settings.preload&&t.onSearchChange(""),n||t.trigger("focus"),t.$activeItems.length||(t.showInput(),t.setActiveItem(null),t.refreshOptions(!!t.settings.openOnFocus)),t.refreshState()))},onBlur:function(e,t){var n=this;if(n.isFocused&&(n.isFocused=!1,!n.ignoreFocus)){if(!n.ignoreBlur&&document.activeElement===n.$dropdown_content[0])return n.ignoreBlur=!0,void n.onFocus(e);var i=function(){n.close(),n.setTextboxValue(""),n.setActiveItem(null),n.setActiveOption(null),n.setCaret(n.items.length),n.refreshState(),(t||document.body).focus(),n.ignoreFocus=!1,n.trigger("blur")};n.ignoreFocus=!0,n.settings.create&&n.settings.createOnBlur?n.createItem(null,!1,i):i()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var n,i,r=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),i=e(t.currentTarget),i.hasClass("create")?r.createItem(null,function(){r.settings.closeAfterSelect&&r.close()}):(n=i.attr("data-value"),"undefined"!=typeof n&&(r.lastQuery=null,r.setTextboxValue(""),r.addItem(n),r.settings.closeAfterSelect?r.close():!r.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&r.setActiveOption(r.getOption(n))))},onItemSelect:function(e){var t=this;t.isLocked||"multi"===t.settings.mode&&(e.preventDefault(),t.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,n=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||n.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input,n=t.val()!==e;n&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return this.tagType===w&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){var n=t?[]:["change"];$(this,n,function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,n){var i,r,o,a,s,u,l,c,d=this;if("single"!==d.settings.mode){if(t=e(t),!t.length)return e(d.$activeItems).removeClass("active"),d.$activeItems=[],void(d.isFocused&&d.showInput());if(i=n&&n.type.toLowerCase(),"mousedown"===i&&d.isShiftDown&&d.$activeItems.length){for(c=d.$control.children(".active:last"),a=Array.prototype.indexOf.apply(d.$control[0].childNodes,[c[0]]),s=Array.prototype.indexOf.apply(d.$control[0].childNodes,[t[0]]),a>s&&(l=a,a=s,s=l),r=a;s>=r;r++)u=d.$control[0].childNodes[r],-1===d.$activeItems.indexOf(u)&&(e(u).addClass("active"),d.$activeItems.push(u));n.preventDefault()}else"mousedown"===i&&d.isCtrlDown||"keydown"===i&&this.isShiftDown?t.hasClass("active")?(o=d.$activeItems.indexOf(t[0]),d.$activeItems.splice(o,1),t.removeClass("active")):d.$activeItems.push(t.addClass("active")[0]):(e(d.$activeItems).removeClass("active"),d.$activeItems=[t.addClass("active")[0]]);d.hideInput(),this.isFocused||d.focus()}},setActiveOption:function(t,n,i){var r,o,a,s,u,l=this;l.$activeOption&&l.$activeOption.removeClass("active"),l.$activeOption=null,t=e(t),t.length&&(l.$activeOption=t.addClass("active"),(n||!S(n))&&(r=l.$dropdown_content.height(),o=l.$activeOption.outerHeight(!0),n=l.$dropdown_content.scrollTop()||0,a=l.$activeOption.offset().top-l.$dropdown_content.offset().top+n,s=a,u=a-r+o,a+o>r+n?l.$dropdown_content.stop().animate({scrollTop:u},i?l.settings.scrollDuration:0):n>a&&l.$dropdown_content.stop().animate({scrollTop:s},i?l.settings.scrollDuration:0)))},selectAll:function(){var e=this;"single"!==e.settings.mode&&(e.$activeItems=Array.prototype.slice.apply(e.$control.children(":not(input)").addClass("active")),e.$activeItems.length&&(e.hideInput(),e.close()),e.focus())},hideInput:function(){var e=this;e.setTextboxValue(""),e.$control_input.css({opacity:0,position:"absolute",left:e.rtl?1e4:-1e4}),e.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t}},search:function(t){var n,i,r,o=this,a=o.settings,s=this.getSearchOptions();if(a.score&&(r=o.settings.score.apply(this,[t]),"function"!=typeof r))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==o.lastQuery?(o.lastQuery=t,i=o.sifter.search(t,e.extend(s,{score:r})),o.currentResults=i):i=e.extend(!0,{},o.currentResults),a.hideSelected)for(n=i.items.length-1;n>=0;n--)-1!==o.items.indexOf(k(i.items[n].id))&&i.items.splice(n,1);return i},refreshOptions:function(t){var n,r,o,a,s,u,l,c,d,p,f,h,m,g,v,y;"undefined"==typeof t&&(t=!0);var b=this,_=e.trim(b.$control_input.val()),w=b.search(_),x=b.$dropdown_content,C=b.$activeOption&&k(b.$activeOption.attr("data-value"));for(a=w.items.length,"number"==typeof b.settings.maxOptions&&(a=Math.min(a,b.settings.maxOptions)),s={},u=[],n=0;a>n;n++)for(l=b.options[w.items[n].id],c=b.render("option",l),d=l[b.settings.optgroupField]||"",p=e.isArray(d)?d:[d],r=0,o=p&&p.length;o>r;r++)d=p[r],b.optgroups.hasOwnProperty(d)||(d=""),s.hasOwnProperty(d)||(s[d]=[],u.push(d)),s[d].push(c);for(this.settings.lockOptgroupOrder&&u.sort(function(e,t){var n=b.optgroups[e].$order||0,i=b.optgroups[t].$order||0;return n-i}),f=[],n=0,a=u.length;a>n;n++)d=u[n],b.optgroups.hasOwnProperty(d)&&s[d].length?(h=b.render("optgroup_header",b.optgroups[d])||"",h+=s[d].join(""),f.push(b.render("optgroup",e.extend({},b.optgroups[d],{html:h})))):f.push(s[d].join(""));if(x.html(f.join("")),b.settings.highlight&&w.query.length&&w.tokens.length)for(n=0,a=w.tokens.length;a>n;n++)i(x,w.tokens[n].regex);if(!b.settings.hideSelected)for(n=0,a=b.items.length;a>n;n++)b.getOption(b.items[n]).addClass("selected");m=b.canCreate(_),m&&(x.prepend(b.render("option_create",{input:_})),y=e(x[0].childNodes[0])),b.hasOptions=w.items.length>0||m,b.hasOptions?(w.items.length>0?(v=C&&b.getOption(C),v&&v.length?g=v:"single"===b.settings.mode&&b.items.length&&(g=b.getOption(b.items[0])),g&&g.length||(g=y&&!b.settings.addPrecedence?b.getAdjacentOption(y,1):x.find("[data-selectable]:first"))):g=y,b.setActiveOption(g),t&&!b.isOpen&&b.open()):(b.setActiveOption(null),t&&b.isOpen&&b.close())},addOption:function(t){var n,i,r,o=this;if(e.isArray(t))for(n=0,i=t.length;i>n;n++)o.addOption(t[n]);else(r=o.registerOption(t))&&(o.userOptions[r]=!0,o.lastQuery=null,o.trigger("option_add",r,t))},registerOption:function(e){var t=k(e[this.settings.valueField]);return!t||this.options.hasOwnProperty(t)?!1:(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=k(e[this.settings.optgroupValueField]);return t?(e.$order=e.$order||++this.order,this.optgroups[t]=e,t):!1},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,n){var i,r,o,a,s,u,l,c=this;if(t=k(t),o=k(n[c.settings.valueField]),null!==t&&c.options.hasOwnProperty(t)){if("string"!=typeof o)throw new Error("Value must be set in option data");l=c.options[t].$order,o!==t&&(delete c.options[t],a=c.items.indexOf(t),-1!==a&&c.items.splice(a,1,o)),n.$order=n.$order||l,c.options[o]=n,s=c.renderCache.item,u=c.renderCache.option,s&&(delete s[t],delete s[o]),u&&(delete u[t],delete u[o]),-1!==c.items.indexOf(o)&&(i=c.getItem(t),r=e(c.render("item",n)),i.hasClass("active")&&r.addClass("active"),i.replaceWith(r)),c.lastQuery=null,c.isOpen&&c.refreshOptions(!1)}},removeOption:function(e,t){var n=this;e=k(e);var i=n.renderCache.item,r=n.renderCache.option;i&&delete i[e],r&&delete r[e],delete n.userOptions[e],delete n.options[e],n.lastQuery=null,n.trigger("option_remove",e),n.removeItem(e,t)},clearOptions:function(){var e=this;e.loadedSearches={},e.userOptions={},e.renderCache={},e.options=e.sifter.items={},e.lastQuery=null,e.trigger("option_clear"),e.clear()},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,n){var i=this.$dropdown.find("[data-selectable]"),r=i.index(t)+n;return r>=0&&r<i.length?i.eq(r):e()},getElementWithValue:function(t,n){if(t=k(t),"undefined"!=typeof t&&null!==t)for(var i=0,r=n.length;r>i;i++)if(n[i].getAttribute("data-value")===t)return e(n[i]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,n){for(var i=e.isArray(t)?t:[t],r=0,o=i.length;o>r;r++)this.isPending=o-1>r,this.addItem(i[r],n)},addItem:function(t,n){var i=n?[]:["change"];$(this,i,function(){var i,r,o,a,s,u=this,l=u.settings.mode;return t=k(t),-1!==u.items.indexOf(t)?void("single"===l&&u.close()):void(u.options.hasOwnProperty(t)&&("single"===l&&u.clear(n),"multi"===l&&u.isFull()||(i=e(u.render("item",u.options[t])),s=u.isFull(),u.items.splice(u.caretPos,0,t),u.insertAtCaret(i),(!u.isPending||!s&&u.isFull())&&u.refreshState(),u.isSetup&&(o=u.$dropdown_content.find("[data-selectable]"),u.isPending||(r=u.getOption(t),a=u.getAdjacentOption(r,1).attr("data-value"),u.refreshOptions(u.isFocused&&"single"!==l),a&&u.setActiveOption(u.getOption(a))),!o.length||u.isFull()?u.close():u.positionDropdown(),u.updatePlaceholder(),u.trigger("item_add",t,i),u.updateOriginalInput({silent:n})))))})},removeItem:function(e,t){var n,i,r,o=this;n="object"==typeof e?e:o.getItem(e),e=k(n.attr("data-value")),i=o.items.indexOf(e),-1!==i&&(n.remove(),n.hasClass("active")&&(r=o.$activeItems.indexOf(n[0]),o.$activeItems.splice(r,1)),o.items.splice(i,1),o.lastQuery=null,!o.settings.persist&&o.userOptions.hasOwnProperty(e)&&o.removeOption(e,t),i<o.caretPos&&o.setCaret(o.caretPos-1),o.refreshState(),o.updatePlaceholder(),o.updateOriginalInput({silent:t}),o.positionDropdown(),o.trigger("item_remove",e,n))},createItem:function(t,n){var i=this,r=i.caretPos;t=t||e.trim(i.$control_input.val()||"");var o=arguments[arguments.length-1];if("function"!=typeof o&&(o=function(){}),"boolean"!=typeof n&&(n=!0),!i.canCreate(t))return o(),!1;i.lock();var a="function"==typeof i.settings.create?this.settings.create:function(e){var t={};return t[i.settings.labelField]=e,t[i.settings.valueField]=e,t},s=I(function(e){if(i.unlock(),!e||"object"!=typeof e)return o();var t=k(e[i.settings.valueField]);return"string"!=typeof t?o():(i.setTextboxValue(""),i.addOption(e),i.setCaret(r),i.addItem(t),i.refreshOptions(n&&"single"!==i.settings.mode),void o(e))}),u=a.apply(this,[t,s]);return"undefined"!=typeof u&&s(u),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var e,t=this;t.isRequired&&(t.items.length&&(t.isInvalid=!1),t.$control_input.prop("required",e)),t.refreshClasses()},refreshClasses:function(){var t=this,n=t.isFull(),i=t.isLocked;t.$wrapper.toggleClass("rtl",t.rtl),t.$control.toggleClass("focus",t.isFocused).toggleClass("disabled",t.isDisabled).toggleClass("required",t.isRequired).toggleClass("invalid",t.isInvalid).toggleClass("locked",i).toggleClass("full",n).toggleClass("not-full",!n).toggleClass("input-active",t.isFocused&&!t.isInputHidden).toggleClass("dropdown-active",t.isOpen).toggleClass("has-options",!e.isEmptyObject(t.options)).toggleClass("has-items",t.items.length>0),t.$control_input.data("grow",!n&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,n,i,r,o=this;if(e=e||{},o.tagType===w){for(i=[],t=0,n=o.items.length;n>t;t++)r=o.options[o.items[t]][o.settings.labelField]||"",i.push('<option value="'+T(o.items[t])+'" selected="selected">'+T(r)+"</option>");i.length||this.$input.attr("multiple")||i.push('<option value="" selected="selected"></option>'),o.$input.html(i.join(""))}else o.$input.val(o.getValue()),o.$input.attr("value",o.$input.val());o.isSetup&&(e.silent||o.trigger("change",o.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){var e=this;e.isLocked||e.isOpen||"multi"===e.settings.mode&&e.isFull()||(e.focus(),e.isOpen=!0,e.refreshState(),e.$dropdown.css({visibility:"hidden",display:"block"}),e.positionDropdown(),e.$dropdown.css({visibility:"visible"}),e.trigger("dropdown_open",e.$dropdown))},close:function(){var e=this,t=e.isOpen;"single"===e.settings.mode&&e.items.length&&e.hideInput(),e.isOpen=!1,e.$dropdown.hide(),e.setActiveOption(null),e.refreshState(),t&&e.trigger("dropdown_close",e.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e.outerWidth(),top:t.top,left:t.left})},clear:function(e){var t=this;t.items.length&&(t.$control.children(":not(input)").remove(),t.items=[],t.lastQuery=null,t.setCaret(0),t.setActiveItem(null),t.updatePlaceholder(),t.updateOriginalInput({silent:e}),t.refreshState(),t.showInput(),t.trigger("clear"))},insertAtCaret:function(t){var n=Math.min(this.caretPos,this.items.length);0===n?this.$control.prepend(t):e(this.$control[0].childNodes[n]).before(t),this.setCaret(n+1)},deleteSelection:function(t){var n,i,r,o,a,s,u,l,c,d=this;if(r=t&&t.keyCode===m?-1:1,o=A(d.$control_input[0]),d.$activeOption&&!d.settings.hideSelected&&(u=d.getAdjacentOption(d.$activeOption,-1).attr("data-value")),a=[],d.$activeItems.length){for(c=d.$control.children(".active:"+(r>0?"last":"first")),s=d.$control.children(":not(input)").index(c),r>0&&s++,n=0,i=d.$activeItems.length;i>n;n++)a.push(e(d.$activeItems[n]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(d.isFocused||"single"===d.settings.mode)&&d.items.length&&(0>r&&0===o.start&&0===o.length?a.push(d.items[d.caretPos-1]):r>0&&o.start===d.$control_input.val().length&&a.push(d.items[d.caretPos]));if(!a.length||"function"==typeof d.settings.onDelete&&d.settings.onDelete.apply(d,[a])===!1)return!1;for("undefined"!=typeof s&&d.setCaret(s);a.length;)d.removeItem(a.pop());return d.showInput(),d.positionDropdown(),d.refreshOptions(!0),u&&(l=d.getOption(u),l.length&&d.setActiveOption(l)),!0},advanceSelection:function(e,t){var n,i,r,o,a,s,u=this;0!==e&&(u.rtl&&(e*=-1),n=e>0?"last":"first",i=A(u.$control_input[0]),u.isFocused&&!u.isInputHidden?(o=u.$control_input.val().length,a=0>e?0===i.start&&0===i.length:i.start===o,a&&!o&&u.advanceCaret(e,t)):(s=u.$control.children(".active:"+n),s.length&&(r=u.$control.children(":not(input)").index(s),u.setActiveItem(null),u.setCaret(e>0?r+1:r))))},advanceCaret:function(e,t){var n,i,r=this;0!==e&&(n=e>0?"next":"prev",r.isShiftDown?(i=r.$control_input[n](),i.length&&(r.hideInput(),r.setActiveItem(i),t&&t.preventDefault())):r.setCaret(r.caretPos+e))},setCaret:function(t){var n=this;if(t="single"===n.settings.mode?n.items.length:Math.max(0,Math.min(n.items.length,t)),!n.isPending){var i,r,o,a;for(o=n.$control.children(":not(input)"),i=0,r=o.length;r>i;i++)a=e(o[i]).detach(),t>i?n.$control_input.before(a):n.$control.append(a)}n.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var e=this;e.$input.prop("disabled",!0),e.$control_input.prop("disabled",!0).prop("tabindex",-1),e.isDisabled=!0,e.lock()},enable:function(){var e=this;e.$input.prop("disabled",!1),e.$control_input.prop("disabled",!1).prop("tabindex",e.tabIndex),e.isDisabled=!1,e.unlock()},destroy:function(){var t=this,n=t.eventNS,i=t.revertSettings;t.trigger("destroy"),t.off(),t.$wrapper.remove(),t.$dropdown.remove(),t.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),t.$control_input.removeData("grow"),t.$input.removeData("selectize"),e(window).off(n),e(document).off(n),e(document.body).off(n),delete t.$input[0].selectize},render:function(e,t){var n,i,r="",o=!1,a=this,s=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===e||"item"===e)&&(n=k(t[a.settings.valueField]),o=!!n),o&&(S(a.renderCache[e])||(a.renderCache[e]={}),a.renderCache[e].hasOwnProperty(n))?a.renderCache[e][n]:(r=a.settings.render[e].apply(this,[t,T]),("option"===e||"option_create"===e)&&(r=r.replace(s,"<$1 data-selectable")),"optgroup"===e&&(i=t[a.settings.optgroupValueField]||"",r=r.replace(s,'<$1 data-group="'+E(T(i))+'"')),("option"===e||"item"===e)&&(r=r.replace(s,'<$1 data-value="'+E(T(n||""))+'"')),o&&(a.renderCache[e][n]=r),r)},clearCache:function(e){var t=this;"undefined"==typeof e?t.renderCache={}:delete t.renderCache[e]},canCreate:function(e){var t=this;if(!t.settings.create)return!1;var n=t.settings.createFilter;return e.length&&("function"!=typeof n||n.apply(t,[e]))&&("string"!=typeof n||new RegExp(n).test(e))&&(!(n instanceof RegExp)||n.test(e))}}),P.count=0,P.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var n=e.fn.selectize.defaults,i=e.extend({},n,t),r=i.dataAttr,o=i.labelField,a=i.valueField,s=i.optgroupField,u=i.optgroupLabelField,l=i.optgroupValueField,c=function(t,n){var s,u,l,c,d=t.attr(r);if(d)for(n.options=JSON.parse(d),s=0,u=n.options.length;u>s;s++)n.items.push(n.options[s][a]);else{var p=e.trim(t.val()||"");if(!i.allowEmptyOption&&!p.length)return;for(l=p.split(i.delimiter),s=0,u=l.length;u>s;s++)c={},c[o]=l[s],c[a]=l[s],n.options.push(c);n.items=l}},d=function(t,n){var c,d,p,f,h=n.options,m={},g=function(e){var t=r&&e.attr(r);return"string"==typeof t&&t.length?JSON.parse(t):null},v=function(t,r){t=e(t);var u=k(t.attr("value"));if(u||i.allowEmptyOption)if(m.hasOwnProperty(u)){if(r){var l=m[u][s];l?e.isArray(l)?l.push(r):m[u][s]=[l,r]:m[u][s]=r}}else{var c=g(t)||{};c[o]=c[o]||t.text(),c[a]=c[a]||u,c[s]=c[s]||r,m[u]=c,h.push(c),t.is(":selected")&&n.items.push(u)}},y=function(t){var i,r,o,a,s;for(t=e(t),o=t.attr("label"),o&&(a=g(t)||{},a[u]=o,a[l]=o,n.optgroups.push(a)),s=e("option",t),i=0,r=s.length;r>i;i++)v(s[i],o)};for(n.maxItems=t.attr("multiple")?null:1,f=t.children(),c=0,d=f.length;d>c;c++)p=f[c].tagName.toLowerCase(),"optgroup"===p?y(f[c]):"option"===p&&v(f[c])};return this.each(function(){if(!this.selectize){var r,o=e(this),a=this.tagName.toLowerCase(),s=o.attr("placeholder")||o.attr("data-placeholder");s||i.allowEmptyOption||(s=o.children('option[value=""]').text());var u={placeholder:s,options:[],optgroups:[],items:[]};"select"===a?d(o,u):c(o,u),r=new P(o,e.extend(!0,{},n,u,t))}})},e.fn.selectize.defaults=P.defaults,e.fn.selectize.support={validity:C},P.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var n=this;n.lock=function(){var e=n.lock;return function(){var t=n.$control.data("sortable");return t&&t.disable(),e.apply(n,arguments)}}(),n.unlock=function(){var e=n.unlock;return function(){var t=n.$control.data("sortable");return t&&t.enable(),e.apply(n,arguments)}}(),n.setup=function(){var t=n.setup;return function(){t.apply(this,arguments);var i=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var t=n.$activeItems?n.$activeItems.slice():null,r=[];i.children("[data-value]").each(function(){r.push(e(this).attr("data-value"))}),n.setValue(r),n.setActiveItem(t)}})}}()}}),P.define("dropdown_header",function(t){var n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=function(){var i=n.setup;return function(){i.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)}}()}),P.define("optgroup_columns",function(t){var n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,n){var i=t.closest("[data-group]").find("[data-selectable]"),r=i.index(t)+n;return r>=0&&r<i.length?i.eq(r):e()},this.onKeyDown=function(){var e=n.onKeyDown;return function(t){var i,r,o,a;return!this.isOpen||t.keyCode!==l&&t.keyCode!==p?e.apply(this,arguments):(n.ignoreHover=!0,a=this.$activeOption.closest("[data-group]"),i=a.find("[data-selectable]").index(this.$activeOption),a=t.keyCode===l?a.prev("[data-group]"):a.next("[data-group]"),o=a.find("[data-selectable]"),r=o.eq(Math.min(o.length-1,i)),void(r.length&&this.setActiveOption(r)))}}();var i=function(){var e,t=i.width,n=document;return"undefined"==typeof t&&(e=n.createElement("div"),e.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,n.body.appendChild(e),t=i.width=e.offsetWidth-e.clientWidth,n.body.removeChild(e)),t},r=function(){var r,o,a,s,u,l,c;if(c=e("[data-group]",n.$dropdown_content),o=c.length,o&&n.$dropdown_content.width()){if(t.equalizeHeight){for(a=0,r=0;o>r;r++)a=Math.max(a,c.eq(r).height());c.css({height:a})}t.equalizeWidth&&(l=n.$dropdown_content.innerWidth()-i(),s=Math.round(l/o),c.css({width:s}),o>1&&(u=l-s*(o-1),c.eq(o-1).css({width:u})))}};(t.equalizeHeight||t.equalizeWidth)&&(D.after(this,"positionDropdown",r),D.after(this,"refreshOptions",r))}),P.define("remove_button",function(t){if("single"!==this.settings.mode){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);var n=this,i='<a href="javascript:void(0)" class="'+t.className+'" tabindex="-1" title="'+T(t.title)+'">'+t.label+"</a>",r=function(e,t){var n=e.search(/(<\/[^>]+>\s*)$/);return e.substring(0,n)+t+e.substring(n)};this.setup=function(){var o=n.setup;return function(){if(t.append){var a=n.settings.render.item;n.settings.render.item=function(e){return r(a.apply(this,arguments),i)}}o.apply(this,arguments),this.$control.on("click","."+t.className,function(t){if(t.preventDefault(),!n.isLocked){var i=e(t.currentTarget).parent();n.setActiveItem(i),n.deleteSelection()&&n.setCaret(n.items.length)}})}}()}}),P.define("restore_on_backspace",function(e){var t=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=function(){var n=t.onKeyDown;return function(t){var i,r;return t.keyCode===m&&""===this.$control_input.val()&&!this.$activeItems.length&&(i=this.caretPos-1,
i>=0&&i<this.items.length)?(r=this.options[this.items[i]],this.deleteSelection(t)&&(this.setTextboxValue(e.text.apply(this,[r])),this.refreshOptions(!0)),void t.preventDefault()):n.apply(this,arguments)}}()}),P}),function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function r(e){return function(){return this[e].apply(this,arguments)}}function o(t,n){function i(e,t){return t.toLowerCase()}var r,o=e(t).data(),a={},s=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var u in o)n.test(u)&&(r=u.replace(s,i),a[r]=o[u]);return a}function a(t){var n={};if(h[t]||(t=t.split("-")[0],h[t])){var i=h[t];return e.each(f,function(e,t){t in i&&(n[t]=i[t])}),n}}var s=e(window),u=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;i>n;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new u;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),l=function(t,n){this.dates=new u,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};l.prototype={constructor:l,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),i=n.language;switch(h[i]||(i=i.split("-")[0],h[i]||(i=p.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var r=m.parseFormat(n.format);n.startDate!==-(1/0)&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=m.parseDate(n.startDate,r,n.language):n.startDate=-(1/0)),n.endDate!==1/0&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=m.parseDate(n.endDate,r,n.language):n.endDate=1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var o=String(n.orientation).toLowerCase().split(/\s+/g),a=n.orientation.toLowerCase();if(o=e.grep(o,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"},a&&"auto"!==a)if(1===o.length)switch(o[0]){case"top":case"bottom":n.orientation.y=o[0];break;case"left":case"right":n.orientation.x=o[0]}else a=e.grep(o,function(e){return/^left|right$/.test(e)}),n.orientation.x=a[0]||"auto",a=e.grep(o,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=a[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.on(r,i)},_unapplyEvents:function(e){for(var n,i,r,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.off(i,r)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),r=this._utc_to_local(i);this.element.trigger({type:t,date:r,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:r("setDates"),setUTCDate:r("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,r=s.width(),o=s.height(),a=s.scrollTop(),u=parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=l.left,f=l.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=t-d)):(this.picker.addClass("datepicker-orient-left"),l.left<0?p-=l.left-i:l.left+t>r&&(p=r-t-i));var h,m,g=this.o.orientation.y;"auto"===g&&(h=-a+l.top-n,m=a+o-(l.top+c+n),g=Math.max(h,m)===m?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?f+=c:f-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:f,left:p,zIndex:u})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),n=[],i=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+h[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;12>t;)e+='<span class="month">'+h[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<r?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>r)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled))&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected")),n},fill:function(){var i,r=new Date(this.viewDate),o=r.getUTCFullYear(),a=r.getUTCMonth(),s=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),u=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),l=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=h[this.o.language].today||h.en.today||"",p=h[this.o.language].clear||h.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(h[this.o.language].months[a]+" "+o),this.picker.find("tfoot th.today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(p).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var f=n(o,a-1,28),g=m.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(g),f.setUTCDate(g-(f.getUTCDay()-this.o.weekStart+7)%7);var v=new Date(f);v.setUTCDate(v.getUTCDate()+42),v=v.valueOf();for(var y,b=[];f.valueOf()<v;){if(f.getUTCDay()===this.o.weekStart&&(b.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),w=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),x=new Date(Number(x=n(w.getUTCFullYear(),0,1))+(11-x.getUTCDay())%7*864e5),C=(w-x)/864e5/7+1;b.push('<td class="cw">'+C+"</td>")}if(y=this.getClassNames(f),y.push("day"),this.o.beforeShowDay!==e.noop){var S=this.o.beforeShowDay(this._utc_to_local(f));S===t?S={}:"boolean"==typeof S?S={enabled:S}:"string"==typeof S&&(S={classes:S}),S.enabled===!1&&y.push("disabled"),S.classes&&(y=y.concat(S.classes.split(/\s+/))),S.tooltip&&(i=S.tooltip)}y=e.unique(y),b.push('<td class="'+y.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+f.getUTCDate()+"</td>"),f.getUTCDay()===this.o.weekEnd&&b.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(b.join(""));var k=this.picker.find(".datepicker-months").find("th:eq(1)").text(o).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===o&&k.eq(t.getUTCMonth()).addClass("active")}),(s>o||o>l)&&k.addClass("disabled"),o===s&&k.slice(0,u).addClass("disabled"),o===l&&k.slice(c+1).addClass("disabled"),b="",o=10*parseInt(o/10,10);var T=this.picker.find(".datepicker-years").find("th:eq(1)").text(o+"-"+(o+9)).end().find("td");o-=1;for(var E,D=e.map(this.dates,function(e){return e.getUTCFullYear()}),I=-1;11>I;I++)E=["year"],-1===I?E.push("old"):10===I&&E.push("new"),-1!==e.inArray(o,D)&&E.push("active"),(s>o||o>l)&&E.push("disabled"),b+='<span class="'+E.join(" ")+'">'+o+"</span>",o+=1;T.html(b)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var i,r,o,a=e(t.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var s=m.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,s),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,s),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var u=new Date;u=n(u.getFullYear(),u.getMonth(),u.getDate(),0,0,0),this.showMode(-2);var l="linked"===this.o.todayBtn?null:"view";this._setDate(u,l);break;case"clear":var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(o=1,r=a.parent().find("span").index(a),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(r),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,r,o))):(o=1,r=0,i=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,r,o))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(o=parseInt(a.text(),10)||1,i=this.viewDate.getUTCFullYear(),r=this.viewDate.getUTCMonth(),a.is(".old")?0===r?(r=11,i-=1):r-=1:a.is(".new")&&(11===r?(r=0,i+=1):r+=1),this._setDate(n(i,r,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?-1!==t?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var i,r,o=new Date(e.valueOf()),a=o.getUTCDate(),s=o.getUTCMonth(),u=Math.abs(n);if(n=n>0?1:-1,1===u)r=-1===n?function(){return o.getUTCMonth()===s}:function(){return o.getUTCMonth()!==i},i=s+n,o.setUTCMonth(i),(0>i||i>11)&&(i=(i+12)%12);else{for(var l=0;u>l;l++)o=this.moveMonth(o,n);i=o.getUTCMonth(),o.setUTCDate(a),r=function(){return i!==o.getUTCMonth()}}for(;r();)o.setUTCDate(--a),o.setUTCMonth(i);return o},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,n,r,o=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+t),r=new Date(a),r.setUTCDate(a.getUTCDate()+t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),r=this.moveYear(a,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),r=this.moveMonth(a,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*t),r=new Date(a),r.setUTCDate(a.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=r,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(a),o=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(o){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var s;this.isInput?s=this.element:this.component&&(s=this.element.find("input")),s&&s.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var c=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker"),i=n.getUTCDate(),r=e.inArray(t.target,this.inputs),o=r-1,a=r+1,s=this.inputs.length;if(-1!==r){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[o])for(;o>=0&&i<this.dates[o];)this.pickers[o--].setUTCDate(i);else if(i>this.dates[a])for(;s>a&&i>this.dates[a];)this.pickers[a++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var d=e.fn.datepicker;e.fn.datepicker=function(n){var i=Array.apply(null,arguments);i.shift();var r;return this.each(function(){var s=e(this),u=s.data("datepicker"),d="object"==typeof n&&n;if(!u){var f=o(this,"date"),h=e.extend({},p,f,d),m=a(h.language),g=e.extend({},p,m,f,d);if(s.is(".input-daterange")||g.inputs){var v={inputs:g.inputs||s.find("input").toArray()};s.data("datepicker",u=new c(this,e.extend(g,v)))}else s.data("datepicker",u=new l(this,g))}return"string"==typeof n&&"function"==typeof u[n]&&(r=u[n].apply(u,i),r!==t)?!1:void 0}),r!==t?r:this};var p=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},f=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=l;var h=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\x00").split("\x00"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,r,o){function a(){var e=this.slice(0,p[c].length),t=p[c].slice(0,e.length);return e===t}if(!i)return t;if(i instanceof Date)return i;"string"==typeof r&&(r=m.parseFormat(r));var s,u,c,d=/([\-+]\d+)([dmwy])/,p=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,c=0;c<p.length;c++)switch(s=d.exec(p[c]),u=parseInt(s[1]),s[2]){case"d":i.setUTCDate(i.getUTCDate()+u);break;case"m":i=l.prototype.moveMonth.call(l.prototype,i,u);break;case"w":i.setUTCDate(i.getUTCDate()+7*u);break;case"y":i=l.prototype.moveYear.call(l.prototype,i,u)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}p=i&&i.match(this.nonpunctuation)||[],i=new Date;var f,g,v={},y=["yyyy","yy","M","MM","m","mm","d","dd"],b={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;0>t;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};b.M=b.MM=b.mm=b.m,b.dd=b.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var _=r.parts.slice();if(p.length!==_.length&&(_=e(_).filter(function(t,n){return-1!==e.inArray(n,y)}).toArray()),p.length===_.length){var w;for(c=0,w=_.length;w>c;c++){if(f=parseInt(p[c],10),s=_[c],isNaN(f))switch(s){case"MM":g=e(h[o].months).filter(a),f=e.inArray(g[0],h[o].months)+1;break;case"M":g=e(h[o].monthsShort).filter(a),f=e.inArray(g[0],h[o].monthsShort)+1}v[s]=f}var x,C;for(c=0;c<y.length;c++)C=y[c],C in v&&!isNaN(v[C])&&(x=new Date(i),b[C](x,v[C]),isNaN(x)||(i=x))}return i},formatDate:function(t,n,i){if(!t)return"";"string"==typeof n&&(n=m.parseFormat(n));var r={d:t.getUTCDate(),D:h[i].daysShort[t.getUTCDay()],DD:h[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:h[i].monthsShort[t.getUTCMonth()],MM:h[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};r.dd=(r.d<10?"0":"")+r.d,r.mm=(r.m<10?"0":"")+r.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;s>=a;a++)o.length&&t.push(o.shift()),t.push(r[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=d,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),n.datepicker("show"))}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}(function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(n){if(n.async){var i,r,o,a=n.initialIframeSrc||"javascript:false;";return{send:function(s,u){i=e('<form style="display:none;"></form>'),i.attr("accept-charset",n.formAcceptCharset),o=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+o+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+o+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+o+"_method=PATCH",n.type="POST"),t+=1,r=e('<iframe src="'+a+'" name="iframe-transport-'+t+'"></iframe>').bind("load",function(){var t,o=e.isArray(n.paramName)?n.paramName:[n.paramName];r.unbind("load").bind("load",function(){var t;try{if(t=r.contents(),!t.length||!t[0].firstChild)throw new Error}catch(n){t=void 0}u(200,"success",{iframe:t}),e('<iframe src="'+a+'"></iframe>').appendTo(i),window.setTimeout(function(){i.remove()},0)}),i.prop("target",r.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&e.each(n.formData,function(t,n){e('<input type="hidden"/>').prop("name",n.name).val(n.value).appendTo(i)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(t=n.fileInput.clone(),n.fileInput.after(function(e){return t[e]}),n.paramName&&n.fileInput.each(function(t){e(this).prop("name",o[t]||n.paramName)}),i.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),i.submit(),t&&t.length&&n.fileInput.each(function(n,i){var r=e(t[n]);e(i).prop("name",r.prop("name")).attr("form",r.attr("form")),r.replaceWith(i)})}),i.append(r).appendTo(document.body)},abort:function(){r&&r.unbind("load").prop("src",a),i&&i.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(t){return t&&e(t[0].body).text()},"iframe json":function(t){return t&&e.parseJSON(e(t[0].body).text())},"iframe html":function(t){return t&&e(t[0].body).html()},"iframe xml":function(t){var n=t&&t[0];return n&&e.isXMLDoc(n)?n:e.parseXML(n.XMLDocument&&n.XMLDocument.xml||e(n.body).html())},"iframe script":function(t){return t&&e.globalEval(e(t[0].body).text())}}})}),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,this.excludeNode=i.excludeNode||null,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,u=0,l=a.length;l>u;u++)s[a[u]]=r(s[a[u]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)||new RegExp(this.excludeNode).test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],
i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n?!0:!1},e.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,u,l,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(l=e.changedTouches[0],c=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return i&&!r&&(u=c.fastClickScrollParent,u&&u.fastClickLastScrollTop!==u.scrollTop)?!0:(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return this.targetElement?e.forwardedTouchEvent?!0:e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1):!0:!0},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===e.style.touchAction||"manipulation"===e.style.touchAction?!0:!1)},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),relocate=function(e,t,n,i){t.nodeName&&(t=[t]);var r,o,a,s=[],u=[],l=t.length;for(a=l-1;a>=0;a--)u.push(t[a]);var c=function(){for(a=0;l>a;a++)r=u[a].parentNode,void 0===s[a]&&(s[a]=document.createElement("span"),r.insertBefore(s[a],u[a])),o=r.removeChild(u[a]),n.insertBefore(o,n.firstChild)},d=function(){for(a=0;l>a;a++)r=u[a].parentNode,o=r.removeChild(u[a]),s[a].parentNode.insertBefore(o,s[a])};i?minwidth(e,d,c,i):minwidth(e,c,d)},function(e){var t=function(){if("innerWidth"in e)return e.innerWidth;var t=n.documentElement.clientWidth;return"CSS1Compat"===n.compatMode&&t||n.body&&n.body.clientWidth||t},n=e.document,i=[],r=t(),o=function(){r=t();var e,n;for(e=0;e<i.length;e++)n=i[e],n.old<n.wdt&&r>=n.wdt&&n.fwd&&n.fwd(),n.old>=n.wdt&&r<n.wdt&&n.bck&&n.bck(),n.old=r};e.addEventListener?e.addEventListener("resize",o,!1):e.attachEvent("onresize",o),e.minwidth=function(e,t,n,r){i.push({wdt:e,old:r?1e9:0,fwd:t,bck:n}),o()}}(this),window.InfoBubble=InfoBubble,InfoBubble.prototype.ARROW_SIZE_=15,InfoBubble.prototype.ARROW_STYLE_=0,InfoBubble.prototype.SHADOW_STYLE_=1,InfoBubble.prototype.MIN_WIDTH_=50,InfoBubble.prototype.ARROW_POSITION_=50,InfoBubble.prototype.PADDING_=10,InfoBubble.prototype.BORDER_WIDTH_=1,InfoBubble.prototype.BORDER_COLOR_="#ccc",InfoBubble.prototype.BORDER_RADIUS_=10,InfoBubble.prototype.BACKGROUND_COLOR_="#fff",InfoBubble.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},InfoBubble.prototype.buildDom_=function(){var e=this.bubble_=document.createElement("DIV");e.style.position="absolute",e.style.zIndex=this.baseZIndex_;var t=this.tabsContainer_=document.createElement("DIV");t.style.position="relative";var n=this.close_=document.createElement("IMG");n.style.position="absolute",n.style.width=this.px(12),n.style.height=this.px(12),n.style.border=0,n.style.zIndex=this.baseZIndex_+1,n.style.cursor="pointer",n.src="https://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif";var i=this;google.maps.event.addDomListener(n,"click",function(){i.close(),google.maps.event.trigger(i,"closeclick")});var r=this.contentContainer_=document.createElement("DIV");r.style.overflowX="auto",r.style.overflowY="auto",r.style.cursor="default",r.style.clear="both",r.style.position="relative";var o=this.content_=document.createElement("DIV");r.appendChild(o);var a=this.arrow_=document.createElement("DIV");a.style.position="relative";var s=this.arrowOuter_=document.createElement("DIV"),u=this.arrowInner_=document.createElement("DIV"),l=this.getArrowSize_();s.style.position=u.style.position="absolute",s.style.left=u.style.left="50%",s.style.height=u.style.height="0",s.style.width=u.style.width="0",s.style.marginLeft=this.px(-l),s.style.borderWidth=this.px(l),s.style.borderBottomWidth=0;var c=this.bubbleShadow_=document.createElement("DIV");c.style.position="absolute",e.style.display=c.style.display="none",e.appendChild(this.tabsContainer_),e.appendChild(n),e.appendChild(r),a.appendChild(s),a.appendChild(u),e.appendChild(a);var d=document.createElement("style");d.setAttribute("type","text/css"),this.animationName_="_ibani_"+Math.round(1e4*Math.random());var p="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;-webkit-animation-iteration-count:1;}@-webkit-keyframes "+this.animationName_+" {from {-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% {-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";d.textContent=p,document.getElementsByTagName("head")[0].appendChild(d)},InfoBubble.prototype.setBackgroundClassName=function(e){this.set("backgroundClassName",e)},InfoBubble.prototype.setBackgroundClassName=InfoBubble.prototype.setBackgroundClassName,InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")},InfoBubble.prototype.backgroundClassName_changed=InfoBubble.prototype.backgroundClassName_changed,InfoBubble.prototype.setTabClassName=function(e){this.set("tabClassName",e)},InfoBubble.prototype.setTabClassName=InfoBubble.prototype.setTabClassName,InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()},InfoBubble.prototype.tabClassName_changed=InfoBubble.prototype.tabClassName_changed,InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0},InfoBubble.prototype.setArrowStyle=function(e){this.set("arrowStyle",e)},InfoBubble.prototype.setArrowStyle=InfoBubble.prototype.setArrowStyle,InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()},InfoBubble.prototype.arrowStyle_changed=InfoBubble.prototype.arrowStyle_changed,InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0},InfoBubble.prototype.setArrowSize=function(e){this.set("arrowSize",e)},InfoBubble.prototype.setArrowSize=InfoBubble.prototype.setArrowSize,InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()},InfoBubble.prototype.arrowSize_changed=InfoBubble.prototype.arrowSize_changed,InfoBubble.prototype.setArrowPosition=function(e){this.set("arrowPosition",e)},InfoBubble.prototype.setArrowPosition=InfoBubble.prototype.setArrowPosition,InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0},InfoBubble.prototype.arrowPosition_changed=function(){var e=this.getArrowPosition_();this.arrowOuter_.style.left=this.arrowInner_.style.left=e+"%",this.redraw_()},InfoBubble.prototype.arrowPosition_changed=InfoBubble.prototype.arrowPosition_changed,InfoBubble.prototype.setZIndex=function(e){this.set("zIndex",e)},InfoBubble.prototype.setZIndex=InfoBubble.prototype.setZIndex,InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_},InfoBubble.prototype.zIndex_changed=function(){var e=this.getZIndex();this.bubble_.style.zIndex=this.baseZIndex_=e,this.close_.style.zIndex=e+1},InfoBubble.prototype.zIndex_changed=InfoBubble.prototype.zIndex_changed,InfoBubble.prototype.setShadowStyle=function(e){this.set("shadowStyle",e)},InfoBubble.prototype.setShadowStyle=InfoBubble.prototype.setShadowStyle,InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0},InfoBubble.prototype.shadowStyle_changed=function(){var e=this.getShadowStyle_(),t="",n="",i="";switch(e){case 0:t="none";break;case 1:n="40px 15px 10px rgba(33,33,33,0.3)",i="transparent";break;case 2:n="0 0 2px rgba(33,33,33,0.3)",i="rgba(33,33,33,0.35)"}this.bubbleShadow_.style.boxShadow=this.bubbleShadow_.style.webkitBoxShadow=this.bubbleShadow_.style.MozBoxShadow=n,this.bubbleShadow_.style.backgroundColor=i,this.isOpen_&&(this.bubbleShadow_.style.display=t,this.draw())},InfoBubble.prototype.shadowStyle_changed=InfoBubble.prototype.shadowStyle_changed,InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",!1)},InfoBubble.prototype.showCloseButton=InfoBubble.prototype.showCloseButton,InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",!0)},InfoBubble.prototype.hideCloseButton=InfoBubble.prototype.hideCloseButton,InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style.display=this.get("hideCloseButton")?"none":""},InfoBubble.prototype.hideCloseButton_changed=InfoBubble.prototype.hideCloseButton_changed,InfoBubble.prototype.setBackgroundColor=function(e){e&&this.set("backgroundColor",e)},InfoBubble.prototype.setBackgroundColor=InfoBubble.prototype.setBackgroundColor,InfoBubble.prototype.backgroundColor_changed=function(){var e=this.get("backgroundColor");this.contentContainer_.style.backgroundColor=e,this.arrowInner_.style.borderColor=e+" transparent transparent",this.updateTabStyles_()},InfoBubble.prototype.backgroundColor_changed=InfoBubble.prototype.backgroundColor_changed,InfoBubble.prototype.setBorderColor=function(e){e&&this.set("borderColor",e)},InfoBubble.prototype.setBorderColor=InfoBubble.prototype.setBorderColor,InfoBubble.prototype.borderColor_changed=function(){var e=this.get("borderColor"),t=this.contentContainer_,n=this.arrowOuter_;t.style.borderColor=e,n.style.borderColor=e+" transparent transparent",t.style.borderStyle=n.style.borderStyle=this.arrowInner_.style.borderStyle="solid",this.updateTabStyles_()},InfoBubble.prototype.borderColor_changed=InfoBubble.prototype.borderColor_changed,InfoBubble.prototype.setBorderRadius=function(e){this.set("borderRadius",e)},InfoBubble.prototype.setBorderRadius=InfoBubble.prototype.setBorderRadius,InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0},InfoBubble.prototype.borderRadius_changed=function(){var e=this.getBorderRadius_(),t=this.getBorderWidth_();this.contentContainer_.style.borderRadius=this.contentContainer_.style.MozBorderRadius=this.contentContainer_.style.webkitBorderRadius=this.bubbleShadow_.style.borderRadius=this.bubbleShadow_.style.MozBorderRadius=this.bubbleShadow_.style.webkitBorderRadius=this.px(e),this.tabsContainer_.style.paddingLeft=this.tabsContainer_.style.paddingRight=this.px(e+t),this.redraw_()},InfoBubble.prototype.borderRadius_changed=InfoBubble.prototype.borderRadius_changed,InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0},InfoBubble.prototype.setBorderWidth=function(e){this.set("borderWidth",e)},InfoBubble.prototype.setBorderWidth=InfoBubble.prototype.setBorderWidth,InfoBubble.prototype.borderWidth_changed=function(){var e=this.getBorderWidth_();this.contentContainer_.style.borderWidth=this.px(e),this.tabsContainer_.style.top=this.px(e),this.updateArrowStyle_(),this.updateTabStyles_(),this.borderRadius_changed(),this.redraw_()},InfoBubble.prototype.borderWidth_changed=InfoBubble.prototype.borderWidth_changed,InfoBubble.prototype.updateArrowStyle_=function(){var e=this.getBorderWidth_(),t=this.getArrowSize_(),n=this.getArrowStyle_(),i=this.px(t),r=this.px(Math.max(0,t-e)),o=this.arrowOuter_,a=this.arrowInner_;this.arrow_.style.marginTop=this.px(-e),o.style.borderTopWidth=i,a.style.borderTopWidth=r,0==n||1==n?(o.style.borderLeftWidth=i,a.style.borderLeftWidth=r):o.style.borderLeftWidth=a.style.borderLeftWidth=0,0==n||2==n?(o.style.borderRightWidth=i,a.style.borderRightWidth=r):o.style.borderRightWidth=a.style.borderRightWidth=0,2>n?(o.style.marginLeft=this.px(-t),a.style.marginLeft=this.px(-(t-e))):o.style.marginLeft=a.style.marginLeft=0,0==e?o.style.display="none":o.style.display=""},InfoBubble.prototype.setPadding=function(e){this.set("padding",e)},InfoBubble.prototype.setPadding=InfoBubble.prototype.setPadding,InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0},InfoBubble.prototype.padding_changed=function(){var e=this.getPadding_();this.contentContainer_.style.padding=this.px(e),this.updateTabStyles_(),this.redraw_()},InfoBubble.prototype.padding_changed=InfoBubble.prototype.padding_changed,InfoBubble.prototype.px=function(e){return e?e+"px":e},InfoBubble.prototype.addEvents_=function(){var e=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],t=this.bubble_;this.listeners_=[];for(var n,i=0;n=e[i];i++)this.listeners_.push(google.maps.event.addDomListener(t,n,function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}))},InfoBubble.prototype.onAdd=function(){this.bubble_||this.buildDom_(),this.addEvents_();var e=this.getPanes();e&&(e.floatPane.appendChild(this.bubble_),e.floatShadow.appendChild(this.bubbleShadow_))},InfoBubble.prototype.onAdd=InfoBubble.prototype.onAdd,InfoBubble.prototype.draw=function(){var e=this.getProjection();if(e){var t=this.get("position");if(!t)return void this.close();var n=0;this.activeTab_&&(n=this.activeTab_.offsetHeight);var i=this.getAnchorHeight_(),r=this.getArrowSize_(),o=this.getArrowPosition_();o/=100;var a=e.fromLatLngToDivPixel(t),s=this.contentContainer_.offsetWidth,u=this.bubble_.offsetHeight;if(s){var l=a.y-(u+r);i&&(l-=i);var c=a.x-s*o;this.bubble_.style.top=this.px(l),this.bubble_.style.left=this.px(c);var d=parseInt(this.get("shadowStyle"),10);switch(d){case 1:this.bubbleShadow_.style.top=this.px(l+n-1),this.bubbleShadow_.style.left=this.px(c),this.bubbleShadow_.style.width=this.px(s),this.bubbleShadow_.style.height=this.px(this.contentContainer_.offsetHeight-r);break;case 2:s=.8*s,i?this.bubbleShadow_.style.top=this.px(a.y):this.bubbleShadow_.style.top=this.px(a.y+r),this.bubbleShadow_.style.left=this.px(a.x-s*o),this.bubbleShadow_.style.width=this.px(s),this.bubbleShadow_.style.height=this.px(2)}}}},InfoBubble.prototype.draw=InfoBubble.prototype.draw,InfoBubble.prototype.onRemove=function(){this.bubble_&&this.bubble_.parentNode&&this.bubble_.parentNode.removeChild(this.bubble_),this.bubbleShadow_&&this.bubbleShadow_.parentNode&&this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_);for(var e,t=0;e=this.listeners_[t];t++)google.maps.event.removeListener(e)},InfoBubble.prototype.onRemove=InfoBubble.prototype.onRemove,InfoBubble.prototype.isOpen=function(){return this.isOpen_},InfoBubble.prototype.isOpen=InfoBubble.prototype.isOpen,InfoBubble.prototype.close=function(){this.bubble_&&(this.bubble_.style.display="none",this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")),this.bubbleShadow_&&(this.bubbleShadow_.style.display="none",this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")),this.isOpen_=!1},InfoBubble.prototype.close=InfoBubble.prototype.close,InfoBubble.prototype.open=function(e,t){var n=this;window.setTimeout(function(){n.open_(e,t)},0)},InfoBubble.prototype.open_=function(e,t){this.updateContent_(),e&&this.setMap(e),t&&(this.set("anchor",t),this.bindTo("anchorPoint",t),this.bindTo("position",t)),this.bubble_.style.display=this.bubbleShadow_.style.display="";var n=!this.get("disableAnimation");n&&(this.bubble_.className+=" "+this.animationName_,this.bubbleShadow_.className+=" "+this.animationName_),this.redraw_(),this.isOpen_=!0;var i=!this.get("disableAutoPan");if(i){var r=this;window.setTimeout(function(){r.panToView()},200)}},InfoBubble.prototype.open=InfoBubble.prototype.open,InfoBubble.prototype.setPosition=function(e){e&&this.set("position",e)},InfoBubble.prototype.setPosition=InfoBubble.prototype.setPosition,InfoBubble.prototype.getPosition=function(){return this.get("position")},InfoBubble.prototype.getPosition=InfoBubble.prototype.getPosition,InfoBubble.prototype.position_changed=function(){this.draw()},InfoBubble.prototype.position_changed=InfoBubble.prototype.position_changed,InfoBubble.prototype.panToView=function(){var e=this.getProjection();if(e&&this.bubble_){var t=this.getAnchorHeight_(),n=this.bubble_.offsetHeight+t,i=this.get("map"),r=i.getDiv(),o=r.offsetHeight,a=this.getPosition(),s=e.fromLatLngToContainerPixel(i.getCenter()),u=e.fromLatLngToContainerPixel(a),l=s.y-n,c=o-s.y,d=0>l,p=0;d&&(l*=-1,p=(l+c)/2),u.y-=p,a=e.fromContainerPixelToLatLng(u),i.getCenter()!=a&&i.panTo(a)}},InfoBubble.prototype.panToView=InfoBubble.prototype.panToView,InfoBubble.prototype.htmlToDocumentFragment_=function(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");if(t.innerHTML=e,1==t.childNodes.length)return t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n},InfoBubble.prototype.removeChildren_=function(e){if(e)for(var t;t=e.firstChild;)e.removeChild(t)},InfoBubble.prototype.setContent=function(e){this.set("content",e)},InfoBubble.prototype.setContent=InfoBubble.prototype.setContent,InfoBubble.prototype.getContent=function(){return this.get("content")},InfoBubble.prototype.getContent=InfoBubble.prototype.getContent,InfoBubble.prototype.updateContent_=function(){if(this.content_){this.removeChildren_(this.content_);var e=this.getContent();if(e){"string"==typeof e&&(e=this.htmlToDocumentFragment_(e)),this.content_.appendChild(e);for(var t,n=this,i=this.content_.getElementsByTagName("IMG"),r=0;t=i[r];r++)google.maps.event.addDomListener(t,"load",function(){n.imageLoaded_()});google.maps.event.trigger(this,"domready")}this.redraw_()}},InfoBubble.prototype.imageLoaded_=function(){var e=!this.get("disableAutoPan");this.redraw_(),!e||0!=this.tabs_.length&&0!=this.activeTab_.index||this.panToView()},InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var e,t=0;e=this.tabs_[t];t++)this.setTabStyle_(e.tab);this.activeTab_.style.zIndex=this.baseZIndex_;var n=this.getBorderWidth_(),i=this.getPadding_()/2;this.activeTab_.style.borderBottomWidth=0,this.activeTab_.style.paddingBottom=this.px(i+n)}},InfoBubble.prototype.setTabStyle_=function(e){var t=this.get("backgroundColor"),n=this.get("borderColor"),i=this.getBorderRadius_(),r=this.getBorderWidth_(),o=this.getPadding_(),a=this.px(-Math.max(o,i)),s=this.px(i),u=this.baseZIndex_;e.index&&(u-=e.index);var l={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:t,border:this.px(r)+" solid "+n,padding:this.px(o/2)+" "+this.px(o),marginRight:a,whiteSpace:"nowrap",borderRadiusTopLeft:s,MozBorderRadiusTopleft:s,webkitBorderTopLeftRadius:s,borderRadiusTopRight:s,MozBorderRadiusTopright:s,webkitBorderTopRightRadius:s,zIndex:u,display:"inline"};for(var c in l)e.style[c]=l[c];var d=this.get("tabClassName");void 0!=d&&(e.className+=" "+d)},InfoBubble.prototype.addTabActions_=function(e){var t=this;e.listener_=google.maps.event.addDomListener(e,"click",function(){t.setTabActive_(this)})},InfoBubble.prototype.setTabActive=function(e){var t=this.tabs_[e-1];t&&this.setTabActive_(t.tab)},InfoBubble.prototype.setTabActive=InfoBubble.prototype.setTabActive,InfoBubble.prototype.setTabActive_=function(e){if(!e)return this.setContent(""),void this.updateContent_();var t=this.getPadding_()/2,n=this.getBorderWidth_();if(this.activeTab_){var i=this.activeTab_;i.style.zIndex=this.baseZIndex_-i.index,i.style.paddingBottom=this.px(t),i.style.borderBottomWidth=this.px(n)}e.style.zIndex=this.baseZIndex_,e.style.borderBottomWidth=0,e.style.marginBottomWidth="-10px",e.style.paddingBottom=this.px(t+n),this.setContent(this.tabs_[e.index].content),this.updateContent_(),this.activeTab_=e,this.redraw_()},InfoBubble.prototype.setMaxWidth=function(e){this.set("maxWidth",e)},InfoBubble.prototype.setMaxWidth=InfoBubble.prototype.setMaxWidth,InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()},InfoBubble.prototype.maxWidth_changed=InfoBubble.prototype.maxWidth_changed,InfoBubble.prototype.setMaxHeight=function(e){this.set("maxHeight",e)},InfoBubble.prototype.setMaxHeight=InfoBubble.prototype.setMaxHeight,InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()},InfoBubble.prototype.maxHeight_changed=InfoBubble.prototype.maxHeight_changed,InfoBubble.prototype.setMinWidth=function(e){this.set("minWidth",e)},InfoBubble.prototype.setMinWidth=InfoBubble.prototype.setMinWidth,InfoBubble.prototype.minWidth_changed=function(){this.redraw_()},InfoBubble.prototype.minWidth_changed=InfoBubble.prototype.minWidth_changed,InfoBubble.prototype.setMinHeight=function(e){this.set("minHeight",e)},InfoBubble.prototype.setMinHeight=InfoBubble.prototype.setMinHeight,InfoBubble.prototype.minHeight_changed=function(){this.redraw_()},InfoBubble.prototype.minHeight_changed=InfoBubble.prototype.minHeight_changed,InfoBubble.prototype.addTab=function(e,t){var n=document.createElement("DIV");n.innerHTML=e,this.setTabStyle_(n),this.addTabActions_(n),this.tabsContainer_.appendChild(n),this.tabs_.push({label:e,content:t,tab:n}),n.index=this.tabs_.length-1,n.style.zIndex=this.baseZIndex_-n.index,this.activeTab_||this.setTabActive_(n),n.className=n.className+" "+this.animationName_,this.redraw_()},InfoBubble.prototype.addTab=InfoBubble.prototype.addTab,InfoBubble.prototype.updateTab=function(e,t,n){if(!(!this.tabs_.length||0>e||e>=this.tabs_.length)){var i=this.tabs_[e];void 0!=t&&(i.tab.innerHTML=i.label=t),void 0!=n&&(i.content=n),this.activeTab_==i.tab&&(this.setContent(i.content),this.updateContent_()),this.redraw_()}},InfoBubble.prototype.updateTab=InfoBubble.prototype.updateTab,InfoBubble.prototype.removeTab=function(e){if(!(!this.tabs_.length||0>e||e>=this.tabs_.length)){var t=this.tabs_[e];t.tab.parentNode.removeChild(t.tab),google.maps.event.removeListener(t.tab.listener_),this.tabs_.splice(e,1),delete t;for(var n,i=0;n=this.tabs_[i];i++)n.tab.index=i;t.tab==this.activeTab_&&(this.tabs_[e]?this.activeTab_=this.tabs_[e].tab:this.tabs_[e-1]?this.activeTab_=this.tabs_[e-1].tab:this.activeTab_=void 0,this.setTabActive_(this.activeTab_)),this.redraw_()}},InfoBubble.prototype.removeTab=InfoBubble.prototype.removeTab,InfoBubble.prototype.getElementSize_=function(e,t,n){var i=document.createElement("DIV");i.style.display="inline",i.style.position="absolute",i.style.visibility="hidden","string"==typeof e?i.innerHTML=e:i.appendChild(e.cloneNode(!0)),document.body.appendChild(i);var r=new google.maps.Size(i.offsetWidth,i.offsetHeight);return t&&r.width>t&&(i.style.width=this.px(t),r=new google.maps.Size(i.offsetWidth,i.offsetHeight)),n&&r.height>n&&(i.style.height=this.px(n),r=new google.maps.Size(i.offsetWidth,i.offsetHeight)),document.body.removeChild(i),delete i,r},InfoBubble.prototype.redraw_=function(){this.figureOutSize_(),this.positionCloseButton_(),this.draw()},InfoBubble.prototype.figureOutSize_=function(){var e=this.get("map");if(e){var t=this.getPadding_(),n=(this.getBorderWidth_(),this.getBorderRadius_(),this.getArrowSize_()),i=e.getDiv(),r=2*n,o=i.offsetWidth-r,a=i.offsetHeight-r-this.getAnchorHeight_(),s=0,u=this.get("minWidth")||0,l=this.get("minHeight")||0,c=this.get("maxWidth")||0,d=this.get("maxHeight")||0;c=Math.min(o,c),d=Math.min(a,d);var p=0;if(this.tabs_.length)for(var f,h=0;f=this.tabs_[h];h++){var m=this.getElementSize_(f.tab,c,d),g=this.getElementSize_(f.content,c,d);u<m.width&&(u=m.width),p+=m.width,l<m.height&&(l=m.height),m.height>s&&(s=m.height),u<g.width&&(u=g.width),l<g.height&&(l=g.height)}else{var v=this.get("content");if("string"==typeof v&&(v=this.htmlToDocumentFragment_(v)),v){var g=this.getElementSize_(v,c,d);u<g.width&&(u=g.width),l<g.height&&(l=g.height)}}c&&(u=Math.min(u,c)),d&&(l=Math.min(l,d)),u=Math.max(u,p),u==p&&(u+=2*t),n=2*n,u=Math.max(u,n),u>o&&(u=o),l>a&&(l=a-s),this.tabsContainer_&&(this.tabHeight_=s,this.tabsContainer_.style.width=this.px(p)),this.contentContainer_.style.width=this.px(u),this.contentContainer_.style.height=this.px(l)}},InfoBubble.prototype.getAnchorHeight_=function(){var e=this.get("anchor");if(e){var t=this.get("anchorPoint");if(t)return-1*t.y}return 0},InfoBubble.prototype.anchorPoint_changed=function(){this.draw()},InfoBubble.prototype.anchorPoint_changed=InfoBubble.prototype.anchorPoint_changed,InfoBubble.prototype.positionCloseButton_=function(){var e=(this.getBorderRadius_(),this.getBorderWidth_()),t=2,n=2;this.tabs_.length&&this.tabHeight_&&(n+=this.tabHeight_),n+=e,t+=e;var i=this.contentContainer_;i&&i.clientHeight<i.scrollHeight&&(t+=15),this.close_.style.right=this.px(t),this.close_.style.top=this.px(n)},function(){var e,t,n,i,r,o,a,s,u,l,c,d,p,f,h,m,g,v,y,b,_,w,x,C,S,k,T,E,D,I,F,$,j,A,M,O,B,P,N,L,z,R,q,H,W,U,V,X,Y,Q,G,K,Z,J,ee,te,ne,ie,re,oe,ae,se,ue,le,ce,de,pe,fe=[].slice,he={}.hasOwnProperty,me=function(e,t){function n(){this.constructor=e}for(var i in t)he.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},ge=function(e,t){return function(){return e.apply(t,arguments)}};e={toString:function(){return"Bacon"}},e.version="0.7.35",d=("undefined"!=typeof global&&null!==global?global:this).Error,e.fromBinder=function(t,n){return null==n&&(n=de.id),new c(j(e,"fromBinder",t,n),function(i){var r,o,a;return a=!1,r=function(){return"undefined"!=typeof o&&null!==o?(a||o(),a=!0):void 0},o=t(function(){var t,a,s,u,c,d;for(t=1<=arguments.length?fe.call(arguments,0):[],u=n.apply(this,t),z(u)&&de.last(u)instanceof l||(u=[u]),s=e.more,c=0,d=u.length;d>c;c++)if(a=u[c],s=i(a=re(a)),s===e.noMore||a.isEnd())return null!=o?r():e.scheduler.setTimeout(r,0),s;return s}),r})},e.$={},e.$.asEventStream=function(t,n,i){var r;return q(n)&&(r=[n,void 0],i=r[0],n=r[1]),le(this.selector||this,"asEventStream",t,e.fromBinder(function(e){return function(i){return e.on(t,n,i),function(){return e.off(t,n,i)}}}(this),i))},null!=(pe="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(pe.fn.asEventStream=e.$.asEventStream),e.fromEventTarget=function(t,n,i){var r,o,a,s,u,l,c,d;return r=null!=(a=null!=(s=null!=(u=t.addEventListener)?u:t.addListener)?s:t.bind)?a:t.on,o=null!=(l=null!=(c=null!=(d=t.removeEventListener)?d:t.removeListener)?c:t.unbind)?l:t.off,le(e,"fromEventTarget",t,n,e.fromBinder(function(e){return r.call(t,n,e),function(){return o.call(t,n,e)}},i))},e.fromPromise=function(t,n){return le(e,"fromPromise",t,e.fromBinder(function(e){return t.then(e,function(t){return e(new u(t))}),function(){return n&&"function"==typeof t.abort?t.abort():void 0}},function(e){return[e,A()]}))},e.noMore=["<no-more>"],e.more=["<more>"],e.later=function(t,n){return le(e,"later",t,n,e.fromPoll(t,function(){return[n,A()]}))},e.sequentially=function(t,n){var i;return i=0,le(e,"sequentially",t,n,e.fromPoll(t,function(){var e;return e=n[i++],i<n.length?e:i===n.length?[e,A()]:A()}))},e.repeatedly=function(t,n){var i;return i=0,le(e,"repeatedly",t,n,e.fromPoll(t,function(){return n[i++%n.length]}))},e.spy=function(e){return ne.push(e)},ne=[],te=function(e){var t,n,i;if(ne.length&&!te.running)try{for(te.running=!0,n=0,i=ne.length;i>n;n++)(t=ne[n])(e)}finally{delete te.running}return void 0},ce=function(e){return function(){var t,n,i,r;return i=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],"object"==typeof i&&t.length&&(n=i,r=t[0],i=function(){return n[r].apply(n,arguments)},t=t.slice(1)),e.apply(null,[i].concat(fe.call(t)))}},U=function(t,n){return ce(function(){var i,r,o;return r=arguments[0],i=2<=arguments.length?fe.call(arguments,1):[],o=J(n,[function(e,t){return r.apply(null,fe.call(e).concat([t]))}]),le.apply(null,[e,t,r].concat(fe.call(i),[e.combineAsArray(i).flatMap(o)]))})},e.fromCallback=U("fromCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],e.fromBinder(function(e){return V(n,t)(e),Z},function(e){return[e,A()]})}),e.fromNodeCallback=U("fromNodeCallback",function(){var t,n;return n=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],e.fromBinder(function(e){return V(n,t)(e),Z},function(e,t){return e?[new u(e),A()]:[t,A()]})}),e.fromPoll=function(t,n){return le(e,"fromPoll",t,n,e.fromBinder(function(n){var i;return i=e.scheduler.setInterval(n,t),function(){return e.scheduler.clearInterval(i)}},n))},e.interval=function(t,n){return null==n&&(n={}),le(e,"interval",t,n,e.fromPoll(t,function(){return K(n)}))},e.constant=function(t){return new g(j(e,"constant",t),function(e){return e(L(t)),e(A()),Z})},e.never=function(){return new c(j(e,"never"),function(e){return e(A()),Z})},e.once=function(t){return new c(j(e,"once",t),function(e){return e(re(t)),e(A()),Z})},e.fromArray=function(t){var n;return C(t),n=0,new c(j(e,"fromArray",t),function(i){var r,o,a;for(o=!1,r=e.more;r!==e.noMore&&!o;)n>=t.length?(i(A()),r=e.noMore):(a=t[n++],r=i(re(a)));return function(){return o=!0}})},e.mergeAll=function(){var t;return t=1<=arguments.length?fe.call(arguments,0):[],z(t[0])&&(t=t[0]),t.length?new c(j.apply(null,[e,"mergeAll"].concat(fe.call(t))),function(n){var i,r,o;return i=0,o=function(r){return function(o){return r.dispatcher.subscribe(function(r){var a;return r.isEnd()?(i++,i===t.length?n(A()):e.more):(a=n(r),a===e.noMore&&o(),a)})}},r=de.map(o,t),I.apply(null,r)}):e.never()},e.zipAsArray=function(){var t;return t=1<=arguments.length?fe.call(arguments,0):[],z(t[0])&&(t=t[0]),le.apply(null,[e,"zipAsArray"].concat(fe.call(t),[e.zipWith(t,function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[]})]))},e.zipWith=function(){var t,n,i;return t=arguments[0],n=2<=arguments.length?fe.call(arguments,1):[],q(t)||(i=[t,n[0]],n=i[0],t=i[1]),n=de.map(function(e){return e.toEventStream()},n),le.apply(null,[e,"zipWith",t].concat(fe.call(n),[e.when(n,t)]))},e.groupSimultaneous=function(){var n,i,r;return r=1<=arguments.length?fe.call(arguments,0):[],1===r.length&&z(r[0])&&(r=r[0]),i=function(){var e,i,o;
for(o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(new t(n));return o}(),le.apply(null,[e,"groupSimultaneous"].concat(fe.call(r),[e.when(i,function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[]})]))},e.combineAsArray=function(){var t,n,i,r,o,a,s;for(o=1<=arguments.length?fe.call(arguments,0):[],1===o.length&&z(o[0])&&(o=o[0]),t=a=0,s=o.length;s>a;t=++a)r=o[t],H(r)||(o[t]=e.constant(r));return o.length?(i=function(){var e,t,i;for(i=[],e=0,t=o.length;t>e;e++)n=o[e],i.push(new b(n,!0));return i}(),le.apply(null,[e,"combineAsArray"].concat(fe.call(o),[e.when(i,function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[]}).toProperty()]))):e.constant([])},e.onValues=function(){var t,n,i;return n=2<=arguments.length?fe.call(arguments,0,i=arguments.length-1):(i=0,[]),t=arguments[i++],e.combineAsArray(n).onValues(t)},e.combineWith=function(){var t,n;return t=arguments[0],n=2<=arguments.length?fe.call(arguments,1):[],le.apply(null,[e,"combineWith",t].concat(fe.call(n),[e.combineAsArray(n).map(function(e){return t.apply(null,e)})]))},e.combineTemplate=function(t){var n,i,r,o,a,s,u,l,c,d;return u=[],d=[],s=function(e){return e[e.length-1]},c=function(e,t,n){return s(e)[t]=n},n=function(e,t){return function(n,i){return c(n,e,i[t])}},a=function(e,t){return function(n){return c(n,e,t)}},l=function(e){return z(e)?[]:{}},r=function(e,t){var i,r;return H(t)?(d.push(t),u.push(n(e,d.length-1))):t!==Object(t)||"function"==typeof t||t instanceof RegExp||t instanceof Date?u.push(a(e,t)):(r=function(e){return function(n){var i;return i=l(t),c(n,e,i),n.push(i)}},i=function(e){return e.pop()},u.push(r(e)),o(t),u.push(i))},o=function(e){return de.each(e,r)},o(t),i=function(e){var n,i,r,o,a;for(r=l(t),n=[r],o=0,a=u.length;a>o;o++)(i=u[o])(n,e);return r},le(e,"combineTemplate",t,e.combineAsArray(d).map(i))},e.retry=function(t){var n,i,r,o,a,s;if(!q(t.source))throw new d("'source' option has to be a function");return s=t.source,o=t.retries||0,r=t.maxRetries||o,n=t.delay||function(){return 0},i=t.isRetryable||function(){return!0},a=function(t){var a,u;return u={source:s,retries:o-1,maxRetries:r,delay:n,isRetryable:i},a=function(){return e.retry(u)},e.later(n(t)).filter(!1).concat(e.once().flatMap(a))},le(e,"retry",t,s().flatMapError(function(t){return i(t)&&o>0?a({error:t,retriesDone:r-o}):e.once(new u(t))}))},M=0,l=function(){function e(){this.id=++M}return e.prototype.isEvent=function(){return!0},e.prototype.isEnd=function(){return!1},e.prototype.isInitial=function(){return!1},e.prototype.isNext=function(){return!1},e.prototype.isError=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.filter=function(){return!0},e.prototype.inspect=function(){return this.toString()},e.prototype.log=function(){return this.toString()},e}(),f=function(e){function t(e,n){t.__super__.constructor.call(this),!n&&q(e)||e instanceof t?(this.valueF=e,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=e)}return me(t,e),t.prototype.isNext=function(){return!0},t.prototype.hasValue=function(){return!0},t.prototype.value=function(){return this.valueF instanceof t?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},t.prototype.fmap=function(e){var t,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return e(n)})):(t=this,this.apply(function(){return e(t.value())}))},t.prototype.apply=function(e){return new t(e)},t.prototype.filter=function(e){return e(this.value())},t.prototype.toString=function(){return de.toString(this.value())},t.prototype.log=function(){return this.value()},t}(l),p=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return me(t,e),t.prototype.isInitial=function(){return!0},t.prototype.isNext=function(){return!1},t.prototype.apply=function(e){return new t(e)},t.prototype.toNext=function(){return new f(this)},t}(f),s=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return me(t,e),t.prototype.isEnd=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<end>"},t}(l),u=function(e){function t(e){this.error=e}return me(t,e),t.prototype.isError=function(){return!0},t.prototype.fmap=function(){return this},t.prototype.apply=function(){return this},t.prototype.toString=function(){return"<error> "+de.toString(this.error)},t}(l),N=0,m=function(){function t(e){this.id=++N,le(e,this),this.initialDesc=this.desc}return t.prototype.subscribe=function(e){return _.wrappedSubscribe(this,e)},t.prototype.subscribeInternal=function(e){return this.dispatcher.subscribe(e)},t.prototype.onValue=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.hasValue()?e(t.value()):void 0})},t.prototype.onValues=function(e){return this.onValue(function(t){return e.apply(null,t)})},t.prototype.onError=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.isError()?e(t.error):void 0})},t.prototype.onEnd=function(){var e;return e=X(arguments),this.subscribe(function(t){return t.isEnd()?e():void 0})},t.prototype.errors=function(){return le(this,"errors",this.filter(function(){return!1}))},t.prototype.filter=function(){var t,n;return n=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],$(this,n,t,function(t){return le(this,"filter",t,this.withHandler(function(n){return n.filter(t)?this.push(n):e.more}))})},t.prototype.takeWhile=function(){var t,n;return n=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],$(this,n,t,function(t){return le(this,"takeWhile",t,this.withHandler(function(n){return n.filter(t)?this.push(n):(this.push(A()),e.noMore)}))})},t.prototype.endOnError=function(){var e,t;return t=arguments[0],e=2<=arguments.length?fe.call(arguments,1):[],null==t&&(t=!0),$(this,t,e,function(e){return le(this,"endOnError",this.withHandler(function(t){return t.isError()&&e(t.error)?(this.push(t),this.push(A())):this.push(t)}))})},t.prototype.take=function(t){return 0>=t?e.never():le(this,"take",t,this.withHandler(function(n){return n.hasValue()?(t--,t>0?this.push(n):(0===t&&this.push(n),this.push(A()),e.noMore)):this.push(n)}))},t.prototype.map=function(){var e,t;return t=arguments[0],e=2<=arguments.length?fe.call(arguments,1):[],t instanceof g?t.sampledBy(this,P):$(this,t,e,function(e){return le(this,"map",e,this.withHandler(function(t){return this.push(t.fmap(e))}))})},t.prototype.mapError=function(){var e;return e=X(arguments),le(this,"mapError",e,this.withHandler(function(t){return t.isError()?this.push(K(e(t.error))):this.push(t)}))},t.prototype.mapEnd=function(){var t;return t=X(arguments),le(this,"mapEnd",t,this.withHandler(function(n){return n.isEnd()?(this.push(K(t(n))),this.push(A()),e.noMore):this.push(n)}))},t.prototype.doAction=function(){var e;return e=X(arguments),le(this,"doAction",e,this.withHandler(function(t){return t.hasValue()&&e(t.value()),this.push(t)}))},t.prototype.skip=function(t){return le(this,"skip",t,this.withHandler(function(n){return n.hasValue()&&t>0?(t--,e.more):this.push(n)}))},t.prototype.skipDuplicates=function(e){return null==e&&(e=function(e,t){return e===t}),le(this,"skipDuplicates",this.withStateMachine(h,function(t,n){return n.hasValue()?n.isInitial()||t===h||!e(t.get(),n.value())?[new y(n.value()),[n]]:[t,[]]:[t,[n]]}))},t.prototype.skipErrors=function(){return le(this,"skipErrors",this.withHandler(function(t){return t.isError()?e.more:this.push(t)}))},t.prototype.withStateMachine=function(t,n){var i;return i=t,le(this,"withStateMachine",t,n,this.withHandler(function(t){var r,o,a,s,u,l,c;for(r=n(i,t),o=r[0],s=r[1],i=o,u=e.more,l=0,c=s.length;c>l;l++)if(a=s[l],u=this.push(a),u===e.noMore)return u;return u}))},t.prototype.scan=function(t,n){var i,r,o;return n=ie(n),i=se(t),o=function(t){return function(o){var a,s,u,l;return a=!1,l=Z,s=e.more,u=function(){return a?void 0:i.forEach(function(t){return a=!0,s=o(new p(function(){return t})),s===e.noMore?(l(),l=Z):void 0})},l=t.dispatcher.subscribe(function(t){var r,l;return t.hasValue()?a&&t.isInitial()?e.more:(t.isInitial()||u(),a=!0,l=i.getOrElse(void 0),r=n(l,t.value()),i=new y(r),o(t.apply(function(){return r}))):(t.isEnd()&&(s=u()),s!==e.noMore?o(t):void 0)}),_.whenDoneWith(r,u),l}}(this),r=new g(j(this,"scan",t,n),o)},t.prototype.fold=function(e,t){return le(this,"fold",e,t,this.scan(e,t).sampledBy(this.filter(!1).mapEnd().toProperty()))},t.prototype.zip=function(t,n){return null==n&&(n=Array),le(this,"zip",t,e.zipWith([this,t],n))},t.prototype.diff=function(e,t){return t=ie(t),le(this,"diff",e,t,this.scan([e],function(e,n){return[n,t(e[0],n)]}).filter(function(e){return 2===e.length}).map(function(e){return e[1]}))},t.prototype.flatMap=function(){return B(this,G(arguments))},t.prototype.flatMapFirst=function(){return B(this,G(arguments),!0)},t.prototype.flatMapWithConcurrencyLimit=function(){var e,t;return t=arguments[0],e=2<=arguments.length?fe.call(arguments,1):[],le.apply(null,[this,"flatMapWithConcurrencyLimit",t].concat(fe.call(e),[B(this,G(e),!1,t)]))},t.prototype.flatMapLatest=function(){var e,t;return e=G(arguments),t=this.toEventStream(),le(this,"flatMapLatest",e,t.flatMap(function(n){return Q(e(n)).takeUntil(t)}))},t.prototype.flatMapError=function(t){return le(this,"flatMapError",t,this.mapError(function(e){return new u(e)}).flatMap(function(n){return n instanceof u?t(n.error):e.once(n)}))},t.prototype.flatMapConcat=function(){return le.apply(null,[this,"flatMapConcat"].concat(fe.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(fe.call(arguments)))]))},t.prototype.bufferingThrottle=function(t){return le(this,"bufferingThrottle",t,this.flatMapConcat(function(n){return e.once(n).concat(e.later(t).filter(!1))}))},t.prototype.not=function(){return le(this,"not",this.map(function(e){return!e}))},t.prototype.log=function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[],this.subscribe(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,fe.call(e).concat([t.log()])):void 0}),this},t.prototype.slidingWindow=function(e,t){return null==t&&(t=0),le(this,"slidingWindow",e,t,this.scan([],function(t,n){return t.concat([n]).slice(-e)}).filter(function(e){return e.length>=t}))},t.prototype.combine=function(t,n){var i;return i=ie(n),le(this,"combine",t,n,e.combineAsArray(this,t).map(function(e){return i(e[0],e[1])}))},t.prototype.decode=function(t){return le(this,"decode",t,this.combine(e.combineTemplate(t),function(e,t){return t[e]}))},t.prototype.awaiting=function(t){return le(this,"awaiting",t,e.groupSimultaneous(this,t).map(function(e){var t,n;return t=e[0],n=e[1],0===n.length}).toProperty(!1).skipDuplicates())},t.prototype.name=function(e){return this._name=e,this},t.prototype.withDescription=function(){return j.apply(null,arguments).apply(this)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),m.prototype.reduce=m.prototype.fold,m.prototype.assign=m.prototype.onValue,m.prototype.inspect=m.prototype.toString,B=function(t,n,r,o){var a,s,u;return u=[t],a=[],s=new c(j(t,"flatMap"+(r?"First":""),n),function(s){var u,l,c,d,f;return c=new i,d=[],f=function(t){var i;return i=Q(n(t.value())),a.push(i),c.add(function(t,n){return i.dispatcher.subscribe(function(r){var o;return r.isEnd()?(de.remove(i,a),l(),u(n),e.noMore):(r instanceof p&&(r=r.toNext()),o=s(r),o===e.noMore&&t(),o)})})},l=function(){var e;return e=d.shift(),e?f(e):void 0},u=function(e){return e(),c.empty()?s(A()):void 0},c.add(function(n,i){return t.dispatcher.subscribe(function(t){return t.isEnd()?u(i):t.isError()?s(t):r&&c.count()>1?e.more:c.unsubscribed?e.noMore:o&&c.count()>o?d.push(t):f(t)})}),c.unsubscribe}),s.internalDeps=function(){return a.length?u.concat(a):u},s},c=function(t){function n(e,t,i){q(e)&&(i=t,t=e,e=[]),n.__super__.constructor.call(this,e),k(t),this.dispatcher=new a(t,i),te(this)}return me(n,t),n.prototype.delay=function(t){return le(this,"delay",t,this.flatMap(function(n){return e.later(t,n)}))},n.prototype.debounce=function(t){return le(this,"debounce",t,this.flatMapLatest(function(n){return e.later(t,n)}))},n.prototype.debounceImmediate=function(t){return le(this,"debounceImmediate",t,this.flatMapFirst(function(n){return e.once(n).concat(e.later(t).filter(!1))}))},n.prototype.throttle=function(e){return le(this,"throttle",e,this.bufferWithTime(e).map(function(e){return e[e.length-1]}))},n.prototype.bufferWithTime=function(e){return le(this,"bufferWithTime",e,this.bufferWithTimeOrCount(e,Number.MAX_VALUE))},n.prototype.bufferWithCount=function(e){return le(this,"bufferWithCount",e,this.bufferWithTimeOrCount(void 0,e))},n.prototype.bufferWithTimeOrCount=function(e,t){var n;return n=function(n){return n.values.length===t?n.flush():void 0!==e?n.schedule():void 0},le(this,"bufferWithTimeOrCount",e,t,this.buffer(e,n,n))},n.prototype.buffer=function(t,n,i){var r,o,a;return null==n&&(n=Z),null==i&&(i=Z),r={scheduled:!1,end:void 0,values:[],flush:function(){var t;if(this.scheduled=!1,this.values.length>0){if(t=this.push(K(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==e.noMore)return i(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:(this.scheduled=!0,t(function(e){return function(){return e.flush()}}(this)))}},a=e.more,q(t)||(o=t,t=function(t){return e.scheduler.setTimeout(t,o)}),le(this,"buffer",this.withHandler(function(e){return r.push=function(e){return function(t){return e.push(t)}}(this),e.isError()?a=this.push(e):e.isEnd()?(r.end=e,r.scheduled||r.flush()):(r.values.push(e.value()),n(r)),a}))},n.prototype.merge=function(t){var n;return S(t),n=this,le(n,"merge",t,e.mergeAll(this,t))},n.prototype.toProperty=function(t){var n,i;return i=0===arguments.length?h:se(function(){return t}),n=this.dispatcher,new g(j(this,"toProperty",t),function(t){var r,o,a,s;return r=!1,s=Z,o=e.more,a=function(){return r?void 0:i.forEach(function(n){return r=!0,o=t(new p(n)),o===e.noMore?(s(),s=Z):void 0})},s=n.subscribe(function(n){return n.hasValue()?r&&n.isInitial()?e.more:(n.isInitial()||a(),r=!0,i=new y(n),t(n)):(n.isEnd()&&(o=a()),o!==e.noMore?t(n):void 0)}),a(),s})},n.prototype.toEventStream=function(){return this},n.prototype.sampledBy=function(e,t){return le(this,"sampledBy",e,t,this.toProperty().sampledBy(e,t))},n.prototype.concat=function(e){var t;return t=this,new n(j(t,"concat",e),function(n){var i,r;return r=Z,i=t.dispatcher.subscribe(function(t){return t.isEnd()?r=e.dispatcher.subscribe(n):n(t)}),function(){return i(),r()}})},n.prototype.takeUntil=function(t){var n;return n={},le(this,"takeUntil",t,e.groupSimultaneous(this.mapEnd(n),t.skipErrors()).withHandler(function(i){var r,o,a,s,u,l;if(i.hasValue()){if(l=i.value(),r=l[0],t=l[1],t.length)return this.push(A());for(o=e.more,s=0,u=r.length;u>s;s++)a=r[s],o=a===n?this.push(A()):this.push(K(a));return o}return this.push(i)}))},n.prototype.skipUntil=function(e){var t;return t=e.take(1).map(!0).toProperty(!1),le(this,"skipUntil",e,this.filter(t))},n.prototype.skipWhile=function(){var t,n,i;return n=arguments[0],t=2<=arguments.length?fe.call(arguments,1):[],i=!1,$(this,n,t,function(t){return le(this,"skipWhile",t,this.withHandler(function(n){return!i&&n.hasValue()&&t(n.value())?e.more:(n.hasValue()&&(i=!0),this.push(n))}))})},n.prototype.holdWhen=function(t){var n,i,r;return r=t.startWith(!1),i=r.filter(function(e){return!e}),n=r.filter(de.id),le(this,"holdWhen",t,this.filter(!1).merge(r.flatMapConcat(function(t){return function(r){return r?t.scan([],function(e,t){return e.concat(t)}).sampledBy(i).take(1).flatMap(e.fromArray):t.takeUntil(n)}}(this))))},n.prototype.startWith=function(t){return le(this,"startWith",t,e.once(t).concat(this))},n.prototype.withHandler=function(e){return new n(j(this,"withHandler",e),this.dispatcher.subscribe,e)},n}(m),g=function(t){function n(e,t,i){q(e)&&(i=t,t=e,e=[]),n.__super__.constructor.call(this,e),k(t),this.dispatcher=new v(this,t,i),te(this)}return me(n,t),n.prototype.sampledBy=function(t,i){var r,o,a,s,u;return null!=i?i=ie(i):(r=!0,i=function(e){return e.value()}),u=new b(this,!1,r),a=new b(t,!0,r),s=e.when([u,a],i),o=t instanceof n?s.toProperty():s,le(this,"sampledBy",t,i,o)},n.prototype.sample=function(t){return le(this,"sample",t,this.sampledBy(e.interval(t,{})))},n.prototype.changes=function(){return new c(j(this,"changes"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()?void 0:t(e)})}}(this))},n.prototype.withHandler=function(e){return new n(j(this,"withHandler",e),this.dispatcher.subscribe,e)},n.prototype.toProperty=function(){return T(arguments),this},n.prototype.toEventStream=function(){return new c(j(this,"toEventStream"),function(e){return function(t){return e.dispatcher.subscribe(function(e){return e.isInitial()&&(e=e.toNext()),t(e)})}}(this))},n.prototype.and=function(e){return le(this,"and",e,this.combine(e,function(e,t){return e&&t}))},n.prototype.or=function(e){return le(this,"or",e,this.combine(e,function(e,t){return e||t}))},n.prototype.delay=function(e){return this.delayChanges("delay",e,function(t){return t.delay(e)})},n.prototype.debounce=function(e){return this.delayChanges("debounce",e,function(t){return t.debounce(e)})},n.prototype.throttle=function(e){return this.delayChanges("throttle",e,function(t){return t.throttle(e)})},n.prototype.delayChanges=function(){var e,t,n;return e=2<=arguments.length?fe.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],le.apply(null,[this].concat(fe.call(e),[w(this,t(this.changes()))]))},n.prototype.takeUntil=function(e){var t;return t=this.changes().takeUntil(e),le(this,"takeUntil",e,w(this,t))},n.prototype.startWith=function(e){return le(this,"startWith",e,this.scan(e,function(e,t){return t}))},n.prototype.bufferingThrottle=function(){var e;return(e=n.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(e,arguments).toProperty()},n}(m),$=function(e,t,n,i){var r;return t instanceof g?(r=t.sampledBy(e,function(e,t){return[e,t]}),i.call(r,function(e){var t,n;return t=e[0],n=e[1],t}).map(function(e){var t,n;return t=e[0],n=e[1]})):(t=V(t,n),i.call(e,t))},w=function(t,n){var i;return i=new c(j(t,"justInitValue"),function(n){var r,o;return o=void 0,r=t.dispatcher.subscribe(function(t){return t.isEnd()||(o=t),e.noMore}),_.whenDoneWith(i,function(){return null!=o&&n(o),n(A())}),r}),i.concat(n).toProperty()},a=function(){function t(e,t){this._subscribe=e,this._handleEvent=t,this.subscribe=ge(this.subscribe,this),this.handleEvent=ge(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(e){return this.subscriptions=de.without(e,this.subscriptions)},t.prototype.push=function(e){return e.isEnd()&&(this.ended=!0),_.inTransaction(e,this,this.pushIt,[e])},t.prototype.pushIt=function(t){var n,i,r,o,a,s;if(this.pushing)return this.queue.push(t),e.more;if(t!==this.prevError){t.isError()&&(this.prevError=t),r=!1;try{for(this.pushing=!0,o=this.subscriptions,a=0,s=o.length;s>a;a++)i=o[a],n=i.sink(t),(n===e.noMore||t.isEnd())&&this.removeSub(i);r=!0}finally{this.pushing=!1,r||(this.queue=[])}for(r=!0;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?e.more:(this.unsubscribeFromSource(),e.noMore)}},t.prototype.handleEvent=function(e){return this._handleEvent?this._handleEvent(e):this.push(e)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(e){var t;return this.ended?(e(A()),Z):(k(e),t={sink:e},this.subscriptions.push(t),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),k(this.unsubSrc)),function(e){return function(){return e.removeSub(t),e.hasSubscribers()?void 0:e.unsubscribeFromSource()}}(this))},t}(),v=function(t){function n(e,t,i){this.property=e,this.subscribe=ge(this.subscribe,this),n.__super__.constructor.call(this,t,i),this.current=h,this.currentValueRootId=void 0,this.propertyEnded=!1}return me(n,t),n.prototype.push=function(e){return e.isEnd()&&(this.propertyEnded=!0),e.hasValue()&&(this.current=new y(e),this.currentValueRootId=_.currentEventId()),n.__super__.push.call(this,e)},n.prototype.maybeSubSource=function(t,n){return n===e.noMore?Z:this.propertyEnded?(t(A()),Z):a.prototype.subscribe.call(this,t)},n.prototype.subscribe=function(t){var n,i,r,o;return i=!1,r=e.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(n=_.currentEventId(),o=this.currentValueRootId,!this.propertyEnded&&o&&n&&n!==o?(_.whenDoneWith(this.property,function(e){return function(){return e.currentValueRootId===o?t(L(e.current.get().value())):void 0}}(this)),this.maybeSubSource(t,r)):(_.inTransaction(void 0,this,function(){return r=function(){try{return t(L(this.current.get().value()))}catch(n){return e.more}}.call(this)},[]),this.maybeSubSource(t,r))):this.maybeSubSource(t,r)},n}(a),n=function(t){function n(){this.guardedSink=ge(this.guardedSink,this),this.subscribeAll=ge(this.subscribeAll,this),this.unsubAll=ge(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,n.__super__.constructor.call(this,j(e,"Bus"),this.subscribeAll)}return me(n,t),n.prototype.unsubAll=function(){var e,t,n,i;for(i=this.subscriptions,t=0,n=i.length;n>t;t++)e=i[t],"function"==typeof e.unsub&&e.unsub();return void 0},n.prototype.subscribeAll=function(e){var t,n,i,r;for(this.sink=e,r=D(this.subscriptions),n=0,i=r.length;i>n;n++)t=r[n],this.subscribeInput(t);return this.unsubAll},n.prototype.guardedSink=function(t){return function(n){return function(i){return i.isEnd()?(n.unsubscribeInput(t),e.noMore):n.sink(i)}}(this)},n.prototype.subscribeInput=function(e){return e.unsub=e.input.dispatcher.subscribe(this.guardedSink(e.input))},n.prototype.unsubscribeInput=function(e){var t,n,i,r,o;for(o=this.subscriptions,t=i=0,r=o.length;r>i;t=++i)if(n=o[t],n.input===e)return"function"==typeof n.unsub&&n.unsub(),void this.subscriptions.splice(t,1)},n.prototype.plug=function(e){var t;if(!this.ended)return t={input:e},this.subscriptions.push(t),null!=this.sink&&this.subscribeInput(t),function(t){return function(){return t.unsubscribeInput(e)}}(this)},n.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(A()):void 0},n.prototype.push=function(e){return"function"==typeof this.sink?this.sink(K(e)):void 0},n.prototype.error=function(e){return"function"==typeof this.sink?this.sink(new u(e)):void 0},n}(c),b=function(){function e(e,t,n){this.obs=e,this.sync=t,this.lazy=null!=n?n:!1,this.queue=[]}return e.prototype.subscribe=function(e){return this.obs.dispatcher.subscribe(e)},e.prototype.toString=function(){return this.obs.toString()},e.prototype.markEnded=function(){return this.ended=!0},e.prototype.consume=function(){return this.lazy?{value:de.always(this.queue[0])}:this.queue[0]},e.prototype.push=function(e){return this.queue=[e]},e.prototype.mayHave=function(){return!0},e.prototype.hasAtLeast=function(){return this.queue.length},e.prototype.flatten=!0,e}(),r=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return me(t,e),t.prototype.consume=function(){return this.queue.shift()},t.prototype.push=function(e){return this.queue.push(e)},t.prototype.mayHave=function(e){return!this.ended||this.queue.length>=e},t.prototype.hasAtLeast=function(e){return this.queue.length>=e},t.prototype.flatten=!1,t}(b),t=function(e){function t(e){t.__super__.constructor.call(this,e,!0)}return me(t,e),t.prototype.consume=function(){var e;return e=this.queue,this.queue=[],{value:function(){return e}}},t.prototype.push=function(e){return this.queue.push(e.value())},t.prototype.hasAtLeast=function(){return!0},t}(b),b.isTrigger=function(e){return e instanceof b?e.sync:e instanceof c},b.fromObservable=function(e){return e instanceof b?e:e instanceof g?new b(e,!1):new r(e,!0)},j=function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?fe.call(arguments,2):[],(t||n)instanceof o?t||n:new o(t,n,e)},O=function(e){return z(e)?de.flatMap(O,e):H(e)?[e]:e instanceof b?[e.obs]:[]},o=function(){function e(e,t,n){this.context=e,this.method=t,this.args=n,this.cached=void 0}return e.prototype.deps=function(){return this.cached||(this.cached=O([this.context].concat(this.args)))},e.prototype.apply=function(e){return e.desc=this,e},e.prototype.toString=function(){return de.toString(this.context)+"."+de.toString(this.method)+"("+de.map(de.toString,this.args)+")"},e}(),le=function(){var e,t,n;return e=2<=arguments.length?fe.call(arguments,0,n=arguments.length-1):(n=0,[]),t=arguments[n++],j.apply(null,e).apply(t)},e.when=function(){var t,n,i,r,o,a,s,u,l,d,p,f,h,m,g,v,y,w,C,S;if(0===arguments.length)return e.never();for(o=arguments.length,g="when: expecting arguments in the form (Observable+,function)+",x(g,o%2===0),h=[],l=[],n=0,d=[];o>n;){for(d[n]=arguments[n],d[n+1]=arguments[n+1],u=de.toArray(arguments[n]),t=arguments[n+1],s={f:q(t)?t:function(){return t},ixs:[]},m=!1,v=0,w=u.length;w>v;v++){for(f=u[v],i=de.indexOf(h,f),m||(m=b.isTrigger(f)),0>i&&(h.push(f),i=h.length-1),S=s.ixs,y=0,C=S.length;C>y;y++)r=S[y],r.index===i&&r.count++;s.ixs.push({index:i,count:1})}x("At least one EventStream required",m||!u.length),u.length>0&&l.push(s),n+=2}return h.length?(h=de.map(b.fromObservable,h),a=de.any(h,function(e){return e.flatten})&&F(de.map(function(e){return e.obs},h)),p=new c(j.apply(null,[e,"when"].concat(fe.call(d))),function(t){var i,r,o,s,u,c,d;return d=[],o=!1,s=function(e){var t,i,r;for(r=e.ixs,t=0,i=r.length;i>t;t++)if(n=r[t],!h[n.index].hasAtLeast(n.count))return!1;return!0},r=function(e){return!e.sync||e.ended},i=function(e){var t,i,r;for(r=e.ixs,t=0,i=r.length;i>t;t++)if(n=r[t],!h[n.index].mayHave(n.count))return!0},u=function(e){return!e.source.flatten},c=function(c){return function(f){var m,g,v;return g=function(){return _.whenDoneWith(p,m)},v=function(){var i,r,o,a,c,p;if(!(d.length>0))return e.more;for(o=e.more,a=d.pop(),c=0,p=l.length;p>c;c++)if(r=l[c],s(r))return i=function(){var e,t,i,o;for(i=r.ixs,o=[],e=0,t=i.length;t>e;e++)n=i[e],o.push(h[n.index].consume());return o}(),o=t(a.e.apply(function(){var e,t;return t=function(){var t,n,r;for(r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.value());return r}(),r.f.apply(r,t)})),d.length&&(d=de.filter(u,d)),o===e.noMore?o:v()},m=function(){var n;return n=v(),o&&(o=!1,(de.all(h,r)||de.all(l,i))&&(n=e.noMore,t(A()))),n===e.noMore&&f(),n},c.subscribe(function(n){var i;return n.isEnd()?(o=!0,c.markEnded(),g()):n.isError()?i=t(n):(c.push(n),c.sync&&(d.push({source:c,e:n}),a||_.hasWaiters()?g():m())),i===e.noMore&&f(),i||e.more})}},I.apply(null,function(){var e,t,n;for(n=[],e=0,t=h.length;t>e;e++)f=h[e],n.push(c(f));return n}())})):e.never()},F=function(e,t){var n;return null==t&&(t=[]),n=function(e){var i;return de.contains(t,e)?!0:(i=e.internalDeps(),i.length?(t.push(e),de.any(i,n)):(t.push(e),!1))},de.any(e,n)},e.update=function(){var t,n,i,r;for(n=arguments[0],r=2<=arguments.length?fe.call(arguments,1):[],i=function(e){return function(){var t;return t=1<=arguments.length?fe.call(arguments,0):[],function(n){return e.apply(null,[n].concat(t))}}},t=r.length-1;t>0;)r[t]instanceof Function||(r[t]=function(e){return function(){return e}}(r[t])),r[t]=i(r[t]),t-=2;return le.apply(null,[e,"update",n].concat(fe.call(r),[e.when.apply(e,r).scan(n,function(e,t){return t(e)})]))},I=function(){var e;return e=1<=arguments.length?fe.call(arguments,0):[],new i(e).unsubscribe},i=function(){function e(e){var t,n,i;for(null==e&&(e=[]),this.unsubscribe=ge(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],n=0,i=e.length;i>n;n++)t=e[n],this.add(t)}return e.prototype.add=function(e){var t,n,i;if(!this.unsubscribed)return t=!1,n=Z,this.starting.push(e),i=function(i){return function(){return i.unsubscribed?void 0:(t=!0,i.remove(n),de.remove(e,i.starting))}}(this),n=e(this.unsubscribe,i),this.unsubscribed||t||this.subscriptions.push(n),de.remove(e,this.starting),n},e.prototype.remove=function(e){return this.unsubscribed?void 0:void 0!==de.remove(e,this.subscriptions)?e():void 0},e.prototype.unsubscribe=function(){var e,t,n,i;if(!this.unsubscribed){for(this.unsubscribed=!0,i=this.subscriptions,t=0,n=i.length;n>t;t++)(e=i[t])();return this.subscriptions=[],this.starting=[]}},e.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},e.prototype.empty=function(){return 0===this.count()},e}(),e.CompositeUnsubscribe=i,y=function(){function e(e){this.value=e}return e.prototype.getOrElse=function(){return this.value},e.prototype.get=function(){return this.value},e.prototype.filter=function(t){return t(this.value)?new e(this.value):h},e.prototype.map=function(t){return new e(t(this.value))},e.prototype.forEach=function(e){return e(this.value)},e.prototype.isDefined=!0,e.prototype.toArray=function(){return[this.value]},e.prototype.inspect=function(){return"Some("+this.value+")"},e.prototype.toString=function(){return this.inspect()},e}(),h={getOrElse:function(e){return e},filter:function(){return h},map:function(){return h},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},_=function(){var t,n,i,r,o,a,s,u,l,c,d,p,f,h;return c=void 0,d=[],p={},n=[],i=0,t=function(e){return c?n.push(e):e()},f=function(e,t){var n;return c?(n=p[e.id],null==n?(n=p[e.id]=[t],d.push(e)):n.push(t)):t()},o=function(){for(;d.length>0;)s(0);return void 0},s=function(e){var t,n,i,r,o,s;for(n=d[e],i=n.id,r=p[i],d.splice(e,1),delete p[i],a(n),o=0,s=r.length;s>o;o++)(t=r[o])();return void 0},a=function(e){var t,n,i,r,o;for(n=e.internalDeps(),r=0,o=n.length;o>r;r++)t=n[r],a(t),p[t.id]&&(i=de.indexOf(d,t),s(i));return void 0},l=function(e,t,r,a){var s,u;if(c)return r.apply(t,a);for(c=e,u=r.apply(t,a),o(),c=void 0;i<n.length;)s=n[i],i++,s();return i=0,n=[],u},r=function(){return c?c.id:void 0},h=function(n,i){var r,o,a;return a=!1,r=function(){},o=function(){return a=!0,r()},r=n.dispatcher.subscribe(function(n){return t(function(){var t;return a||(t=i(n),t!==e.noMore)?void 0:o()})}),o},u=function(){return d.length>0},{whenDoneWith:f,hasWaiters:u,inTransaction:l,currentEventId:r,wrappedSubscribe:h}}(),e.EventStream=c,e.Property=g,e.Observable=m,e.Bus=n,e.Initial=p,e.Next=f,e.End=s,e.Error=u,Z=function(){},W=function(e,t){return t},P=function(e,t){return e},L=function(e){return new p(e,!0)},K=function(e){return new f(e,!0)},A=function(){return new s},re=function(e){return e instanceof l?e:K(e)},D=function(e){return e.slice(0)},x=function(e,t){if(!t)throw new d(e)},S=function(e){if(!(e instanceof c))throw new d("not an EventStream : "+e)},k=function(e){return x("not a function : "+e,q(e))},q=function(e){return"function"==typeof e},z=function(e){return e instanceof Array},H=function(e){return e instanceof m},C=function(e){if(!z(e))throw new d("not an array : "+e)},T=function(e){return x("no arguments supported",0===e.length)},E=function(e){if("string"!=typeof e)throw new d("not a string : "+e)},J=function(e,t){return function(){var n;return n=1<=arguments.length?fe.call(arguments,0):[],e.apply(null,t.concat(n))}},G=function(e){return 1===e.length&&H(e[0])?de.always(e[0]):X(e)},X=function(e){return e=Array.prototype.slice.call(e),Y.apply(null,e)},Y=ce(function(){var e,t;return t=arguments[0],e=2<=arguments.length?fe.call(arguments,1):[],q(t)?e.length?J(t,e):t:R(t)?oe(t,e):de.always(t)}),V=function(e,t){return Y.apply(null,[e].concat(fe.call(t)))},Q=function(t){return H(t)?t:e.once(t)},R=function(e){return"string"==typeof e&&e.length>1&&"."===e.charAt(0)},e.isFieldKey=R,oe=function(e,t){var n,i;return i=e.slice(1).split("."),n=de.map(ue(t),i),function(t){var i,r;for(i=0,r=n.length;r>i;i++)e=n[i],t=e(t);return t}},ue=function(e){return function(t){return function(n){var i;return null==n?void 0:(i=n[t],q(i)?i.apply(n,e):i)}}},ae=function(e){return e.slice(1)},ie=function(e){var t;return q(e)?e:R(e)?(t=ae(e),function(e,n){return e[t](n)}):x("not a function or a field key: "+e,!1)},se=function(e){return e instanceof y||e===h?e:new y(e)},de={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t===i)return n;return-1},indexWhere:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t(i))return n;return-1},
head:function(e){return e[0]},always:function(e){return function(){return e}},negate:function(e){return function(t){return!e(t)}},empty:function(e){return 0===e.length},tail:function(e){return e.slice(1,e.length)},filter:function(e,t){var n,i,r,o;for(n=[],r=0,o=t.length;o>r;r++)i=t[r],e(i)&&n.push(i);return n},map:function(e,t){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push(e(n));return o},each:function(e,t){var n,i;for(n in e)i=e[n],t(n,i);return void 0},toArray:function(e){return z(e)?e:[e]},contains:function(e,t){return-1!==de.indexOf(e,t)},id:function(e){return e},last:function(e){return e[e.length-1]},all:function(e,t){var n,i,r;for(null==t&&(t=de.id),i=0,r=e.length;r>i;i++)if(n=e[i],!t(n))return!1;return!0},any:function(e,t){var n,i,r;for(null==t&&(t=de.id),i=0,r=e.length;r>i;i++)if(n=e[i],t(n))return!0;return!1},without:function(e,t){return de.filter(function(t){return t!==e},t)},remove:function(e,t){var n;return n=de.indexOf(t,e),n>=0?t.splice(n,1):void 0},fold:function(e,t,n){var i,r,o;for(r=0,o=e.length;o>r;r++)i=e[r],t=n(t,i);return t},flatMap:function(e,t){return de.fold(t,[],function(t,n){return t.concat(e(n))})},cached:function(e){var t;return t=h,function(){return t===h&&(t=e(),e=void 0),t}},toString:function(e){var t,n,i,r;try{return ee++,null==e?"undefined":q(e)?"function":z(e)?ee>5?"[..]":"["+de.map(de.toString,e).toString()+"]":null!=(null!=e?e.toString:void 0)&&e.toString!==Object.prototype.toString?e.toString():"object"==typeof e?ee>5?"{..}":(n=function(){var n;n=[];for(i in e)he.call(e,i)&&(r=function(){try{return e[i]}catch(n){return t=n}}(),n.push(de.toString(i)+":"+de.toString(r)));return n}(),"{"+n+"}"):e}finally{ee--}}},ee=0,e._=de,e.scheduler={setTimeout:function(e,t){return setTimeout(e,t)},setInterval:function(e,t){return setInterval(e,t)},clearInterval:function(e){return clearInterval(e)},now:function(){return(new Date).getTime()}},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return e}),this.Bacon=e):"undefined"!=typeof module&&null!==module&&null!=module.exports?(module.exports=e,e.Bacon=e):this.Bacon=e}.call(this),!function(){var e,t,n,i,r=[].slice;i=function(e,t,n){var i,o;return i=function(e){return e.length>0},o={indexOf:Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){var n,i,r,o;for(n=r=0,o=e.length;o>r;n=++r)if(i=e[n],t===i)return n;return-1}},e.$.Model=e.Model,n.fn.asEventStream=e.$.asEventStream,e.$.textFieldValue=function(t,n){var r,o,a;return a=function(){return t.val()},r=function(){return e.interval(50).take(10).map(a).filter(i).take(1)},o=t.asEventStream("keyup input").merge(t.asEventStream("cut paste").delay(1)).merge(r()),e.Binding({initValue:n,get:a,events:o,set:function(e){return t.val(e)}})},e.$.checkBoxValue=function(t,n){return e.Binding({initValue:n,get:function(){return t.is(":checked")},events:t.asEventStream("change"),set:function(e){return t.attr("checked",e)}})},e.$.selectValue=function(t,n){return e.Binding({initValue:n,get:function(){return t.val()},events:t.asEventStream("change"),set:function(e){return t.val(e)}})},e.$.radioGroupValue=function(t,i){return e.Binding({initValue:i,get:function(){return t.filter(":checked").first().val()},events:t.asEventStream("change"),set:function(e){return t.each(function(t,i){return i.value===e?n(i).attr("checked",!0):n(i).removeAttr("checked")})}})},e.$.checkBoxGroupValue=function(t,i){return e.Binding({initValue:i,get:function(){return t.filter(":checked").map(function(e,t){return n(t).val()}).toArray()},events:t.asEventStream("change"),set:function(e){return t.each(function(t,i){return n(i).attr("checked",o.indexOf(e,n(i).val())>=0)})}})},e.$.ajax=function(t,i){return e.fromPromise(n.ajax(t),i)},e.$.ajaxGet=function(t,n,i,r){return e.$.ajax({url:t,dataType:i,data:n},r)},e.$.ajaxGetJSON=function(t,n,i){return e.$.ajax({url:t,dataType:"json",data:n},i)},e.$.ajaxPost=function(t,n,i,r){return e.$.ajax({url:t,dataType:i,data:n,type:"POST"},r)},e.$.ajaxGetScript=function(t,n){return e.$.ajax({url:t,dataType:"script"},n)},e.$.lazyAjax=function(t){return e.once(t).flatMap(e.$.ajax)},e.Observable.prototype.ajax=function(){return this.flatMapLatest(e.$.ajax)},n.fn.extend({keydownE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keydown"].concat(r.call(e)))},keyupE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keyup"].concat(r.call(e)))},keypressE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["keypress"].concat(r.call(e)))},clickE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["click"].concat(r.call(e)))},dblclickE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["dblclick"].concat(r.call(e)))},mousedownE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mousedown"].concat(r.call(e)))},mouseupE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseup"].concat(r.call(e)))},mouseenterE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseenter"].concat(r.call(e)))},mouseleaveE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseleave"].concat(r.call(e)))},mousemoveE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mousemove"].concat(r.call(e)))},mouseoutE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseout"].concat(r.call(e)))},mouseoverE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["mouseover"].concat(r.call(e)))},resizeE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["resize"].concat(r.call(e)))},scrollE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["scroll"].concat(r.call(e)))},selectE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["select"].concat(r.call(e)))},changeE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["change"].concat(r.call(e)))},submitE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["submit"].concat(r.call(e)))},blurE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["blur"].concat(r.call(e)))},focusE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focus"].concat(r.call(e)))},focusinE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focusin"].concat(r.call(e)))},focusoutE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["focusout"].concat(r.call(e)))},loadE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["load"].concat(r.call(e)))},unloadE:function(){var e;return e=1<=arguments.length?r.call(arguments,0):[],this.asEventStream.apply(this,["unload"].concat(r.call(e)))}}),n.fn.extend({animateE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.animate.apply(this,t).promise())},showE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.show.apply(this,t).promise())},hideE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.hide.apply(this,t).promise())},toggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.toggle.apply(this,t).promise())},fadeInE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeIn.apply(this,t).promise())},fadeOutE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeOut.apply(this,t).promise())},fadeToE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeTo.apply(this,t).promise())},fadeToggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.fadeToggle.apply(this,t).promise())},slideDownE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideDown.apply(this,t).promise())},slideUpE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideUp.apply(this,t).promise())},slideToggleE:function(){var t;return t=1<=arguments.length?r.call(arguments,0):[],e.fromPromise(this.slideToggle.apply(this,t).promise())}}),e.$},"undefined"!=typeof module&&null!==module?(t=require("baconjs"),n=require("bacon.model"),e=require("jquery"),module.exports=i(t,n,e)):"function"==typeof define&&define.amd?define(["bacon","bacon.model","jquery"],i):i(this.Bacon,this.BaconModel,this.$)}.call(this),function(){function e(e,t,n){n=(n||0)-1;for(var i=e?e.length:0;++n<i;)if(e[n]===t)return n;return-1}function t(t,n){var i=typeof n;if(t=t.l,"boolean"==i||null==n)return t[n]?0:-1;"number"!=i&&"string"!=i&&(i="object");var r="number"==i?n:b+n;return t=(t=t[i])&&t[r],"object"==i?t&&-1<e(t,n)?0:-1:t?0:-1}function n(e){var t=this.l,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var i="number"==n?e:b+e,t=t[n]||(t[n]={});"object"==n?(t[i]||(t[i]=[])).push(e):t[i]=!0}}function i(e){return e.charCodeAt(0)}function r(e,t){for(var n=e.m,i=t.m,r=-1,o=n.length;++r<o;){var a=n[r],s=i[r];if(a!==s){if(a>s||"undefined"==typeof a)return 1;if(s>a||"undefined"==typeof s)return-1}}return e.n-t.n}function o(e){var t=-1,i=e.length,r=e[0],o=e[i/2|0],a=e[i-1];if(r&&"object"==typeof r&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(r=u(),r["false"]=r["null"]=r["true"]=r.undefined=!1,o=u(),o.k=e,o.l=r,o.push=n;++t<i;)o.push(e[t]);return o}function a(e){return"\\"+Z[e]}function s(){return m.pop()||[]}function u(){return g.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function l(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function c(e){e.length=0,m.length<w&&m.push(e)}function d(e){var t=e.l;t&&d(t),e.k=e.l=e.m=e.object=e.number=e.string=e.o=null,g.length<w&&g.push(e)}function p(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);var i=-1;n=n-t||0;for(var r=Array(0>n?0:n);++i<n;)r[i]=e[t+i];return r}function f(n){function m(e){return e&&"object"==typeof e&&!Rt(e)&&wt.call(e,"__wrapped__")?e:new g(e)}function g(e,t){this.__chain__=!!t,this.__wrapped__=e}function w(e){function t(){if(i){var e=p(i);xt.apply(e,arguments)}if(this instanceof t){var o=ee(n.prototype),e=n.apply(o,e||arguments);return Ce(e)?e:o}return n.apply(r,e||arguments)}var n=e[0],i=e[2],r=e[4];return zt(t,e),t}function Z(e,t,n,i,r){if(n){var o=n(e);if("undefined"!=typeof o)return o}if(!Ce(e))return e;var a=ht.call(e);if(!X[a]||!Lt.nodeClass&&l(e))return e;var u=Pt[a];switch(a){case L:case z:return new u(+e);case H:case V:return new u(e);case U:return o=u(e.source,D.exec(e)),o.lastIndex=e.lastIndex,o}if(a=Rt(e),t){var d=!i;i||(i=s()),r||(r=s());for(var f=i.length;f--;)if(i[f]==e)return r[f];o=a?u(e.length):{}}else o=a?p(e):Zt({},e);return a&&(wt.call(e,"index")&&(o.index=e.index),wt.call(e,"input")&&(o.input=e.input)),t?(i.push(e),r.push(o),(a?Kt:tn)(e,function(e,a){o[a]=Z(e,t,n,i,r)}),d&&(c(i),c(r)),o):o}function ee(e){return Ce(e)?Dt(e):{}}function te(e,t,n){if("function"!=typeof e)return Ye;if("undefined"==typeof t||!("prototype"in e))return e;var i=e.__bindData__;if("undefined"==typeof i&&(Lt.funcNames&&(i=!e.name),i=i||!Lt.funcDecomp,!i)){var r=bt.call(e);Lt.funcNames||(i=!I.test(r)),i||(i=A.test(r),zt(e,i))}if(!1===i||!0!==i&&1&i[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return Ve(e,t)}function ne(e){function t(){var e=u?a:this;if(r){var h=p(r);xt.apply(h,arguments)}return(o||c)&&(h||(h=p(arguments)),o&&xt.apply(h,o),c&&h.length<s)?(i|=16,ne([n,d?i:-4&i,h,null,a,s])):(h||(h=arguments),l&&(n=e[f]),this instanceof t?(e=ee(n.prototype),h=n.apply(e,h),Ce(h)?h:e):n.apply(e,h))}var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],u=1&i,l=2&i,c=4&i,d=8&i,f=n;return zt(t,e),t}function ie(n,i){var r=-1,a=he(),s=n?n.length:0,u=s>=_&&a===e,l=[];if(u){var c=o(i);c?(a=t,i=c):u=!1}for(;++r<s;)c=n[r],0>a(i,c)&&l.push(c);return u&&d(i),l}function oe(e,t,n,i){i=(i||0)-1;for(var r=e?e.length:0,o=[];++i<r;){var a=e[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(Rt(a)||ye(a))){t||(a=oe(a,t,n));var s=-1,u=a.length,l=o.length;for(o.length+=u;++s<u;)o[l++]=a[s]}else n||o.push(a)}return o}function ae(e,t,n,i,r,o){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;if(e===e&&!(e&&K[typeof e]||t&&K[typeof t]))return!1;if(null==e||null==t)return e===t;var u=ht.call(e),d=ht.call(t);if(u==P&&(u=W),d==P&&(d=W),u!=d)return!1;switch(u){case L:case z:return+e==+t;case H:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case U:case V:return e==st(t)}if(d=u==N,!d){var p=wt.call(e,"__wrapped__"),f=wt.call(t,"__wrapped__");if(p||f)return ae(p?e.__wrapped__:e,f?t.__wrapped__:t,n,i,r,o);if(u!=W||!Lt.nodeClass&&(l(e)||l(t)))return!1;if(u=!Lt.argsObject&&ye(e)?ot:e.constructor,p=!Lt.argsObject&&ye(t)?ot:t.constructor,u!=p&&!(xe(u)&&u instanceof u&&xe(p)&&p instanceof p)&&"constructor"in e&&"constructor"in t)return!1}for(u=!r,r||(r=s()),o||(o=s()),p=r.length;p--;)if(r[p]==e)return o[p]==t;var h=0,a=!0;if(r.push(e),o.push(t),d){if(p=e.length,h=t.length,(a=h==p)||i)for(;h--;)if(d=p,f=t[h],i)for(;d--&&!(a=ae(e[d],f,n,i,r,o)););else if(!(a=ae(e[h],f,n,i,r,o)))break}else en(t,function(t,s,u){return wt.call(u,s)?(h++,a=wt.call(e,s)&&ae(e[s],t,n,i,r,o)):void 0}),a&&!i&&en(e,function(e,t,n){return wt.call(n,t)?a=-1<--h:void 0});return r.pop(),o.pop(),u&&(c(r),c(o)),a}function se(e,t,n,i,r){(Rt(t)?$e:tn)(t,function(t,o){var a,s,u=t,l=e[o];if(t&&((s=Rt(t))||nn(t))){for(u=i.length;u--;)if(a=i[u]==t){l=r[u];break}if(!a){var c;n&&(u=n(l,t),c="undefined"!=typeof u)&&(l=u),c||(l=s?Rt(l)?l:[]:nn(l)?l:{}),i.push(t),r.push(l),c||se(l,t,n,i,r)}}else n&&(u=n(l,t),"undefined"==typeof u&&(u=t)),"undefined"!=typeof u&&(l=u);e[o]=l})}function ue(e,t){return e+yt(Bt()*(t-e+1))}function le(n,i,r){var a=-1,u=he(),l=n?n.length:0,p=[],f=!i&&l>=_&&u===e,h=r||f?s():p;for(f&&(h=o(h),u=t);++a<l;){var m=n[a],g=r?r(m,a,n):m;(i?!a||h[h.length-1]!==g:0>u(h,g))&&((r||f)&&h.push(g),p.push(m))}return f?(c(h.k),d(h)):r&&c(h),p}function ce(e){return function(t,n,i){var r={};if(n=m.createCallback(n,i,3),Rt(t)){i=-1;for(var o=t.length;++i<o;){var a=t[i];e(r,a,n(a,i,t),t)}}else Kt(t,function(t,i,o){e(r,t,n(t,i,o),o)});return r}}function de(e,t,n,i,r,o){var a=1&t,s=4&t,u=16&t,l=32&t;if(!(2&t||xe(e)))throw new ut;u&&!n.length&&(t&=-17,u=n=!1),l&&!i.length&&(t&=-33,l=i=!1);var c=e&&e.__bindData__;return c&&!0!==c?(c=p(c),c[2]&&(c[2]=p(c[2])),c[3]&&(c[3]=p(c[3])),!a||1&c[1]||(c[4]=r),!a&&1&c[1]&&(t|=8),!s||4&c[1]||(c[5]=o),u&&xt.apply(c[2]||(c[2]=[]),n),l&&Tt.apply(c[3]||(c[3]=[]),i),c[1]|=t,de.apply(null,c)):(1==t||17===t?w:ne)([e,t,n,i,r,o])}function pe(){G.h=B,G.b=G.c=G.g=G.i="",G.e="t",G.j=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)G[n]=e[n];t=G.a,G.d=/^[^,]+/.exec(t)[0],e=nt,t="return function("+t+"){",n=G;var i="var n,t="+n.d+",E="+n.e+";if(!t)return E;"+n.i+";";n.b?(i+="var u=t.length;n=-1;if("+n.b+"){",Lt.unindexedChars&&(i+="if(s(t)){t=t.split('')}"),i+="while(++n<u){"+n.g+";}}else{"):Lt.nonEnumArgs&&(i+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+n.g+";}}else{"),Lt.enumPrototypes&&(i+="var G=typeof t=='function';"),Lt.enumErrorProps&&(i+="var F=t===k||t instanceof Error;");var r=[];if(Lt.enumPrototypes&&r.push('!(G&&n=="prototype")'),Lt.enumErrorProps&&r.push('!(F&&(n=="message"||n=="name"))'),n.j&&n.f)i+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",r.length&&(i+="if("+r.join("&&")+"){"),i+=n.g+";",r.length&&(i+="}"),i+="}";else if(i+="for(n in t){",n.j&&r.push("m.call(t, n)"),r.length&&(i+="if("+r.join("&&")+"){"),i+=n.g+";",r.length&&(i+="}"),i+="}",Lt.nonEnumShadows){for(i+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)i+="n='"+n.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",n.j||(i+="||(!x[n]&&t[n]!==A[n])"),i+="){"+n.g+"}";i+="}"}return(n.b||Lt.nonEnumArgs)&&(i+="}"),i+=n.c+";return E",e("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+i+"}")(te,R,ct,wt,y,ye,Rt,ke,G.f,dt,K,Nt,V,pt,ht)}function fe(e){return Xt[e]}function he(){var t=(t=m.indexOf)===ze?e:t;return t}function me(e){return"function"==typeof e&&mt.test(e)}function ge(e){var t,n;return!e||ht.call(e)!=W||(t=e.constructor,xe(t)&&!(t instanceof t))||!Lt.argsClass&&ye(e)||!Lt.nodeClass&&l(e)?!1:Lt.ownLast?(en(e,function(e,t,i){return n=wt.call(i,t),!1}),!1!==n):(en(e,function(e,t){n=t}),"undefined"==typeof n||wt.call(e,n))}function ve(e){return Yt[e]}function ye(e){return e&&"object"==typeof e&&"number"==typeof e.length&&ht.call(e)==P||!1}function be(e,t,n){var i=Ht(e),r=i.length;for(t=te(t,n,3);r--&&(n=i[r],!1!==t(e[n],n,e)););return e}function _e(e){var t=[];return en(e,function(e,n){xe(e)&&t.push(n)}),t.sort()}function we(e){for(var t=-1,n=Ht(e),i=n.length,r={};++t<i;){var o=n[t];r[e[o]]=o}return r}function xe(e){return"function"==typeof e}function Ce(e){return!(!e||!K[typeof e])}function Se(e){return"number"==typeof e||e&&"object"==typeof e&&ht.call(e)==H||!1}function ke(e){return"string"==typeof e||e&&"object"==typeof e&&ht.call(e)==V||!1}function Te(e){for(var t=-1,n=Ht(e),i=n.length,r=Je(i);++t<i;)r[t]=e[n[t]];return r}function Ee(e,t,n){var i=-1,r=he(),o=e?e.length:0,a=!1;return n=(0>n?At(0,o+n):n)||0,Rt(e)?a=-1<r(e,t,n):"number"==typeof o?a=-1<(ke(e)?e.indexOf(t,n):r(e,t,n)):Kt(e,function(e){return++i<n?void 0:!(a=e===t)}),a}function De(e,t,n){var i=!0;if(t=m.createCallback(t,n,3),Rt(e)){n=-1;for(var r=e.length;++n<r&&(i=!!t(e[n],n,e)););}else Kt(e,function(e,n,r){return i=!!t(e,n,r)});return i}function Ie(e,t,n){var i=[];if(t=m.createCallback(t,n,3),Rt(e)){n=-1;for(var r=e.length;++n<r;){var o=e[n];t(o,n,e)&&i.push(o)}}else Kt(e,function(e,n,r){t(e,n,r)&&i.push(e)});return i}function Fe(e,t,n){if(t=m.createCallback(t,n,3),!Rt(e)){var i;return Kt(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i}n=-1;for(var r=e.length;++n<r;){var o=e[n];if(t(o,n,e))return o}}function $e(e,t,n){if(t&&"undefined"==typeof n&&Rt(e)){n=-1;for(var i=e.length;++n<i&&!1!==t(e[n],n,e););}else Kt(e,t,n);return e}function je(e,t,n){var i=e,r=e?e.length:0;if(t=t&&"undefined"==typeof n?t:te(t,n,3),Rt(e))for(;r--&&!1!==t(e[r],r,e););else{if("number"!=typeof r)var o=Ht(e),r=o.length;else Lt.unindexedChars&&ke(e)&&(i=e.split(""));Kt(e,function(e,n,a){return n=o?o[--r]:--r,t(i[n],n,a)})}return e}function Ae(e,t,n){var i=-1,r=e?e.length:0,o=Je("number"==typeof r?r:0);if(t=m.createCallback(t,n,3),Rt(e))for(;++i<r;)o[i]=t(e[i],i,e);else Kt(e,function(e,n,r){o[++i]=t(e,n,r)});return o}function Me(e,t,n){var r=-1/0,o=r;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Rt(e)){n=-1;for(var a=e.length;++n<a;){var s=e[n];s>o&&(o=s)}}else t=null==t&&ke(e)?i:m.createCallback(t,n,3),Kt(e,function(e,n,i){n=t(e,n,i),n>r&&(r=n,o=e)});return o}function Oe(e,t,n,i){var r=3>arguments.length;if(t=m.createCallback(t,i,4),Rt(e)){var o=-1,a=e.length;for(r&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e)}else Kt(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)});return n}function Be(e,t,n,i){var r=3>arguments.length;return t=m.createCallback(t,i,4),je(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Pe(e){var t=-1,n=e?e.length:0,i=Je("number"==typeof n?n:0);return $e(e,function(e){var n=ue(0,++t);i[t]=i[n],i[n]=e}),i}function Ne(e,t,n){var i;if(t=m.createCallback(t,n,3),Rt(e)){n=-1;for(var r=e.length;++n<r&&!(i=t(e[n],n,e)););}else Kt(e,function(e,n,r){return!(i=t(e,n,r))});return!!i}function Le(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=m.createCallback(t,n,3);++o<r&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[0]:h;return p(e,0,Mt(At(0,i),r))}function ze(t,n,i){if("number"==typeof i){var r=t?t.length:0;i=0>i?At(0,r+i):i||0}else if(i)return i=qe(t,n),t[i]===n?i:-1;return e(t,n,i)}function Re(e,t,n){if("number"!=typeof t&&null!=t){var i=0,r=-1,o=e?e.length:0;for(t=m.createCallback(t,n,3);++r<o&&t(e[r],r,e);)i++}else i=null==t||n?1:At(0,t);return p(e,i)}function qe(e,t,n,i){var r=0,o=e?e.length:r;for(n=n?m.createCallback(n,i,1):Ye,t=n(t);o>r;)i=r+o>>>1,n(e[i])<t?r=i+1:o=i;return r}function He(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(n=m.createCallback(n,i,3)),le(e,t,n)}function We(){for(var e=1<arguments.length?arguments:arguments[0],t=-1,n=e?Me(sn(e,"length")):0,i=Je(0>n?0:n);++t<n;)i[t]=sn(e,t);return i}function Ue(e,t){var n=-1,i=e?e.length:0,r={};for(t||!i||Rt(e[0])||(t=[]);++n<i;){var o=e[n];t?r[o]=t[n]:o&&(r[o[0]]=o[1])}return r}function Ve(e,t){return 2<arguments.length?de(e,17,p(arguments,2),null,t):de(e,1,null,null,t)}function Xe(e,t,n){var i,r,o,a,s,u,l,c=0,d=!1,p=!0;if(!xe(e))throw new ut;if(t=At(0,t)||0,!0===n)var f=!0,p=!1;else Ce(n)&&(f=n.leading,d="maxWait"in n&&(At(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var m=function(){var n=t-(un()-a);n>0?u=St(m,n):(r&&vt(r),n=l,r=u=l=h,n&&(c=un(),o=e.apply(s,i),u||r||(i=s=null)))},g=function(){u&&vt(u),r=u=l=h,(p||d!==t)&&(c=un(),o=e.apply(s,i),u||r||(i=s=null))};return function(){if(i=arguments,a=un(),s=this,l=p&&(u||!f),!1===d)var n=f&&!u;else{r||f||(c=a);var h=d-(a-c),v=0>=h;v?(r&&(r=vt(r)),c=a,o=e.apply(s,i)):r||(r=St(g,h))}return v&&u?u=vt(u):u||t===d||(u=St(m,t)),n&&(v=!0,o=e.apply(s,i)),!v||u||r||(i=s=null),o}}function Ye(e){return e}function Qe(e,t,n){var i=!0,r=t&&_e(t);t&&(n||r.length)||(null==n&&(n=t),o=g,t=e,e=m,r=_e(t)),!1===n?i=!1:Ce(n)&&"chain"in n&&(i=n.chain);var o=e,a=xe(o);$e(r,function(n){var r=e[n]=t[n];a&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,a=[n];if(xt.apply(a,arguments),a=r.apply(e,a),i||t){if(n===a&&Ce(a))return this;a=new o(a),a.__chain__=t}return a})})}function Ge(){}function Ke(e){return function(t){return t[e]}}function Ze(){return this.__wrapped__}n=n?re.defaults(J.Object(),n,re.pick(J,O)):J;var Je=n.Array,et=n.Boolean,tt=n.Date,nt=n.Function,it=n.Math,rt=n.Number,ot=n.Object,at=n.RegExp,st=n.String,ut=n.TypeError,lt=[],ct=n.Error.prototype,dt=ot.prototype,pt=st.prototype,ft=n._,ht=dt.toString,mt=at("^"+st(ht).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),gt=it.ceil,vt=n.clearTimeout,yt=it.floor,bt=nt.prototype.toString,_t=me(_t=ot.getPrototypeOf)&&_t,wt=dt.hasOwnProperty,xt=lt.push,Ct=dt.propertyIsEnumerable,St=n.setTimeout,kt=lt.splice,Tt=lt.unshift,Et=function(){try{var e={},t=me(t=ot.defineProperty)&&t,n=t(e,e,e)&&t}catch(i){}return n}(),Dt=me(Dt=ot.create)&&Dt,It=me(It=Je.isArray)&&It,Ft=n.isFinite,$t=n.isNaN,jt=me(jt=ot.keys)&&jt,At=it.max,Mt=it.min,Ot=n.parseInt,Bt=it.random,Pt={};Pt[N]=Je,Pt[L]=et,Pt[z]=tt,Pt[q]=nt,Pt[W]=ot,Pt[H]=rt,Pt[U]=at,Pt[V]=st;var Nt={};Nt[N]=Nt[z]=Nt[H]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Nt[L]=Nt[V]={constructor:!0,toString:!0,valueOf:!0},Nt[R]=Nt[q]=Nt[U]={constructor:!0,toString:!0},Nt[W]={constructor:!0},function(){for(var e=B.length;e--;){var t,n=B[e];for(t in Nt)wt.call(Nt,t)&&!wt.call(Nt[t],n)&&(Nt[t][n]=!1)}}(),g.prototype=m.prototype;var Lt=m.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},i=[];e.prototype={valueOf:1,y:1};for(var r in new e)i.push(r);for(r in arguments);Lt.argsClass=ht.call(arguments)==P,Lt.argsObject=arguments.constructor==ot&&!(arguments instanceof Je),Lt.enumErrorProps=Ct.call(ct,"message")||Ct.call(ct,"name"),Lt.enumPrototypes=Ct.call(e,"prototype"),Lt.funcDecomp=!me(n.WinRTError)&&A.test(f),Lt.funcNames="string"==typeof nt.name,Lt.nonEnumArgs=0!=r,Lt.nonEnumShadows=!/valueOf/.test(i),Lt.ownLast="x"!=i[0],Lt.spliceObjects=(lt.splice.call(t,0,1),!t[0]),Lt.unindexedChars="xx"!="x"[0]+ot("x")[0];try{Lt.nodeClass=!(ht.call(document)==W&&!({toString:0}+""))}catch(o){Lt.nodeClass=!0}}(1),m.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:m}},Dt||(ee=function(){function e(){}return function(t){if(Ce(t)){e.prototype=t;var i=new e;e.prototype=null}return i||n.Object()}}());var zt=Et?function(e,t){Q.value=t,Et(e,"__bindData__",Q)}:Ge;Lt.argsClass||(ye=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&wt.call(e,"callee")&&!Ct.call(e,"callee")||!1});var Rt=It||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&ht.call(e)==N||!1},qt=pe({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),Ht=jt?function(e){return Ce(e)?Lt.enumPrototypes&&"function"==typeof e||Lt.nonEnumArgs&&e.length&&ye(e)?qt(e):jt(e):[]}:qt,Wt={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:Ht,g:"if(e(t[n],n,g)===false)return E"},Ut={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:Ht,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Vt={i:"if(!B[typeof t])return E;"+Wt.i,b:!1},Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yt=we(Xt),Qt=at("("+Ht(Yt).join("|")+")","g"),Gt=at("["+Ht(Xt).join("")+"]","g"),Kt=pe(Wt),Zt=pe(Ut,{i:Ut.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Jt=pe(Ut),en=pe(Wt,Vt,{j:!1}),tn=pe(Wt,Vt);xe(/x/)&&(xe=function(e){return"function"==typeof e&&ht.call(e)==q});var nn=_t?function(e){if(!e||ht.call(e)!=W||!Lt.argsClass&&ye(e))return!1;var t=e.valueOf,n=me(t)&&(n=_t(t))&&_t(n);return n?e==n||_t(e)==n:ge(e)}:ge,rn=ce(function(e,t,n){wt.call(e,n)?e[n]++:e[n]=1}),on=ce(function(e,t,n){(wt.call(e,n)?e[n]:e[n]=[]).push(t)}),an=ce(function(e,t,n){e[n]=t}),sn=Ae,un=me(un=tt.now)&&un||function(){return(new tt).getTime()},ln=8==Ot(x+"08")?Ot:function(e,t){return Ot(ke(e)?e.replace($,""):e,t||0)};return m.after=function(e,t){if(!xe(t))throw new ut;return function(){return 1>--e?t.apply(this,arguments):void 0}},m.assign=Zt,m.at=function(e){var t=arguments,n=-1,i=oe(t,!0,!1,1),t=t[2]&&t[2][t[1]]===e?1:i.length,r=Je(t);for(Lt.unindexedChars&&ke(e)&&(e=e.split(""));++n<t;)r[n]=e[i[n]];return r},m.bind=Ve,m.bindAll=function(e){for(var t=1<arguments.length?oe(arguments,!0,!1,1):_e(e),n=-1,i=t.length;++n<i;){var r=t[n];e[r]=de(e[r],1,null,null,e)}return e},m.bindKey=function(e,t){return 2<arguments.length?de(t,19,p(arguments,2),null,e):de(t,3,null,null,e)},m.chain=function(e){return e=new g(e),e.__chain__=!0,e},m.compact=function(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i},m.compose=function(){for(var e=arguments,t=e.length;t--;)if(!xe(e[t]))throw new ut;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}},m.constant=function(e){return function(){return e}},m.countBy=rn,m.create=function(e,t){var n=ee(e);return t?Zt(n,t):n},m.createCallback=function(e,t,n){var i=typeof e;if(null==e||"function"==i)return te(e,t,n);if("object"!=i)return Ke(e);var r=Ht(e),o=r[0],a=e[o];return 1!=r.length||a!==a||Ce(a)?function(t){for(var n=r.length,i=!1;n--&&(i=ae(t[r[n]],e[r[n]],null,!0)););return i}:function(e){return e=e[o],a===e&&(0!==a||1/a==1/e)}},m.curry=function(e,t){return t="number"==typeof t?t:+t||e.length,de(e,4,null,null,null,t)},m.debounce=Xe,m.defaults=Jt,m.defer=function(e){if(!xe(e))throw new ut;var t=p(arguments,1);return St(function(){e.apply(h,t)},1)},m.delay=function(e,t){if(!xe(e))throw new ut;var n=p(arguments,2);return St(function(){e.apply(h,n)},t)},m.difference=function(e){return ie(e,oe(arguments,!0,!0,1))},m.filter=Ie,m.flatten=function(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n="function"!=typeof t&&i&&i[t]===e?null:t,t=!1),null!=n&&(e=Ae(e,n,i)),oe(e,t)},m.forEach=$e,m.forEachRight=je,m.forIn=en,m.forInRight=function(e,t,n){var i=[];en(e,function(e,t){i.push(t,e)});var r=i.length;for(t=te(t,n,3);r--&&!1!==t(i[r--],i[r],e););return e},m.forOwn=tn,m.forOwnRight=be,m.functions=_e,m.groupBy=on,m.indexBy=an,m.initial=function(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else i=null==t||n?1:t||i;return p(e,0,Mt(At(0,r-i),r))},m.intersection=function(){for(var n=[],i=-1,r=arguments.length,a=s(),u=he(),l=u===e,p=s();++i<r;){var f=arguments[i];(Rt(f)||ye(f))&&(n.push(f),a.push(l&&f.length>=_&&o(i?n[i]:p)))}var l=n[0],h=-1,m=l?l.length:0,g=[];e:for(;++h<m;){var v=a[0],f=l[h];if(0>(v?t(v,f):u(p,f))){for(i=r,(v||p).push(f);--i;)if(v=a[i],0>(v?t(v,f):u(n[i],f)))continue e;g.push(f)}}for(;r--;)(v=a[r])&&d(v);return c(a),c(p),g},m.invert=we,m.invoke=function(e,t){var n=p(arguments,2),i=-1,r="function"==typeof t,o=e?e.length:0,a=Je("number"==typeof o?o:0);return $e(e,function(e){a[++i]=(r?t:e[t]).apply(e,n)}),a},m.keys=Ht,m.map=Ae,m.mapValues=function(e,t,n){var i={};return t=m.createCallback(t,n,3),tn(e,function(e,n,r){i[n]=t(e,n,r)}),i},m.max=Me,m.memoize=function(e,t){if(!xe(e))throw new ut;var n=function(){var i=n.cache,r=t?t.apply(this,arguments):b+arguments[0];return wt.call(i,r)?i[r]:i[r]=e.apply(this,arguments)};return n.cache={},n},m.merge=function(e){var t=arguments,n=2;if(!Ce(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var i=te(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(i=t[--n]);for(var t=p(arguments,1,n),r=-1,o=s(),a=s();++r<n;)se(e,t[r],i,o,a);return c(o),c(a),e},m.min=function(e,t,n){var r=1/0,o=r;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&Rt(e)){n=-1;for(var a=e.length;++n<a;){var s=e[n];o>s&&(o=s)}}else t=null==t&&ke(e)?i:m.createCallback(t,n,3),Kt(e,function(e,n,i){n=t(e,n,i),r>n&&(r=n,o=e)});return o},m.omit=function(e,t,n){var i={};if("function"!=typeof t){var r=[];en(e,function(e,t){r.push(t)});for(var r=ie(r,oe(arguments,!0,!1,1)),o=-1,a=r.length;++o<a;){var s=r[o];i[s]=e[s]}}else t=m.createCallback(t,n,3),en(e,function(e,n,r){t(e,n,r)||(i[n]=e)});return i},m.once=function(e){var t,n;if(!xe(e))throw new ut;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},m.pairs=function(e){for(var t=-1,n=Ht(e),i=n.length,r=Je(i);++t<i;){var o=n[t];r[t]=[o,e[o]]}return r},m.partial=function(e){return de(e,16,p(arguments,1))},m.partialRight=function(e){return de(e,32,null,p(arguments,1))},m.pick=function(e,t,n){var i={};if("function"!=typeof t)for(var r=-1,o=oe(arguments,!0,!1,1),a=Ce(e)?o.length:0;++r<a;){var s=o[r];s in e&&(i[s]=e[s])}else t=m.createCallback(t,n,3),en(e,function(e,n,r){t(e,n,r)&&(i[n]=e)});return i},m.pluck=sn,m.property=Ke,m.pull=function(e){for(var t=arguments,n=0,i=t.length,r=e?e.length:0;++n<i;)for(var o=-1,a=t[n];++o<r;)e[o]===a&&(kt.call(e,o--,1),r--);return e},m.range=function(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);var i=-1;t=At(0,gt((t-e)/(n||1)));for(var r=Je(t);++i<t;)r[i]=e,e+=n;return r},m.reject=function(e,t,n){return t=m.createCallback(t,n,3),Ie(e,function(e,n,i){return!t(e,n,i)})},m.remove=function(e,t,n){var i=-1,r=e?e.length:0,o=[];for(t=m.createCallback(t,n,3);++i<r;)n=e[i],t(n,i,e)&&(o.push(n),kt.call(e,i--,1),r--);return o},m.rest=Re,m.shuffle=Pe,m.sortBy=function(e,t,n){var i=-1,o=Rt(t),a=e?e.length:0,l=Je("number"==typeof a?a:0);for(o||(t=m.createCallback(t,n,3)),$e(e,function(e,n,r){var a=l[++i]=u();o?a.m=Ae(t,function(t){return e[t]}):(a.m=s())[0]=t(e,n,r),a.n=i,a.o=e}),a=l.length,l.sort(r);a--;)e=l[a],l[a]=e.o,o||c(e.m),d(e);return l},m.tap=function(e,t){return t(e),e},m.throttle=function(e,t,n){var i=!0,r=!0;if(!xe(e))throw new ut;return!1===n?i=!1:Ce(n)&&(i="leading"in n?n.leading:i,r="trailing"in n?n.trailing:r),Y.leading=i,Y.maxWait=t,Y.trailing=r,Xe(e,t,Y)},m.times=function(e,t,n){e=-1<(e=+e)?e:0;var i=-1,r=Je(e);for(t=te(t,n,1);++i<e;)r[i]=t(i);return r},m.toArray=function(e){return e&&"number"==typeof e.length?Lt.unindexedChars&&ke(e)?e.split(""):p(e):Te(e)},m.transform=function(e,t,n,i){var r=Rt(e);if(null==n)if(r)n=[];else{var o=e&&e.constructor;n=ee(o&&o.prototype)}return t&&(t=m.createCallback(t,i,4),(r?Kt:tn)(e,function(e,i,r){return t(n,e,i,r)})),n},m.union=function(){return le(oe(arguments,!0,!0))},m.uniq=He,m.values=Te,m.where=Ie,m.without=function(e){return ie(e,p(arguments,1))},m.wrap=function(e,t){
return de(t,16,[e])},m.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Rt(n)||ye(n))var i=i?le(ie(i,n).concat(ie(n,i))):n}return i||[]},m.zip=We,m.zipObject=Ue,m.collect=Ae,m.drop=Re,m.each=$e,m.eachRight=je,m.extend=Zt,m.methods=_e,m.object=Ue,m.select=Ie,m.tail=Re,m.unique=He,m.unzip=We,Qe(m),m.clone=function(e,t,n,i){return"boolean"!=typeof t&&null!=t&&(i=n,n=t,t=!1),Z(e,t,"function"==typeof n&&te(n,i,1))},m.cloneDeep=function(e,t,n){return Z(e,!0,"function"==typeof t&&te(t,n,1))},m.contains=Ee,m.escape=function(e){return null==e?"":st(e).replace(Gt,fe)},m.every=De,m.find=Fe,m.findIndex=function(e,t,n){var i=-1,r=e?e.length:0;for(t=m.createCallback(t,n,3);++i<r;)if(t(e[i],i,e))return i;return-1},m.findKey=function(e,t,n){var i;return t=m.createCallback(t,n,3),tn(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i},m.findLast=function(e,t,n){var i;return t=m.createCallback(t,n,3),je(e,function(e,n,r){return t(e,n,r)?(i=e,!1):void 0}),i},m.findLastIndex=function(e,t,n){var i=e?e.length:0;for(t=m.createCallback(t,n,3);i--;)if(t(e[i],i,e))return i;return-1},m.findLastKey=function(e,t,n){var i;return t=m.createCallback(t,n,3),be(e,function(e,n,r){return t(e,n,r)?(i=n,!1):void 0}),i},m.has=function(e,t){return e?wt.call(e,t):!1},m.identity=Ye,m.indexOf=ze,m.isArguments=ye,m.isArray=Rt,m.isBoolean=function(e){return!0===e||!1===e||e&&"object"==typeof e&&ht.call(e)==L||!1},m.isDate=function(e){return e&&"object"==typeof e&&ht.call(e)==z||!1},m.isElement=function(e){return e&&1===e.nodeType||!1},m.isEmpty=function(e){var t=!0;if(!e)return t;var n=ht.call(e),i=e.length;return n==N||n==V||(Lt.argsClass?n==P:ye(e))||n==W&&"number"==typeof i&&xe(e.splice)?!i:(tn(e,function(){return t=!1}),t)},m.isEqual=function(e,t,n,i){return ae(e,t,"function"==typeof n&&te(n,i,2))},m.isFinite=function(e){return Ft(e)&&!$t(parseFloat(e))},m.isFunction=xe,m.isNaN=function(e){return Se(e)&&e!=+e},m.isNull=function(e){return null===e},m.isNumber=Se,m.isObject=Ce,m.isPlainObject=nn,m.isRegExp=function(e){return e&&K[typeof e]&&ht.call(e)==U||!1},m.isString=ke,m.isUndefined=function(e){return"undefined"==typeof e},m.lastIndexOf=function(e,t,n){var i=e?e.length:0;for("number"==typeof n&&(i=(0>n?At(0,i+n):Mt(n,i-1))+1);i--;)if(e[i]===t)return i;return-1},m.mixin=Qe,m.noConflict=function(){return n._=ft,this},m.noop=Ge,m.now=un,m.parseInt=ln,m.random=function(e,t,n){var i=null==e,r=null==t;return null==n&&("boolean"==typeof e&&r?(n=e,e=1):r||"boolean"!=typeof t||(n=t,r=!0)),i&&r&&(t=1),e=+e||0,r?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=Bt(),Mt(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):ue(e,t)},m.reduce=Oe,m.reduceRight=Be,m.result=function(e,t){if(e){var n=e[t];return xe(n)?e[t]():n}},m.runInContext=f,m.size=function(e){var t=e?e.length:0;return"number"==typeof t?t:Ht(e).length},m.some=Ne,m.sortedIndex=qe,m.template=function(e,t,n){var i=m.templateSettings;e=st(e||""),n=Jt({},n,i);var r,o=Jt({},n.imports,i.imports),i=Ht(o),o=Te(o),s=0,u=n.interpolate||j,l="__p+='",u=at((n.escape||j).source+"|"+u.source+"|"+(u===F?E:j).source+"|"+(n.evaluate||j).source+"|$","g");e.replace(u,function(t,n,i,o,u,c){return i||(i=o),l+=e.slice(s,c).replace(M,a),n&&(l+="'+__e("+n+")+'"),u&&(r=!0,l+="';"+u+";\n__p+='"),i&&(l+="'+((__t=("+i+"))==null?'':__t)+'"),s=c+t.length,t}),l+="';",u=n=n.variable,u||(n="obj",l="with("+n+"){"+l+"}"),l=(r?l.replace(C,""):l).replace(S,"$1").replace(T,"$1;"),l="function("+n+"){"+(u?"":n+"||("+n+"={});")+"var __t,__p='',__e=_.escape"+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var c=nt(i,"return "+l).apply(h,o)}catch(d){throw d.source=l,d}return t?c(t):(c.source=l,c)},m.unescape=function(e){return null==e?"":st(e).replace(Qt,ve)},m.uniqueId=function(e){var t=++v;return st(null==e?"":e)+t},m.all=De,m.any=Ne,m.detect=Fe,m.findWhere=Fe,m.foldl=Oe,m.foldr=Be,m.include=Ee,m.inject=Oe,Qe(function(){var e={};return tn(m,function(t,n){m.prototype[n]||(e[n]=t)}),e}(),!1),m.first=Le,m.last=function(e,t,n){var i=0,r=e?e.length:0;if("number"!=typeof t&&null!=t){var o=r;for(t=m.createCallback(t,n,3);o--&&t(e[o],o,e);)i++}else if(i=t,null==i||n)return e?e[r-1]:h;return p(e,At(0,r-i))},m.sample=function(e,t,n){return e&&"number"!=typeof e.length?e=Te(e):Lt.unindexedChars&&ke(e)&&(e=e.split("")),null==t||n?e?e[ue(0,e.length-1)]:h:(e=Pe(e),e.length=Mt(At(0,t),e.length),e)},m.take=Le,m.head=Le,tn(m,function(e,t){var n="sample"!==t;m.prototype[t]||(m.prototype[t]=function(t,i){var r=this.__chain__,o=e(this.__wrapped__,t,i);return r||null!=t&&(!i||n&&"function"==typeof t)?new g(o,r):o})}),m.VERSION="2.4.1",m.prototype.chain=function(){return this.__chain__=!0,this},m.prototype.toString=function(){return st(this.__wrapped__)},m.prototype.value=Ze,m.prototype.valueOf=Ze,Kt(["join","pop","shift"],function(e){var t=lt[e];m.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new g(n,e):n}}),Kt(["push","reverse","sort","unshift"],function(e){var t=lt[e];m.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),Kt(["concat","slice","splice"],function(e){var t=lt[e];m.prototype[e]=function(){return new g(t.apply(this.__wrapped__,arguments),this.__chain__)}}),Lt.spliceObjects||Kt(["pop","shift","splice"],function(e){var t=lt[e],n="splice"==e;m.prototype[e]=function(){var e=this.__chain__,i=this.__wrapped__,r=t.apply(i,arguments);return 0===i.length&&delete i[0],e||n?new g(r,e):r}}),m}var h,m=[],g=[],v=0,y={},b=+new Date+"",_=75,w=40,x=" 	\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",C=/\b__p\+='';/g,S=/\b(__p\+=)''\+/g,T=/(__e\(.*?\)|\b__t\))\+'';/g,E=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,D=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,$=RegExp("^["+x+"]*0+(?=.$)"),j=/($^)/,A=/\bthis\b/,M=/['\n\r\t\u2028\u2029\\]/g,O="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),P="[object Arguments]",N="[object Array]",L="[object Boolean]",z="[object Date]",R="[object Error]",q="[object Function]",H="[object Number]",W="[object Object]",U="[object RegExp]",V="[object String]",X={};X[q]=!1,X[P]=X[N]=X[L]=X[z]=X[H]=X[W]=X[U]=X[V]=!0;var Y={leading:!1,maxWait:0,trailing:!1},Q={configurable:!1,enumerable:!1,value:null,writable:!1},G={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},K={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Z={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},J=K[typeof window]&&window||this,ee=K[typeof exports]&&exports&&!exports.nodeType&&exports,te=K[typeof module]&&module&&!module.nodeType&&module,ne=te&&te.exports===ee&&ee,ie=K[typeof global]&&global;!ie||ie.global!==ie&&ie.window!==ie||(J=ie);var re=f();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(J._=re,define(function(){return re})):ee&&te?ne?(te.exports=re)._=re:ee._=re:J._=re}.call(this),window.ST=window.ST||{},ST.utils=function(e){function t(t,n){if(t.length<2)return-1;var i=e.findIndex(t,n);return-1!==i&&i<t.length-1?i+1:-1}function n(t,n){if(t.length<2)return-1;var i=e.findIndex(t,n);return-1!==i&&i>0?i-1:-1}function i(e,t){return(t+1)%e}function r(e,t){return 0===t?e-1:t-1}function o(t,n,i,r){r=r||!1;var o=e.clone(t,r);return o[n]=t[i],o[i]=t[n],o}function a(e){return[window.location.pathname,e].join("/").replace("//","/")}function s(e){return e.replace(/\[/g,"\\[").replace(/\]/g,"\\]")}function u(e){var t=["[name=",s(e),"]"].join("");return $(t)}function l(t){return t.reduce(function(t,n){return e.merge(t,n)},{})}function c(e){return function(){return!e.apply(null,arguments)}}function d(t,n,i){i=e.defaults(i||{},{timeout:0});var r=Date.now();return Bacon.fromBinder(function(o){function a(){var s=Bacon.once(t).ajax();s.filter(n).onValue(function(e){o([new Bacon.Next(e),new Bacon.End])}),s.filter(c(n)).onValue(function(){var t=Date.now()-r;i.timeout&&t>i.timeout?o([new Bacon.Error("timeout"),new Bacon.End]):e.delay(a,1e3)}),s.onError(function(e){o([new Bacon.Error(e),new Bacon.End])})}return a(),e.identity})}function p(t){return e.last(t.split(".")).toLowerCase()}function f(e){var t={jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif"};return t[p(e)]}function h(t){var n=t.split("."),i=e.last(n).toLowerCase(),r=e.initial(n).join(".");return[m(r),i].join(".")}function m(e){return e.replace(/[^a-z0-9\-]/gi,"_").toLowerCase()}function g(e){return 10>e?"0"+e:e}function v(e){return[e.getFullYear(),g(e.getMonth()+1),g(e.getDate())].join("-")}function y(t,n,i){i=i||"div.wrapper";var r=e.template('<div class="flash-notifications"><div class="flash-<%= errorClass %> flash-notification"><div class="flash-icon <%= errorIcon %>"></div><div class="flash-text"><%= errorMsg %></div></div></div>'),o={notice:"ss-check",warning:"ss-info",error:"ss-alert"},a=$(r({errorMsg:t,errorClass:n,errorIcon:o[n]}));$(i).prepend(a).click(window.hideNotice)}return{findNextIndex:t,findPrevIndex:n,nextIndex:i,prevIndex:r,swapArrayElements:o,relativeUrl:a,jquerifyAttributeValue:s,findElementByName:u,objectsMerge:l,baconStreamFromAjaxPolling:d,contentTypeByFilename:f,stringToURLSafe:m,filenameToURLSafe:h,pad:g,toISODate:v,showError:y,not:c}}(_);var hideNotice=function(){$(".flash-notifications").fadeOut("slow")},directionsDisplay,directionsService,marker,geocoder,map,defaultCenter,infowindow,center,prefix,textfield,timer,currentDirections=null,initialLocation,helsinki,browserSupportFlag=new Boolean,listing_category=["all"],listing_tags=[],listing_search,listingCustomDropdownFieldOptions,locale,flagMarker,markers=[],markerContents=[],markersArr=[],showingMarker="",markerCluster=null;$.validator.addMethod("address_validator",function(e,t,n){var i=null;if(""==e)return!0;var r=t.id.split("_"),o="";o=r[0].match("person")?"person":r[0].match("community")?"community":r[0]+"_"+r[1];var a=$('input[id$="latitude"][id^='+o+"]").attr("value")||"";return i=""!=a?!0:!1}),$(function(){var e="#home-toolbar-show-filters",t="#home-toolbar-filters",n=$(e),i=$(t);n.click(function(){n.toggleClass("selected"),i.toggleClass("home-toolbar-filters-mobile-hidden")}),$("#filters").length&&$("#desktop-filters").length&&relocate(768,$("#filters"),$("#desktop-filters").get(0)),relocate(768,$("#header-menu-mobile-anchor"),$("#header-menu-desktop-anchor").get(0)),relocate(768,$("#header-user-mobile-anchor"),$("#header-user-desktop-anchor").get(0))}),window.ST=window.ST||{},window.ST.orderManager=function(e){function t(t,n){return function(i){var r=t(e,c(i)),a=n(e,c(i));return a>=0&&r>=0?o(a,r):void 0}}function n(e){var t=i(e.up,e.id),n=i(e.down,e.id),r=t.flatMap(d),o=n.flatMap(p);f.plug(r),f.plug(o)}function i(e,t){return e.clickE().doAction(".preventDefault").map(_.constant(t))}function r(e,t){var n=e.transition({y:t.height()}).promise(),i=t.transition({y:-1*e.height()}).promise();$.when(n,i).done(function(){$(e).before($(t)),t.transition({y:0,duration:0}),e.transition({y:0,duration:0})})}function o(t,n){var i=e[t],r=e[n];return e=l.swapArrayElements(e,t,n),Bacon.once({down:i,up:r,order:a()})}function a(){return _.map(e,"id")}function s(t){e.push(t),n(t)}function u(t){e=_.reject(e,c(t))}var l=ST.utils,c=_.curry(function(e,t){return t.id===e}),d=t(_.findIndex,l.findPrevIndex),p=t(l.findNextIndex,_.findIndex),f=new Bacon.Bus;return f.onValue(function(e){r(e.down.element,e.up.element)}),e.forEach(n),{add:s,remove:u,order:f.filter(_.isObject).toProperty({order:a()})}},window.ST=window.ST||{},window.ST.ajaxStatusIndicator=function(e,t,n,i){n=n||1e3,i=i||3e3;var r=t.map(function(){return!0}).mapError(function(){return!1}),o=e.flatMapLatest(function(){return Bacon.later(n,!0).toProperty(!1)}).toProperty(!1),a=function(e){return e===!0};return{loading:e,success:o.and(r).filter(a),error:o.and(r.not()).filter(a),idle:o.and(r).debounce(i)}},window.ST=window.ST||{},function(e){e.initializeExpirationNotice=function(e){$("#"+e).lightbox_me({modalCSS:{top:"5px"},zIndex:1e6,closeEsc:!1,closeClick:!1})}}(window.ST),window.ST=window.ST||{},window.ST.initializeCustomFieldsSelectionClickHandlers=function(){$(".select-all").click(function(){$(".custom-field-category-checkbox").prop("checked",!0)}),$(".deselect-all").click(function(){$(".custom-field-category-checkbox").prop("checked",!1)})},window.ST.createCustomFieldOrder=function(e){var t=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),up:$(".custom-fields-action-up",t),down:$(".custom-fields-action-down",t)}}).get(),n=window.ST.orderManager(t),i=n.order.changes().debounce(800).map(".order").skipDuplicates(_.isEqual).map(function(e){return{type:"POST",url:ST.utils.relativeUrl("order"),data:{order:e}}}),r=i.ajax(),o=window.ST.ajaxStatusIndicator(i,r);o.loading.onValue(function(){$("#custom-field-ajax-saving").show(),$("#custom-field-ajax-error").hide(),$("#custom-field-ajax-success").hide()}),o.success.onValue(function(){$("#custom-field-ajax-saving").hide(),$("#custom-field-ajax-success").show()}),o.error.onValue(function(){$("#custom-field-ajax-saving").hide(),$("#custom-field-ajax-error").show()}),o.idle.onValue(function(){$("#custom-field-ajax-success").fadeOut()})},window.ST.createCustomFieldOptionOrder=function(e){function t(e){return _(e).map("sortPriority").max().value()}var n=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),sortPriority:Number($(t).find(".custom-field-hidden-sort-priority").val()),up:$(".custom-fields-action-up",t),down:$(".custom-fields-action-down",t)}}).get(),i=function(e){var t=e;return function(){return t+=1}}(t(n)),r=function(){var e=0;return function(){return e+=1}}(),o=window.ST.orderManager(n);o.order.changes().onValue(function(e){var t=e.up,n=e.down,i=t.element.find(".custom-field-hidden-sort-priority"),r=n.element.find(".custom-field-hidden-sort-priority"),o=r.val(),a=i.val();i.val(o),r.val(a)});var a=_.template($("#new-option-tmpl").html()),s=$("#options");return $("#custom-fields-add-option").click(function(e){e.preventDefault();var t="jsnew-"+r(),n=$(a({id:t,sortPriority:i()}));s.append(n);var o={id:t,element:n,up:$(".custom-fields-action-up",n),down:$(".custom-fields-action-down",n)};ST.newOptionAdded(),ST.customFieldOptionOrder.add(o),n.find("input").first().focus()}),{remove:o.remove,add:o.add}},window.ST.initializeCategoriesSelectionClickHandlers=function(){$(".select-all").click(function(){$(".category-listing-shape-checkbox").prop("checked",!0)}),$(".deselect-all").click(function(){$(".category-listing-shape-checkbox").prop("checked",!1)})},window.ST.initializeCategoriesOrder=function(){var e=$(".top-level-category-container").map(function(e,t){return{id:$(t).data("id"),element:$(t),up:$(t).find(".top-level-category-row").find(".category-action-up"),down:$(t).find(".top-level-category-row").find(".category-action-down")}}).get(),t=window.ST.orderManager(e).order,n=$(".top-level-category-container").get().map(function(e){var t=$(".sub-category-row",e).map(function(e,t){return{id:$(t).data("id"),element:$(t),up:$(".category-action-up",t),down:$(".category-action-down",t)}}).get();return window.ST.orderManager(t).order}),i=[t].concat(n),r=Bacon.combineAsArray(i).changes().debounce(800).map(function(e){var t=e.map(function(e){return e.order});return _.flatten(t)}).skipDuplicates(_.isEqual).map(function(e){return{type:"POST",url:ST.utils.relativeUrl("order"),data:{order:e}}}),o=r.ajax(),a=window.ST.ajaxStatusIndicator(r,o);a.loading.onValue(function(){$("#category-ajax-saving").show(),$("#category-ajax-error").hide(),$("#category-ajax-success").hide()}),a.success.onValue(function(){$("#category-ajax-saving").hide(),$("#category-ajax-success").show()}),a.error.onValue(function(){$("#category-ajax-saving").hide(),$("#category-ajax-error").show()}),a.idle.onValue(function(){$("#category-ajax-success").fadeOut()})},window.ST=window.ST||{},window.ST.initializeManageMembers=function(){function e(e){var t={};return t[$(e).val()]=$(e).prop("checked"),t}function t(t,n,i,r){var o=$(t).toArray().map(function(t){return $(t).asEventStream("change").map(function(t){return e(t.target)}).toProperty(e(t))}),a=Bacon.combineAsArray(o).changes().debounce(800).skipDuplicates(_.isEqual).map(function(e){function t(e){return _.values(e)[0]}var o=_.filter(e,t),a=_.reject(e,t),s={};return s[i]=_.keys(ST.utils.objectsMerge(o)),s[r]=_.keys(ST.utils.objectsMerge(a)),{type:"POST",url:ST.utils.relativeUrl(n),data:s}});return a}var n=t(".admin-members-can-post-listings","posting_allowed","allowed_to_post","disallowed_to_post"),i=t(".admin-members-is-admin","promote_admin","add_admin","remove_admin"),r=n.merge(i),o=r.ajax().endOnError(),a=window.ST.ajaxStatusIndicator(r,o);a.loading.onValue(function(){$(".ajax-update-notification").show(),$("#admin-members-saving-posting-allowed").show(),$("#admin-members-error-posting-allowed").hide(),$("#admin-members-saved-posting-allowed").hide()}),a.success.onValue(function(){$("#admin-members-saving-posting-allowed").hide(),$("#admin-members-saved-posting-allowed").show()}),a.error.onValue(function(){$("#admin-members-saving-posting-allowed").hide(),$("#admin-members-error-posting-allowed").show()}),a.idle.onValue(function(){$(".ajax-update-notification").fadeOut()}),$(".js-users-csv-export").click(function(){report_analytics_event("admin","export","users")})},window.ST=window.ST||{},window.ST.createMenuLinksOrder=function(e){function t(){var e=$("#menu-links-table"),t=$("#menu-links-empty");a>0?(e.show(),t.hide()):(e.hide(),t.show())}function n(e){$(".menu-link-remove",e.element).click(function(){e.element.remove(),s.remove(e.id),a--,t()})}var i=$("#menu-links"),r=_.template($("#new-menu-link-tmpl").html()),o=$(e).map(function(e,t){return{id:$(t).data("field-id"),element:$(t),up:$(".menu-link-action-up",t),down:$(".menu-link-action-down",t)}}).get(),a=o.length;t();var s=window.ST.orderManager(o);o.forEach(n),$("#menu-links-add").click(function(e){e.preventDefault();var o=_.uniqueId("jsnew-"),u=$(r({id:o}));i.append(u);var l={id:o,element:u,up:$(".menu-link-action-up",u),down:$(".menu-link-action-down",u)};s.add(l),n(l),u.find("input").first().focus(),a++,t()}),$("#menu-links-form").validate()},window.ST=window.ST||{},function(e){var t=function(){$("#community_transaction_agreement_checkbox").click(r)},n=function(){$("#edit_community").validate({errorPlacement:function(e,t){t.hasClass("selectized")?t.parent().append(e):t.after(e)}})},i=function(e,t){e.prop("disabled",!t).toggleClass("disabled",!t).toggleClass("required",t)},r=function(){var e=$("#community_transaction_agreement_checkbox").is(":checked"),t=$("input.transaction-agreement-modal, textarea.transaction-agreement-modal");i(t,!1),e&&t.filter(function(){return $(this).data("locale-enabled")===!0}).each(function(e,t){i($(t),!0)})};e.updateLocales=function(e){var t=$("input.transaction-agreement-modal, textarea.transaction-agreement-modal");t.data("locale-enabled",!1),$(e).each(function(e,n){t.filter("[name*='["+n+"]']").data("locale-enabled",!0)}),r()},e.initializeCommunityCustomizations=function(){t(),n()}}(window.ST),window.ST=window.ST||{},window.ST.initializeListingShapesOrder=function(){var e=$(".js-listing-shape-row").map(function(e,t){var n=$(t);return{id:n.data("id"),element:n,up:n.find(".js-listing-shape-action-up"),down:n.find(".js-listing-shape-action-down")}}).get(),t=window.ST.orderManager(e),n=t.order.changes().debounce(800).map(".order").skipDuplicates(_.isEqual).map(function(e){return{type:"POST",url:ST.utils.relativeUrl("order"),data:{order:e}}}),i=n.ajax(),r=window.ST.ajaxStatusIndicator(n,i);r.loading.onValue(function(){$(".js-listing-shape-ajax-saving").show(),$(".js-listing-shape-ajax-error").hide(),$(".js-listing-shape-ajax-success").hide()}),r.success.onValue(function(){$(".js-listing-shape-ajax-saving").hide(),$(".js-listing-shape-ajax-success").show()}),r.error.onValue(function(){$(".js-listing-shape-ajax-saving").hide(),$(".js-listing-shape-ajax-error").show()}),r.idle.onValue(function(){$(".js-listing-shape-ajax-success").fadeOut()})},window.ST.initializeListingShapeForm=function(e){$(e).validate({errorPlacement:function(e,t){t.hasClass("js-custom-unit-kind-radio")?e.appendTo($(".js-custom-unit-kind-container")):e.insertAfter(t)}});var t=function(e){var t=e.is(":checked");t?(i(!0),o(!0)):(i(!1),r(!1),o(!1))},n=function(e){var t=e.is(":checked");r(t?!0:!1)},i=function(e){c($(".js-online-payments"),e),d($(".js-online-payments-label"),e)},r=function(e){c($(".js-shipping-enabled"),e),d($(".js-shipping-enabled-label"),e)},o=function(e){c($(".js-unit-checkbox"),e),d($(".js-unit-label"),e)},a=function(){var e=$(this).data("customunitindex");"undefined"!=typeof e&&$(".js-custom-unit-"+e).remove()},s=_.template($(".js-listing-shape-add-custom-unit-form").html()),u=function(){var e=_.uniqueId("new_unit-"),t=$(s({uniqueId:e}));t.find(".js-listing-shape-close-custom-unit-form").click(l),t.insertBefore($(".js-listing-shape-add-custom-unit-link").parent()).show()},l=function(){this.parentElement.remove()},c=function(e,t){t?e.prop("disabled",!1):(e.prop("disabled",!0),e.prop("checked",!1))},d=function(e,t){e.toggleClass("listing-shape-label-disabled",!t)};$(".js-price-enabled").change(function(){t($(this))}),$(".js-online-payments").change(function(){n($(this))}),$(".js-listing-shape-add-custom-unit-link").click(function(){u()}),$(".js-listing-shape-close-custom-unit-form").click(l),$(".js-remove-custom-unit").click(a),t($(".js-price-enabled")),n($(".js-online-payments"))},window.ST=window.ST||{},function(e){var t=function(e){var t=$(".js-delete-marketplace-button"),n=$(".js-delete-marketplace-confirmation-form"),i=$(".js-delete-marketplace-confirmation-domain");t.click(function(){t.hide(),$(".js-delete-marketplace-confirmation-form").show()}),n.submit(function(){return i.val()===e?!0:!1})};e.initializeDeleteMarketplace=t}(window.ST),window.ST=window.ST||{},function(e){var t=2e4,n=function(e){return $(e).asEventStream("keydown blur input change click").debounce(0).map(function(e){return e.target.value})},i=function(e){return e.email?e.name?e.name+" <"+e.email.toLowerCase()+">":e.email.toLowerCase():"-"};e.initializeSenderEmailForm=function(e,r,o){var a=function(e){return ST.utils.baconStreamFromAjaxPolling({url:r,data:{email:e.email}},function(t){return t.updatedAt!==e.updatedAt},{timeout:t})},s=function(){$(".js-loaded-sender-address-status").hide(),$(".js-status-loading").show(),[$(".js-status-verified"),$(".js-status-requested"),$(".js-status-error"),$(".js-status-expired"),$(".js-status-resent"),$(".js-sender-address-preview-new"),$(".js-if-you-need-to-change"),$(".js-sender-address-verification-sent-time-ago"),$(".js-sender-address-preview-current"),$(".js-verification-email-from")].forEach(function(e){e.hide()})},u=function(e){return Bacon.once({url:r,data:{email:e.email,sync:!0}}).ajax()},l=function(){return Bacon.once({url:o,type:"POST"}).ajax()},c=function(e){var t=Bacon.constant(e),n=function(e){return"expired"===e.verificationStatus},i=function(e){return _.contains(["none","requested","expired"],e.verificationStatus)},r=t.filter(ST.utils.not(n)),o=t.filter(n),c=r.flatMap(function(e){return u(e)}).flatMap(function(e){return a(e)}),d=c.filter(ST.utils.not(i)),h=c.filter(i),m=Bacon.mergeAll(o,h).flatMap(function(e){return l(e).flatMap(function(){return Bacon.once(e)})});d.onValue(p),m.onValue(function(e){p(_.merge(e,{verificationStatus:"resent"}))}),m.onError(f),s()},d=function(e){$(".js-sender-address-resend-verification").click(function(t){t.preventDefault(),c(e)})},p=function(e){$(".js-status-loading").hide(),$(".js-loaded-sender-address-status").show(),$(".js-sender-address-verification-sent-time-ago").text(e.translatedVerificationSentTimeAgo).show(),d(e);var t={verified:[".js-status-verified",".js-sender-address-preview-new",".js-if-you-need-to-change"],requested:[".js-status-requested",".js-sender-address-verification-sent-time-ago",".js-sender-address-preview-current",".js-verification-email-from"],expired:[".js-status-expired",".js-sender-address-preview-current"],resent:[".js-status-resent",".js-sender-address-preview-current",".js-verification-email-from"]};(t[e.verificationStatus]||[]).forEach(function(e){$(e).show()})},f=function(){$(".js-status-loading").hide(),$(".js-loaded-sender-address-status").show(),$(".js-status-error").show(),$(".js-sender-address-preview-current").show()},h=function(){var e=$(".js-sender-address-preview-container"),t=$(".js-sender-address-preview-values"),r=n(".js-sender-name-input"),o=n(".js-sender-email-input"),a=o.map(function(e){return m.valid()?e:""}),s=Bacon.combineTemplate({name:r.toProperty(""),email:a.toProperty("")}).skipDuplicates(_.isEqual).changes(),u=o.filter(function(){return m.valid()});u.take(1).onValue(function(){e.show()}),s.onValue(function(e){t.text(i(e))})},m=$(".js-sender-email-form");if(m.validate({rules:{email:{required:!0,email:!0}}}),h(),e&&"verified"!==e.verificationStatus){var g=a(e);g.onValue(p),g.onError(f)}}}(window.ST),window.ST=window.ST||{},window.ST.paymentMath=function(){function e(e){return parseFloat(e.replace(",","."))}function t(t,n){return e(t)*n}function n(e){return"number"!=typeof e||isNaN(e)?"-":e.toFixed(2)}function i(e,t,n){n=n||0;var i=e*t/100;return Math.max(i,n)}return{parseFloatFromFieldValue:e,parseSubunitFloatFromFieldValue:t,displayMoney:n,totalCommission:i}}(),$(function(){function e(){n.forEach(function(e){e.close()})}function t(t){function n(){var e=a.offset(),t=e.top+a.outerHeight(),n=e.left;if("right"===s){var i=n-(o.outerWidth()-a.outerWidth());o.css("left",i)}else o.css("left",n);o.css("top",t)}function i(){e(),"absolute"===u&&n(),o.removeClass("hidden"),t.addClass("toggled"),l=r}function r(){o.addClass("hidden"),t.removeClass("toggled"),l=i}var o=$(t.attr("data-toggle")),a=$(t.attr("data-toggle-anchor-element")||t),s=t.attr("data-toggle-anchor-position")||"left",u=t.attr("data-toggle-position")||"relative",l=i;return t.click(function(e){e.stopPropagation(),l()}),o.click(function(e){e.stopPropagation()}),{close:r}}var n=[];n=_.toArray($(".toggle")).map(function(e){return t($(e))}),$(document).click(function(){e()})}),function(e){"use strict";if(e.zepto&&!e.fn.removeData)throw new ReferenceError("Zepto is loaded without the data module.");e.fn.noUiSlider=function(t,n){function i(e,t){return 100*t/(e[1]-e[0])}function r(e,t){return i(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}function o(e,t){return t*(e[1]-e[0])/100+e[0]}function a(t){return t instanceof e||e.zepto&&e.zepto.isZ(t)}function s(e){return!isNaN(parseFloat(e))&&isFinite(e)}function u(t,n){e.isArray(t)||(t=[t]),e.each(t,function(){"function"==typeof this&&this.call(n)})}function l(t,n){return function(){var i=[null,null];i[n]=e(this).val(),t.val(i,!0)}}function c(e,t){return Math.round(e/t)*t}function d(e,t){return e=e.toFixed(t.decimals),0===parseFloat(e)&&(e=e.replace("-0","0")),e.replace(".",t.serialization.mark)}function p(e,t,n){if(1===e.length)return e[0];var i=e[0].offset()[n]+e[1].offset()[n];return e[i/2>t?0:1]}function f(e,t){return parseFloat(e.toFixed(t))}function h(t){t.preventDefault();var n,i,r=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer"),s=t;return 0===t.type.indexOf("MSPointer")&&(a=!0),t.originalEvent&&(t=t.originalEvent),r&&(n=t.changedTouches[0].pageX,i=t.changedTouches[0].pageY),(o||a)&&(a||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),n=t.clientX+window.pageXOffset,i=t.clientY+window.pageYOffset),e.extend(s,{pointX:n,pointY:i,cursor:o})}function m(e,t,n,i){var r=i.target;return e=e.replace(/\s/g,B+" ")+B,t.on(e,function(e){var t=r.attr("disabled");return t=!(void 0===t||null===t),r.hasClass("noUi-state-tap")||t?!1:void n(h(e),i,r.data("base").data("options"))})}function g(t){var n=this.target;return void 0===t?this.element.data("value"):(t===!0?t=this.element.data("value"):this.element.data("value",t),void(void 0!==t&&e.each(this.elements,function(){"function"==typeof this?this.call(n,t):this[0][this[1]](t)})))}function v(t,n,i){if(a(n)){var r=[],o=t.data("target");return t.data("options").direction&&(i=i?0:1),n.each(function(){e(this).on("change"+B,l(o,i)),r.push([e(this),"val"])}),r}return"string"==typeof n&&(n=[e('<input type="hidden" name="'+n+'">').appendTo(t).addClass(N[3]).change(function(e){e.stopPropagation()}),"val"]),[n]}function y(t,n,i){var r=[];return e.each(i.to[n],function(e){r=r.concat(v(t,i.to[n][e],n))}),{element:t,elements:r,target:t.data("target"),val:g}}function b(e,t){var n=e.data("target");n.hasClass(N[14])||(t||(n.addClass(N[15]),setTimeout(function(){n.removeClass(N[15])},450)),n.addClass(N[14]),u(e.data("options").block,n))}function _(e,t){var n=e.data("options");t=f(t,7),e.data("target").removeClass(N[14]),e.css(n.style,t+"%").data("pct",t),e.is(":first-child")&&e.toggleClass(N[13],t>50),n.direction&&(t=100-t),e.data("store").val(d(o(n.range,t),n))}function w(e,t){var n=e.data("base"),i=n.data("options"),r=n.data("handles"),o=0,a=100;return s(t)?(i.step&&(t=c(t,i.step)),r.length>1&&(e[0]!==r[0][0]?o=f(r[0].data("pct")+i.margin,7):a=f(r[1].data("pct")-i.margin,7)),t=Math.min(Math.max(t,o),0>a?100:a),t===e.data("pct")?[o?o:!1,100===a?!1:a]:(_(e,t),!0)):!1}function x(e,t,n,i){e.addClass(N[5]),setTimeout(function(){e.removeClass(N[5])},300),w(t,n),u(i,e.data("target")),e.data("target").change()}function C(t,n,i){var r,o=n.handles,a=t[n.point]-n.start[n.point];if(a=100*a/n.size,1===o.length){if(r=w(o[0],n.positions[0]+a),r!==!0)return void(e.inArray(o[0].data("pct"),r)>=0&&b(n.base,!i.margin))}else{var s,l,d,p;if(i.step&&(a=c(a,i.step)),s=d=n.positions[0]+a,l=p=n.positions[1]+a,0>s?(l+=-1*s,s=0):l>100&&(s-=l-100,l=100),0>d&&!s&&!o[0].data("pct"))return;if(100===l&&p>100&&100===o[1].data("pct"))return;_(o[0],s),_(o[1],l)}u(i.slide,n.target)}function S(e,t,n){1===t.handles.length&&t.handles[0].data("grab").removeClass(N[4]),e.cursor&&O.css("cursor","").off(B),M.off(B),t.target.removeClass(N[14]+" "+N[20]).change(),u(n.set,t.target)}function k(t,n,i){1===n.handles.length&&n.handles[0].data("grab").addClass(N[4]),t.stopPropagation(),m(L.move,M,C,{start:t,base:n.base,target:n.target,handles:n.handles,positions:[n.handles[0].data("pct"),n.handles[n.handles.length-1].data("pct")],point:i.orientation?"pointY":"pointX",size:i.orientation?n.base.height():n.base.width()}),m(L.end,M,S,{target:n.target,handles:n.handles}),t.cursor&&(O.css("cursor",e(t.target).css("cursor")),n.handles.length>1&&n.target.addClass(N[20]),O.on("selectstart"+B,function(){return!1}))}function T(e,t,n){var i,r,o,a,s=t.base;e.stopPropagation(),n.orientation?(o=e.pointY,a=s.height()):(o=e.pointX,a=s.width()),i=p(s.data("handles"),o,n.style),r=100*(o-s.offset()[n.style])/a,x(s,i,r,[n.slide,n.set])}function E(e,t,n){var i,r,o=t.base.data("handles");r=n.orientation?e.pointY:e.pointX,r=r<t.base.offset()[n.style],i=r?0:100,r=r?0:o.length-1,x(t.base,o[r],i,[n.slide,n.set])}function D(t,n){function r(e){return 2!==e.length?!1:(e=[parseFloat(e[0]),parseFloat(e[1])],s(e[0])&&s(e[1])?e[1]<e[0]?!1:e:!1)}var o={resolution:function(e,t){switch(e){case 1:case.1:case.01:case.001:case 1e-4:case 1e-5:e=e.toString().split("."),t.decimals="1"===e[0]?0:e[1].length;break;case void 0:t.decimals=2;break;default:return!1}return!0},mark:function(e,t,n){if(!e)return t[n].mark=".",!0;switch(e){case".":case",":return!0;default:return!1}},to:function(t,n,i){function r(e){return a(e)||"string"==typeof e||"function"==typeof e||e===!1||a(e[0])&&"function"==typeof e[0][e[1]]}function o(t){var n=[[],[]];return r(t)?n[0].push(t):e.each(t,function(e,t){e>1||(r(t)?n[e].push(t):n[e]=n[e].concat(t))}),n}if(t){var s,u;for(t=o(t),n.direction&&t[1].length&&t.reverse(),s=0;s<n.handles;s++)for(u=0;u<t[s].length;u++){if(!r(t[s][u]))return!1;t[s][u]||t[s].splice(u,1)}n[i].to=t}else n[i].to=[[],[]];return!0}},u={handles:{r:!0,t:function(e){return e=parseInt(e,10),1===e||2===e}},range:{r:!0,t:function(e,t,n){return t[n]=r(e),t[n]&&t[n][0]!==t[n][1]}},start:{r:!0,t:function(t,n,i){return 1===n.handles?(e.isArray(t)&&(t=t[0]),t=parseFloat(t),n.start=[t],s(t)):(n[i]=r(t),!!n[i])}},connect:{r:!0,t:function(e,t,n){if("lower"===e)t[n]=1;else if("upper"===e)t[n]=2;else if(e===!0)t[n]=3;else{if(e!==!1)return!1;t[n]=0}return!0}},orientation:{t:function(e,t,n){switch(e){case"horizontal":t[n]=0;break;case"vertical":t[n]=1;break;default:return!1}return!0}},margin:{r:!0,t:function(e,t,n){return e=parseFloat(e),t[n]=i(t.range,e),s(e)}},direction:{r:!0,t:function(e,t,n){switch(e){case"ltr":t[n]=0;break;case"rtl":t[n]=1,t.connect=[0,2,1,3][t.connect];
break;default:return!1}return!0}},behaviour:{r:!0,t:function(e,t,n){return t[n]={tap:e!==(e=e.replace("tap","")),extend:e!==(e=e.replace("extend","")),drag:e!==(e=e.replace("drag","")),fixed:e!==(e=e.replace("fixed",""))},!e.replace("none","").replace(/\-/g,"")}},serialization:{r:!0,t:function(e,t,n){return o.to(e.to,t,n)&&o.resolution(e.resolution,t)&&o.mark(e.mark,t,n)}},slide:{t:function(t){return e.isFunction(t)}},set:{t:function(t){return e.isFunction(t)}},block:{t:function(t){return e.isFunction(t)}},step:{t:function(e,t,n){return e=parseFloat(e),t[n]=i(t.range,e),s(e)}}};e.each(u,function(e,i){var r=t[e],o=void 0!==r;if(i.r&&!o||o&&!i.t(r,t,e))throw console&&console.log&&console.group&&(console.group("Invalid noUiSlider initialisation:"),console.log("Option:	",e),console.log("Value:	",r),console.log("Slider(s):	",n),console.groupEnd()),new RangeError("noUiSlider")})}function I(t){return this.data("options",e.extend(!0,{},t)),t=e.extend({handles:2,margin:0,connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),t.serialization=t.serialization||{},D(t,this),t.style=t.orientation?"top":"left",this.each(function(){var n,i,r,o=e(this),a=[],s=e("<div/>").appendTo(o);if(o.data("base"))throw new Error("Slider was already initialized.");for(o.data("base",s).addClass([N[6],N[16+t.direction],N[10+t.orientation]].join(" ")),n=0;n<t.handles;n++)r=e("<div><div/></div>").appendTo(s),r.addClass(N[1]),r.children().addClass([N[2],N[2]+N[7+t.direction+(t.direction?-1*n:n)]].join(" ")),r.data({base:s,target:o,options:t,grab:r.children(),pct:-1}).attr("data-style",t.style),r.data({store:y(r,n,t.serialization)}),a.push(r);switch(t.connect){case 1:o.addClass(N[9]),a[0].addClass(N[12]);break;case 3:a[1].addClass(N[12]);case 2:a[0].addClass(N[9]);case 0:o.addClass(N[12])}if(s.addClass(N[0]).data({target:o,options:t,handles:a}),o.val(t.start),!t.behaviour.fixed)for(n=0;n<a.length;n++)m(L.start,a[n].children(),k,{base:s,target:o,handles:[a[n]]});t.behaviour.tap&&m(L.start,s,T,{base:s,target:o}),t.behaviour.extend&&(o.addClass(N[19]),t.behaviour.tap&&m(L.start,o,E,{base:s,target:o})),t.behaviour.drag&&(i=s.find("."+N[9]).addClass(N[18]),t.behaviour.fixed&&(i=i.add(s.children().not(i).data("grab"))),m(L.start,i,k,{base:s,target:o,handles:a}))})}function F(){var t=e(this).data("base"),n=[];return e.each(t.data("handles"),function(){n.push(e(this).data("store").val())}),1===n.length?n[0]:t.data("options").direction?n.reverse():n}function $(t,n){return e.isArray(t)||(t=[t]),this.each(function(){var i,o,a=e(this).data("base"),s=Array.prototype.slice.call(a.data("handles"),0),l=a.data("options");for(s.length>1&&(s[2]=s[0]),l.direction&&t.reverse(),o=0;o<s.length;o++)i=t[o%2],null!==i&&void 0!==i&&("string"===e.type(i)&&(i=i.replace(",",".")),i=r(l.range,parseFloat(i)),l.direction&&(i=100-i),w(s[o],i)!==!0&&s[o].data("store").val(!0),n===!0&&u(l.set,e(this)))})}function j(t){var n=[[t,""]];e.each(t.data("base").data("handles"),function(){n=n.concat(e(this).data("store").elements)}),e.each(n,function(){this.length>1&&this[0].off(B)}),t.removeClass(N.join(" ")),t.empty().removeData("base options")}function A(t){return this.each(function(){var n=e(this).val()||!1,i=e(this).data("options"),r=e.extend({},i,t);n!==!1&&j(e(this)),t&&(e(this).noUiSlider(r),n!==!1&&r.start===i.start&&e(this).val(n))})}var M=e(document),O=e("body"),B=".nui",P=e.fn.val,N=["noUi-base","noUi-origin","noUi-handle","noUi-input","noUi-active","noUi-state-tap","noUi-target","-lower","-upper","noUi-connect","noUi-horizontal","noUi-vertical","noUi-background","noUi-stacking","noUi-block","noUi-state-blocked","noUi-ltr","noUi-rtl","noUi-dragable","noUi-extended","noUi-state-drag"],L=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"};return e.fn.val=function(){return this.hasClass(N[6])?arguments.length?$.apply(this,arguments):F.apply(this):P.apply(this,arguments)},(n?A:I).call(this,t)}}(window.jQuery||window.Zepto),window.ST=window.ST||{},window.ST.rangeFilter=function(e,t,n,i,r,o){function a(e){return(+e).toString().replace(/^-?\d*\.?/g,"").length}function s(){if(o){var e=Math.max.apply(null,t.map(a));return 1/Math.pow(10,e)}return 1}function u(e){return function(t){e.html(t)}}var l=s();$(e).noUiSlider({range:t,step:l,start:[n[0],n[1]],connect:!0,serialization:{resolution:l,to:[[$(r[0]),u($(i[0]))],[$(r[1]),u($(i[1]))]]}})},window.ST=window.ST||{},function(e){var t={};e.t=function(e,n){if(null==t[e])throw new Error("No translation loaded: "+e);return _.template(t[e],n||{})},e.loadTranslations=function(e){_.extend(t,e)}}(window.ST),window.ST=window.ST||{},window.ST.renderImagePlaceholder=function(){function e(e,t){e?g.text(e):g.empty(),t?v.text(t):v.empty(),r()}function t(e){g.hide(),v.hide(),b.show(),b.text(e)}function n(){b.hide(),g.show(),v.show()}function i(){h.css("display","none")}function r(){h.css("display",m)}function o(e){d.show().attr("src",e)}function a(e){y.val(e)}function s(){c.addClass("fileupload-remove-hover")}function u(){c.removeClass("fileupload-remove-hover")}var l=$("#new-image-tmpl").html(),c=$(l),d=$("img",c).hide(),p=$(".fileupload-preview-remove-image",c),f=$(".fileupload",c),h=$(".fileupload-text-container",c),m=h.css("display"),g=$(".fileupload-text",c),v=$(".fileupload-small-text",c),y=$(".listing-image-id",c),b=$(".fileupload-error-text",c);return i(),u(),{uniqueId:_.uniqueId("image_element_"),container:c,showMessage:e,hideTexts:i,fileupload:f,showPreview:o,removeLink:p,showRemove:s,hideRemove:u,setListingId:a,showError:t,hideError:n}},window.ST.imageUploadElementManager=function(e){function t(t){var n=_.last(c);n?t.insertAfter(n):e.prepend(t),c.push(t)}function n(e){e.remove(),c=_.without(c,e)}function i(t){var n=_.last(l),i=_.last(c);n?t.insertAfter(n):i?t.insertAfter(i):e.prepend(t),l.push(t)}function r(e,t){function n(e,t,n){return e===n?t:n}l=_.map(l,_.partial(n,e,t)),e.after(t),e.remove()}function o(e){e.remove(),l=_.without(l,e)}function a(t){var n=_.last(u);n&&n.showMessage(ST.t("listings.form.images.select_file")),t.showMessage(ST.t("listings.form.images.add_more")),e.append(t.container),u.push(t)}function s(){var e=u.pop();e.container.remove(),_.last(u).showMessage(ST.t("listings.form.images.add_more"))}var u=[],l=[],c=[];return{addEmpty:a,addUploading:i,addPreview:t,removeEmpty:s,removeUploading:o,removePreview:n,changeStateToProcessing:r}},window.ST.imageUploader=function(e,t){function n(){var e={paramName:"listing_image[image]",url:t.saveFromFile,submit:function(e,t){t.formData={"Content-Type":ST.utils.contentTypeByFilename(t.files[0].name)}}};return o(e)}function i(e){return function(){return e}}function r(e,t){return e+t}function o(e){var n=window.ST.renderImagePlaceholder("empty");n.showMessage(ST.t("listings.form.images.select_file")),n.fileupload.show();var i={dataType:"text",dropZone:n.container,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,imageMaxWidth:t.originalImageWidth,imageMaxHeight:t.originalImageHeight,loadImageMaxFileSize:t.maxImageFilesize,autoUpload:!1,messages:{acceptFileTypes:ST.t("listings.form.images.accepted_formats"),maxFileSize:ST.t("listings.form.images.file_too_large")},disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent)},r=_.extend(i,e);n.fileupload.fileupload(r).on("dragenter",function(){$(this).addClass("hover")}).on("dragleave",function(){$(this).removeClass("hover")});var o=n.fileupload.asEventStream("fileuploadadd",function(e,t){return[$(this),t]}),a=o.flatMap(function(e){var t=e[0],n=e[1];return Bacon.fromPromise(t.fileupload("process",n))});return a.onError(function(e){n.showError(e.files[0].error)}),a.onValue(function(){n.hideError()}),{element:n,stream:a}}function a(e){function n(e,t){return _.isArray(e)?_.find(e,function(e){return e.name===t}).value:e[t]}function i(e){var i=t.s3UploadPath+n(e.formData,"key"),r=e.files[0].name;return{type:"PUT",url:t.saveFromUrl,data:{filename:r,path:i}}}function r(){o.showMessage(ST.t("listings.form.images.uploading_failed"))}var o=window.ST.renderImagePlaceholder();o.fileupload.remove(),o.container.addClass("fileupload-uploading");var a=Bacon.fromPromise(e.process()),s=a.flatMap(function(e){var t=e.submit();return Bacon.fromPoll(100,function(){var t=e.progress(),n=Math.floor(t.loaded/t.total*100)+"%",i=[new Bacon.Next(n)];return t.loaded===t.total&&i.push(new Bacon.End),i}).onValue(function(e){o.showMessage(e)}),Bacon.fromBinder(function(n){return t.done(function(t){n(new Bacon.Next([e,t]))}).fail(function(){n(new Bacon.Error)}).always(function(){n(new Bacon.End)}),function(){}})}),u=s.filter(function(){return c}),l=s.filter(function(){return!c}),d=l.map(function(e){return _.last(e)}),p=u.flatMap(function(e){return Bacon.once(i(_.first(e))).ajax()}),f=Bacon.mergeAll(d,p).map(JSON.parse);return f.onError(r),a.onError(r),{element:o,stream:f}}function s(e){var t=window.ST.renderImagePlaceholder();t.fileupload.remove(),t.container.addClass("fileupload-uploading"),t.showMessage(ST.t("listings.form.images.processing"),ST.t("listings.form.images.this_may_take_a_while")),t.setListingId(e.id);var n=ST.utils.baconStreamFromAjaxPolling({url:e.urls.status},function(e){return e.ready||e.errored}),i=n.filter(function(e){return e.ready&&!e.errored}),r=n.filter(function(e){return e.errored});return i.onValue(function(){l.removeUploading(t.container)}),r.onValue(function(){t.showMessage(ST.t("listings.form.images.image_processing_failed"))}),{element:t,stream:n}}function u(e){var t=window.ST.renderImagePlaceholder();t.fileupload.remove(),t.setListingId(e.id),t.showPreview(e.images.thumb),t.showRemove(),t.container.addClass("fileupload-preview");var n=t.removeLink.asEventStream("click").doAction(".preventDefault");n.onValue(function(){t.hideRemove(),t.showMessage(ST.t("listings.form.images.removing"))});var i=n.map(function(){return{url:e.urls.remove,type:"DELETE"}}),r=i.ajax();return r.onValue(function(){l.removePreview(t.container)}),{element:t,stream:r}}var l=ST.imageUploadElementManager($("#image-uploader-container")),c=!!t.s3Fields&&!!t.s3UploadPath,d=2,p=function(){var e=0;return function(){var n={url:t.s3UploadPath,paramName:"file",submit:function(n,i){var r=ST.utils.filenameToURLSafe(i.files[0].name);i.formData=_.extend({},t.s3Fields,{"Content-Type":ST.utils.contentTypeByFilename(i.files[0].name),key:t.s3Fields.key.replace("${index}",e++).replace("${filename}",r)})}};return o(n)}}(),f=e.length<d?d-e.length:0,h=_().range(f+1).map(function(){return c?p():n()}).each(function(e){l.addEmpty(e.element)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),m=h.map(function(e){return a(e)}),g=m.flatMap(function(e){var t=e.stream.map(s);return t.onValue(function(t){l.changeStateToProcessing(e.element.container,t.element.container)}),t});m.onValue(function(e){l.addUploading(e.element.container)});var v=g.flatMap(function(e){return e.stream}),y=_.filter(e,function(e){return!e.ready}),b=_.filter(e,function(e){return e.ready}),w=_(y).map(function(e){return s(e)}).each(function(e){l.addUploading(e.element.container)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),x=_(b).map(function(e){return u(e)}).each(function(e){l.addPreview(e.element.container)}).map(function(e){return e.stream}).reduce(function(e,t){return e.merge(t)}),C=w?v.merge(w):v,S=C.map(function(){return-1}).merge(g.map(function(){return 1})).scan(y.length,function(e,t){return e+t}),k=m.map(function(){return 1}).merge(g.map(function(){return-1})).scan(0,function(e,t){return e+t}),T=Bacon.combineTemplate({loading:k,processing:S}),E=C.filter(function(e){return e.ready&&!e.errored}),D=E.map(function(e){return u(e)});D.onValue(function(e){l.addPreview(e.element.container)});var I=D.flatMap(function(e){return e.stream}),F=x?I.merge(x):I,j=h.map(i(1)).merge(F.map(i(-1))).scan(e.length,r),A=j.map(function(e){return d>e}),M=j.map(function(e){return d>=e});return F.filter(A).onValue(function(){var e=c?p():n();l.addEmpty(e.element)}),h.filter(M).onValue(function(){l.removeEmpty()}),T},window.ST=window.ST||{},ST.imageCarousel=function(e){function t(e,t,n){var i="right"===e?-1:1,r="right"===e?1:-1;t.transition({x:i*t.width()},0),t.show();var o=n.transition({x:r*n.width()},l).promise(),a=t.transition({x:0},l).promise(),s=$.when(a,o);return s.done(function(){n.hide()}),s}function n(e,n){var i=n>e,r=e>n,o=s[e],a=s[n];i&&t("left",a,o),r&&t("right",a,o)}var i=_.template($("#image-frame-template").html()),r=$("#listing-image-navi-left"),o=$("#listing-image-navi-right"),a=$("#listing-image-frame"),s=_.map(e,function(e){return $(i({url:e.images.big,aspectRatioClass:e.aspectRatio}))});_.each(s,function(e){e.hide(),a.append(e)});var u=0,l=300;s[u].show();var c=_.partial(ST.utils.prevIndex,s.length),d=_.partial(ST.utils.nextIndex,s.length),p=new Bacon.Bus,f=new Bacon.Bus,h=r.asEventStream("click").doAction(".preventDefault"),m=o.asEventStream("click").doAction(".preventDefault");p.plug(h),f.plug(m);var g=p.debounceImmediate(l).map(function(){return{value:null,fn:c}}),v=f.debounceImmediate(l).map(function(){return{value:null,fn:d}}),y=new Bacon.Bus;y.plug(g),y.plug(v);var b=y.scan(u,function(e,t){return _.isNumber(t.value)?t.value:t.fn(e)}).skipDuplicates(_.isEqual).slidingWindow(2,2);return b.onValues(n),{prevClicked:h,nextClicked:m,next:function(e){f.plug(e)},prev:function(e){p.plug(e)},show:function(e){y.plug(e.map(function(e){return{value:e}}))}}},window.ST=window.ST||{},ST.thumbnailStripe=function(e,t){function n(){return p.width()}function i(){return Math.max(x.length-Math.floor(n()/m)-2,0)}function r(){return m-n()%m/2-g}function o(e,t){var n=e.value,i=t.value,r=n>i,o=i>n,d="prev"===t.direction&&o,p="next"===t.direction&&r;a(i)||(o?d?c():s(i):p?l():u(i)),x[n].removeClass(h),x[i].addClass(h)}function a(e){var t=e*m,i=t+m,o=k*m+T*r(),a=o+n();return t>=o&&a>=i}function s(e){var t=0===k&&0===T,n=e===x.length-1;n?T=2:t?T=1:k++,d(k,T)}function u(e){var t=k===i()&&2===T,n=0===e;n?T=0:t?T=1:k--,d(k,T)}function l(){T=0,k=0,d(k,T)}function c(){T=2,k=i(),d(k,T)}function d(e,t){y.transition({x:-1*(e*m+t*r())})}var p=$("#thumbnail-stripe"),f=_.template($("#image-thumbnail-template").html());t=t||{};var h=t.selectedClass||"selected",m=t.thumbnailWidth||60,g=t.paddingAdjustment||0,v=300;p.empty();var y=$("<div />");y.css("position","absolute"),y.css("left",["-",g,"px"].join("")),y.css("right",["-",g,"px"].join("")),p.append(y);var b,w=[],x=_.map(e,function(e,t){var n=$(f({url:e.images.thumb}));return w.push(n.asEventStream("click").map(function(){return t})),n}),C=Bacon.mergeAll.apply(null,w).debounceImmediate(v);_.each(x,function(e){y.append(e)}),x.length<2&&p.hide(),b=x.length*m+2*g,y.width(b);var S=0,k=0,T=0,E=_.partial(ST.utils.nextIndex,x.length),D=_.partial(ST.utils.prevIndex,x.length),I=new Bacon.Bus,F=new Bacon.Bus;x[S].addClass(h);var j=F.map(function(){return{value:null,fn:D,direction:"prev"}}),A=I.map(function(){return{value:null,fn:E,direction:"next"}}),M=C.map(function(e){return{value:e}}),O=j.merge(A).merge(M).scan({value:S},function(e,t){var n=null!=t.value?t.value:t.fn(e.value);return{direction:t.direction,value:n}}).skipDuplicates(_.isEqual).slidingWindow(2,2);return O.onValues(o),{next:function(e){I.plug(e.debounceImmediate(v))},prev:function(e){F.plug(e.debounceImmediate(v))},show:C}},window.ST=window.ST||{},function(e){e.listing=function(){$("#add-to-updates-email").on("click",function(){var e=$(this).find("#add-to-updates-email-text"),t=e.data("action-loading"),n=e.data("action-success"),i=e.data("action-error"),r=$(this).attr("href");e.html(t),$.ajax({url:r,type:"PUT"}).done(function(){e.html(n)}).fail(function(){e.html(i)})})},e.initializeQuantityValidation=function(e){jQuery.validator.addMethod("positiveIntegers",function(e){return e%1===0&&e>0},jQuery.validator.format(e.errorMessage)),$("#"+e.input).rules("add",{positiveIntegers:!0})},e.initializeShippingPriceTotal=function(e,t,n){var i=$(e),r=$(t),o=function(){r.each(function(e,t){var r=$(t),o=r.data("shipping-price")||0,a=r.data("per-additional")||0,s=parseInt(i.val()||0),u=Math.max(0,s-1),l=o+a*u,c=(l/100).toFixed(2)+"",d=c.replace(".",n);r.text(d)})};i.on("keyup change",o),o()}}(window.ST),window.ST=window.ST||{},window.ST.listingImages=function(e){function t(){return ST.thumbnailStripe(e,{thumbnailWidth:64,paddingAdjustment:2})}function n(){return ST.imageCarousel(e)}function i(e){return e.keyCode||e.which}var r=n(),o=t(),a=37,s=39,u=_.curry(_.isEqual,2),l=$(document).asEventStream("keyup").map(i),c=l.filter(u(a)),d=l.filter(u(s));o.next(r.nextClicked),o.next(d),o.prev(r.prevClicked),o.prev(c),r.next(d),r.prev(c),r.show(o.show)},window.ST=window.ST||{},function(e){e.initializeLocationSearch=function(){var e=document.getElementById("q"),t=document.getElementById("ls"),n=document.getElementById("lc"),i=document.getElementById("boundingbox"),r=document.getElementById("homepage-filters"),o=new window.google.maps.places.Autocomplete(e,{bounds:{north:-90,east:-180,south:90,west:180}});o.setTypes(["geocode"]),i.value=null,window.google.maps.event.addListener(o,"place_changed",function(){var e=o.getPlace();null!=e&&(null!=e.geometry?(n.value=e.geometry.location.toUrlValue(),t.value=window.google.maps.places.PlacesServiceStatus.OK,e.geometry.viewport&&(i.value=e.geometry.viewport.toUrlValue()),r.submit()):(n.value="",a(e.name,s)))}),r.addEventListener("submit",function(i){""===t.value&&""===n.value&&""!==e.value&&(i.preventDefault(),a(e.value,s))}),e.addEventListener("keypress",function(e){13===e.keyCode&&e.preventDefault()});var a=function(e,t){var n=new window.google.maps.places.AutocompleteService;n.getQueryPredictions({input:e},t)},s=function(e,o){var a=window.google.maps.places.PlacesServiceStatus;if(o===a.OK){var s=new window.google.maps.Map(document.createElement("div")),u=new window.google.maps.places.PlacesService(s);u.getDetails({placeId:e[0].place_id},function(e,o){o===a.OK&&(n.value=e.geometry.location.toUrlValue(),e.geometry.viewport&&(i.value=e.geometry.viewport.toUrlValue())),t.value=o,r.submit()})}else t.value=o,r.submit()}}}(window.ST),window.ST=window.ST||{},function(e){e.initializeFromToDatePicker=function(t){var n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0),r=$("#"+t),o=r.data("locale"),a={startDate:i,inputs:[$("#start-on"),$("#end-on")],onRender:function(e){return e.valueOf()<i.valueOf()?"disabled":""}};"en"!==o&&(a.language=o);var s=r.datepicker(a),u={"booking-start-output":$("#booking-start-output"),"booking-end-output":$("#booking-end-output")};s.on("changeDate",function(t){var n=t.dates[0],i=$(t.target).data("output"),r=u[i];r.val(e.utils.toISODate(n))})}}(window.ST),window.ST.onFollowButtonAjaxComplete=function(e,t){var n=$(e.target),i=$(t.responseText);$(".button-hoverable",i).addClass("button-disable-hover"),i.on("mouseleave",function(){$(".button-disable-hover",i).removeClass("button-disable-hover")}),n.parents(".follow-button-container:first").replaceWith(i),$(".follow-button",i).on("ajax:complete",window.ST.onFollowButtonAjaxComplete)},window.ST.initializeFollowButtons=function(){$(".follow-button").on("ajax:complete",window.ST.onFollowButtonAjaxComplete)},window.ST=window.ST||{},function(e){e.initializeNewPaypalAccountHandler=function(e,t,n){var i=$("#"+e),r=new Image;r.src="https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",r.className="send-button-loading-img",i.click(function(){i.after(r),i.addClass("send-button-loading").blur(),$.ajax({type:"GET",url:t,success:function(t){var i=$("#"+e+"_redirect");i.attr("href",t.redirect_url),$(n).removeClass("hidden"),window.location=t.redirect_url}})})},e.initializePayPalPreferencesForm=function(e,t,n){var i=$("#"+e);i.validate({errorPlacement:function(e,t){e.appendTo(t.parent())},rules:{"paypal_preferences_form[commission_from_seller]":{required:!0,number_min:t[0],number_max:t[1],number_no_decimals:!0},"paypal_preferences_form[minimum_listing_price]":{required:!0,number_min:n},"paypal_preferences_form[minimum_transaction_fee]":{required:!0,number_min:0}}})}}(window.ST),window.ST=window.ST||{},window.ST.transaction=window.ST.transaction||{},function(e,t){function n(e){return e.op_status_url?ST.utils.baconStreamFromAjaxPolling({url:e.op_status_url},function(e){return e.completed}).flatMap(function(t){var n=t.result;return n.success?n:new Bacon.Error({errorMsg:e.op_error_msg})}):new Bacon.Error({errorMsg:e.error_msg})}function i(e){var t=new Image;t.src="https://s3.amazonaws.com/sharetribe/assets/ajax-loader-grey.gif",t.className="paypal-button-loading-img";var n=$(t);return e.find(".paypal-button-wrapper").append(t),n.hide(),n}function r(e,t){t===!0?e.show():e.hide()}function o(e){window.location=e.data.redirect_url}function a(e){ST.utils.showError(e.errorMsg,"error")}function s(e){var s=$("#"+e),u=s.attr("action"),l=i(s),c=new Bacon.Bus,d=s.asEventStream("submit",function(e){return e.preventDefault(),s.serialize()}).filter(c.not().toProperty(!0)),p=d.flatMapLatest(function(e){return Bacon.$.ajaxPost(u,e)}).flatMapLatest(n);c.plug(d.map(!0)),c.plug(p.map(!0).mapError(!1)),c.skipDuplicates().onValue(t.partial(r,l)),p.onValue(o),p.onError(a)}function u(e,t){ST.utils.baconStreamFromAjaxPolling({url:e},function(e){return e.completed}).onValue(function(){window.location=t})}function l(e){window.auto_resize_text_areas("text_area"),$("textarea").focus();var t="#transaction-form";$(t).validate({rules:{message:{required:!0}},submitHandler:function(n){window.disable_and_submit(t,n,"false",e)}})}e.initializePayPalBuyForm=s,e.initializeCreatePaymentPoller=u,e.initializeFreeTransactionForm=l}(window.ST.transaction,_),window.ST=window.ST||{},function(e){function t(e,t,n,i,r){$("a.selected").addClass("hidden"),$("a.option").addClass("hidden"),$(".selected-group").each(function(){null!=r[$(this).attr("name")]&&$(this).find("a.selected[data-id="+r[$(this).attr("name")]+"]").removeClass("hidden")});var o="",a=!1;return u("category",r,t)?(o=n.category,p("category",r,t)):u("subcategory",r,t)?(o=n.subcategory,p("subcategory",r,t)):u("listing_shape",r,t)?(o=n.listing_shape,p("listing_shape",r,t)):a=!0,$("h2.listing-form-title").html(o),a}function n(e,t){return _.chain(t).filter(function(t){return t.id==e}).filter(function(e){return void 0!==e.subcategories}).map(function(e){return e.subcategories}).flatten().value()}function i(e,t,i){var r=n(e,i);return _.any(r,function(e){return e.id==t})}function r(e,t){return null!=t[e]}function o(e,t){return _.find(t,function(t){return t.id===e})}function a(e,t){var n=o(Number(e),t);return n.listing_shapes}function s(e,t,n){var i=o(Number(e),n),r=o(Number(t),i.subcategories);return r.listing_shapes}function u(e,t,i){if(r(e,t))return!1;if("category"==e)return i.length<2?(1==i.length&&(t.category=i[0].id),!1):!0;if("subcategory"==e){if(u("category",t,i))return!1;var o=n(t.category,i);return o.length<2?(1==o.length&&(t.subcategory=o[0].id),!1):!0}if("listing_shape"==e){if(u("category",t,i))return!1;if(u("subcategory",t,i))return!1;var l;return l=r("subcategory",t)?s(t.category,t.subcategory,i):a(t.category,i),1===l.length&&(t.listing_shape=l[0].id),l.length>1}}function l(e,t){var n="/"+t+"/listings/new_form_content";$.get(n,e,function(e){$(".js-form-fields").html(e),$(".js-form-fields").removeClass("hidden")})}function c(e,t,n){var i="/"+t+"/listings/edit_form_content",r=_.assign({},e,{id:n});$.get(i,r,function(e){$(".js-form-fields").html(e),$(".js-form-fields").removeClass("hidden")})}function d(e,t,n){var i;return i=r("subcategory",e)?s(e.category,e.subcategory,n):a(e.category,n),_.any(i,function(e){return e.id==t})}function p(e,t,n){$(".option-group[name="+e+"]").children().each(function(){"category"==e?$(this).removeClass("hidden"):"subcategory"==e?i(t.category,$(this).attr("data-id"),n)&&$(this).removeClass("hidden"):"listing_shape"==e&&d(t,$(this).attr("data-id"),n)&&$(this).removeClass("hidden")})}function f(e,n,i,r,o,a){if(e.hasClass("option"))a[e.parent().attr("name")]=e.attr("data-id");else{a[e.parent().attr("name")]=null;for(var s=!1,u=0;u<o.length;u++)o[u]==e.parent().attr("name")&&(s=!0),s===!0&&(a[o[u]]=null)}var l=t(n,i,r,o,a);return l}var h=function(e){if(null!=window.history&&null!=window.history.pushState){var t=window.location.origin+window.location.pathname;window.history.pushState(e,null,m(t,e))}},m=function(e,t){var n=g(t);if(_.isEmpty(n))return e;var i=_.map(n,function(e,t){return t+"="+e}).join("&");return[e,i].join("?")},g=function(e){return _.reduce(e,function(e,t,n){return null!=t&&(e[n]=t),e},{})},v={category:null,subcategory:null,listing_shape:null},y=function(e){if(!e)return{};var t=e.replace(/^\?/,""),n=_.zipObject(t.split("&").map(function(e){return e.split("=")}));return _.assign({},v,n)};e.initialize_new_listing_form_selectors=function(e,n,i){var r=["category","subcategory","listing_shape"],o=y(window.location.search),a=t(e,n,i,r,o);a&&l(o,e);var s=function(t){t&&l(o,e)};window.addEventListener("popstate",function(t){o=t.state||v,$(".js-form-fields").addClass("hidden");var a=f($(this),e,n,i,r,o);s(a)}),$(".new-listing-form").find("a.select").click(function(){$(".js-form-fields").addClass("hidden");var t=f($(this),e,n,i,r,o);h(o),s(t)})},e.initialize_edit_listing_form_selectors=function(e,n,i,r,o,a,s){var u=["category","subcategory","listing_shape"];r=r?""+r:null,o=o?""+o:null,a=a?""+a:null;var l={category:r,subcategory:o,listing_shape:a},d=_.clone(l),p=_.clone(l),m=t(e,n,i,u,l);m&&$(".js-form-fields").removeClass("hidden");var g=function(t){if(t){var n=_.isEqual(l,p);p=_.clone(l),n?$(".js-form-fields").removeClass("hidden"):($(".js-form-fields").html(""),c(l,e,s))}};window.addEventListener("popstate",function(t){l=t.state||d,$(".js-form-fields").addClass("hidden");var r=f($(this),e,n,i,u,l);g(r)}),$(".new-listing-form").find("a.select").click(function(){$(".js-form-fields").addClass("hidden");var t=f($(this),e,n,i,u,l);h(l),g(t)})},e.initialize_new_listing_form=function(t,n,i,r,o,a,s,u,l,c,d,p,f,h,m){$("#help_valid_until_link").click(function(){$("#help_valid_until").lightbox_me({centered:!0,zIndex:1e6})}),$("input.title_text_field:first").focus();var g=$(".js-shipping-price-container"),v=$("#shipping-checkbox");v.click(function(){y()});var y=function(){v.is(":checked")?g.show():g.hide()};y();var b=$(".js-listing-unit");if(b.length){var w=$(".js-shipping-price-additional"),x=function(){var e=b.find(":selected").data("kind");"quantity"===e?w.css({display:"table"}):w.hide()};b.change(x),x()}var C="false"==a?"#new_listing":"#edit_listing_"+a,S=null;S="true"==s?!0:!1;var k=p.reduce(function(t,n){var i=e.utils.findElementByName(n),r=i.data("min"),o=i.data("max");return t[n]={number_min:r,number_max:o},t},{});e.listingForm=$(C).validate({errorPlacement:function(e,t){if("listing[valid_until(1i)]"==t.attr("name"))e.appendTo(t.parent());else if("listing[price]"==t.attr("name"))e.appendTo(t.parent());else if($(t).hasClass("custom_field_checkbox")){var n=$(t).closest(".checkbox-group-container");e.insertAfter(n)}else $(t).hasClass("delivery-method-checkbox")?e.insertAfter($(".delivery-options-container")):"listing[shipping_price]"==t.attr("name")?e.insertAfter($(".shipping-price-default")):"listing[shipping_price_additional]"==t.attr("name")?e.insertAfter($(".js-shipping-price-additional")):e.insertAfter(t)},debug:!1,rules:_.extend(k,{"listing[title]":{required:!0,minlength:2,maxlength:60},"listing[origin]":{address_validator:!0},"listing[price]":{required:S,money:!0,minimum_price_required:[l,c]},"listing[shipping_price]":{money:!0},"listing[shipping_price_additional]":{money:!0},"listing[valid_until(1i)]":{min_date:!0,max_date:!0}}),messages:{"listing[valid_until(1i)]":{min_date:o,max_date:o},"listing[price]":{minimum_price_required:d}},onkeyup:!1,onclick:!1,onfocusout:!1,onsubmit:!0});var T=window.ST.imageUploader(f,h).log("status returned");T.onValue(function(e){$(".flash-notifications").click(function(){$(".flash-notifications").fadeOut("slow")}),0===e.loading?($(".js-listing-image-loading").hide(),0===e.processing?$(".js-listing-image-loading-done").hide():$(".js-listing-image-loading-done").show()):($(".js-listing-image-loading-done").hide(),$(".js-listing-image-loading").show())});var E=$(C).asEventStream("submit"),D=E.filter(function(){return $(C).valid()}),I=T.map(function(e){return e.loading>0});D.filter(I).onValue(function(e){var t=window.confirm(m);t?(report_analytics_event("listing","created"),disable_submit_button(C,i)):(e.preventDefault(),e.stopImmediatePropagation())}),set_textarea_maxlength(),auto_resize_text_areas("listing_description_textarea")}}(window.ST);